var CS_CONF={"projectId":3149,"status":1,"hostnames":["shutterstock.com"],"crossDomainTracking":0,"crossDomainSingleIframeTracking":0,"consentRequired":1,"allowSubdomains":1,"visitorCookieTimeout":34164000000,"sampleRate":100,"replayRecordingRate":10,"validationRate":10,"lastTrackingDraw":1639756028,"trackerDomain":"c.contentsquare.net","recordingDomain":"r.contentsquare.net","useMalkaPipeline":1,"ed":"l.contentsquare.net/log/web","eMerchandisingEnabled":0,"mouseMoveHeatmapEnabled":1,"autoInsightsEnabled":1,"jsErrorsEnabled":1,"customErrorsEnabled":0,"jsCustomErrorsEnabled":0,"apiErrorsEnabled":1,"customHashIdEnabled":0,"recordingEncryptionEnabled":0,"recordingEncryptionPublicKey":null,"recordingEncryptionPublicKeyId":0,"secureCookiesEnabled":0,"triggerSessionReplayEnabled":0,"triggerSessionReplayRegex":null,"dynamicIdRegex":null,"whitelistedAttributes":[],"replayRecordingUnmaskedUrlRegex":null,"replayRecordingUnmaskedUrlRegexRules":[],"replayRecordingMaskedUrlRegexRules":[],"replayRecordingMaskedUrlRegex":null,"anonymisationMethod":null,"tagDeploymentMode":"CONTENTSQUARE","experimental":null,"iframesTracking":0,"textVisibilityEnabled":0,"cookielessTrackingEnabled":0,"malkaUrlEnabled":0,"malkaEtrEnabled":0,"pathComputationRules":{"reliableSelectors":[]},"asyncSerializerEnabled":1,"pendingInactivityTimeout":5000,"accessibilityEnabled":0,"uxaDomain":"app.contentsquare.com","webviewsTrackingEnabled":0,"apiErrors":{"validCustomHeaders":[],"validUrls":[],"configurableApiErrorRules":[],"collectStandardHeaders":0,"collectQueryParam":0,"collectRequestBody":0,"collectResponseBody":0},"taskSchedulerOptions":{"enabled":1},"malkaQuotaServiceDomain":"q-aus1.contentsquare.net","malkaRecordingDomain":"k-aus1.contentsquare.net"};
var CS_INTEGRATIONS_CONF = {"google-optimize":{},"foresee":{},"launch-darkly":{}};
/* integration-google-optimize 2.7.0 */
!function(e){var t={};function n(o){if(t[o])return t[o].exports;var a=t[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(o,a,function(t){return e[t]}.bind(null,a));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e){e.exports=JSON.parse('{"name":"@contentsquare/integration-google-optimize-contentsquare","version":"2.7.0","scripts":{"build:snippet":"webpack"}}')},function(e,t,n){"use strict";function o(e,t){try{e()}catch(e){window._uxa=window._uxa||[],_uxa.push(["logSnippetError",t,e.message])}}function a(e){return"object"==typeof e&&null!==e}n.r(t);var r="";function i(e,t,n,o){var u,c=1e3,p=10;r||(r=function(e,t){if(a(window.CS_INTEGRATIONS_CONF)&&a(window.CS_INTEGRATIONS_CONF[e]))return window.CS_INTEGRATIONS_CONF[e][t]}(e,"timingSettings"),"object"==typeof(u=r)&&null!==u&&Object.keys(u).length&&(c=r.doOnlyWhenInterval,p=r.doOnlyWhenTimes)),t&&n&&(--p<0?"function"==typeof o&&o():n()?t():setTimeout((function(){i(e,t,n,o)}),c))}const u=n(0);let c,p=u.name,s=u.version;const l=function(e){var t,n,a,r;if(o((function(){var o=e.name;a=e.version;var i=o.replace("@contentsquare/integration-","");t=i+"-"+a;var u="-contentsquare";r=new RegExp(u+"$").test(i),n=i.replace(/-contentsquare([^-contentsquare]*)$/,"$1"),r||(u="-cap",r=new RegExp(u+"$").test(i),n=i.replace(/-cap([^-cap]*)$/,"$1"))}),"Shared-Function-readPackageJSON"),r)return{snippetBuildName:t,parameterName:n,snippetVersion:a}}(u);l&&(c=l.parameterName,p=l.snippetBuildName,s=l.snippetVersion),o((function(){window._uxa=window._uxa||[],CS_CONF.integrations=CS_CONF.integrations||[],CS_CONF.integrations.push("Google Optimize - v"+s);let e,t=!1,n="",a="";function r(t,n){var o,a;e.length&&e.indexOf(t+"~~~~"+n)>-1&&(t="",n=""),t&&n&&(e.push(t+"~~~~"+n),a=n,o="AB_GO_"+(o=t),_uxa.push(["trackDynamicVariable",{key:o,value:a}]))}function u(u){if(e=[],window.dataLayer&&"function"==typeof dataLayer.push&&!t){t=!0;(window.gtag?gtag:function(){dataLayer.push(arguments)})("event","optimize.callback",{callback:function(e,t){o((function(){e||(e="true"),t&&e&&(n=t,a=e,r(n,a))}),p)}})}if(document.location.search.indexOf("utm_expid=.")>-1){const e=function(e,t){t||(t="="),e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&=]"+e+t+"([^&#]*)").exec(location.search);return null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))}("utm_expid");e&&(n=e.split(".")[1],a=e.split(".")[2],r(n,a))}i(c,(function(){setTimeout((function(){o((function(){let e=!1;for(let t in gaData)e||gaData.hasOwnProperty(t)&&gaData[t].experiments&&(e=!0);if(e){const e=Object.keys(gaData);for(let t=0;t<e.length;t++)if(gaData[e[t]].experiments){const o=gaData[e[t]].experiments,i=Object.keys(o);for(let o=0;o<i.length;o++){const u=i[o];n=u,a=gaData[e[t]].experiments[u],r(n,a)}}}}),p)}),500)}),(function(){return!!window.gaData}))}let l=!1;_uxa.push(["afterPageView",function(e){o((function(){l||(l=!0,u())}),p)}])}),p)}]);/* integration-foresee 2.8.0 */
!function(e){var n={};function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:i})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(i,r,function(n){return e[n]}.bind(null,r));return i},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=1)}([function(e){e.exports=JSON.parse('{"name":"@contentsquare/integration-foresee-contentsquare","version":"2.8.0","scripts":{"build:snippet":"webpack"}}')},function(e,n,t){"use strict";function i(e,n){try{e()}catch(e){window._uxa=window._uxa||[],_uxa.push(["logSnippetError",n,e.message])}}function r(e){return"object"==typeof e&&null!==e}function a(e,n,t){if((t=t||window)&&n&&e){var i=!1,r=t[e];r?n():Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return r},set:function(e){r=e,i||(i=!0,n())}})}}t.r(n);var o,u=t(0),c=u.name,s=u.version,d=function(e){var n,t,r,a;if(i((function(){var i=e.name;r=e.version;var o=i.replace("@contentsquare/integration-","");n=o+"-"+r;var u="-contentsquare";a=new RegExp(u+"$").test(o),t=o.replace(/-contentsquare([^-contentsquare]*)$/,"$1"),a||(u="-cap",a=new RegExp(u+"$").test(o),t=o.replace(/-cap([^-cap]*)$/,"$1"))}),"Shared-Function-readPackageJSON"),a)return{snippetBuildName:n,parameterName:t,snippetVersion:r}}(u);d&&(o=d.parameterName,c=d.snippetBuildName,s=d.snippetVersion),i((function(){window._uxa=window._uxa||[],CS_CONF.integrations=CS_CONF.integrations||[],CS_CONF.integrations.push("Verint (ForeSee) - v"+s);var e=function(e,n){if(r(window.CS_INTEGRATIONS_CONF)&&r(window.CS_INTEGRATIONS_CONF[e]))return window.CS_INTEGRATIONS_CONF[e][n]}(o,"settings"),n=!1,t="";e&&(e.indexOf("sendArtificialPageviews")>-1&&(n=!0),e.indexOf("setReplayLinkToFirstPV")>-1&&(t=0));var u=!1;function d(e,t,i,r){e="FB_FS_"+e,_uxa.push(["trackDynamicVariable",{key:e,value:t}]),u&&"etr"===i&&_uxa.push(["trackEventTriggerRecording","@ETS@"+e]),r&&n&&_uxa.push(["trackPageview",window.location.pathname+"?"+r])}function f(e){!function(e,n,t){t=t||window;var i=e.split(".");if(1==i.length)a(e,n,t);else{var r=t,o=0;const e=function(){r=o>0?r[i[o-1]]:window,++o>=i.length?a(i[o-1],n,r):a(i[o-1],e,r)};e()}}("FSR",(function(){setTimeout((function(){i((function(){window.fsReady&&fsReady((function(){i((function(){if((u=_uxa.push(["isRecording"]))&&FSR.CPPS&&FSR.CPPS.set){var e=function(e,n){e||(e="missingFromDynamicSnippet");var t=n;isNaN(t)&&(n=0);var i=_uxa.push(["getSessionData"]);if(i){var r=i.projectId,a=i.userId,o=i.sessionNumber,u=i.pageNumber,c=u-n;return n>=u&&(c=u),0===t&&(c=1),"https://app.contentsquare.com/quick-playback/index.html?pid="+r+"&uu="+a+"&sn="+o+"&pvid="+c+"&recordingType=cs&vd="+e}}("fs",t);e&&FSR.CPPS.set("ContentsquareReplay",e)}FSR.onInviteShown&&FSR.onInviteShown.subscribe((function(e){i((function(){e&&(e.uid?d("Feedback Invite Displayed","Survey ID : "+e.uid,0,"cs_foresee=feedback_invite_displayed"):d("Feedback Invite Displayed","true",0,"cs_foresee=feedback_invite_displayed"))}),c)}),!0,!0),FSR.onInviteAccepted&&FSR.onInviteAccepted.subscribe((function(e){i((function(){e&&(e.uid?d("Feedback Invite Submitted","Survey ID : "+e.uid,"etr","cs_foresee=feedback_invite_submitted"):d("Feedback Invite Submitted","true","etr","cs_foresee=feedback_invite_submitted"))}),c)}),!0,!0),FSR.onFeedbackShown&&FSR.onFeedbackShown.subscribe((function(e){i((function(){d("Feedback Displayed","true",0,"cs_foresee=feedback_displayed")}),c)}),!0,!0),FSR.onFeedbackSubmitted&&FSR.onFeedbackSubmitted.subscribe((function(e){i((function(){e&&(e.mid?d("Feedback Submitted","Survey ID : "+e.mid,"etr","cs_foresee=feedback_submitted"):d("Feedback Submitted","true","etr","cs_foresee=feedback_submitted"),e.rating&&d("Feedback Rating",parseInt(e.rating)))}),c)}),!0,!0)}),c)}))}),c)}),500)}))}var p=!1;_uxa.push(["afterPageView",function(e){i((function(){p||(p=!0,f())}),c)}])}),c)}]);/* integration-launch-darkly 2.5.0 */
!function(e){var n={};function t(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var a in e)t.d(r,a,function(n){return e[n]}.bind(null,a));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=1)}([function(e){e.exports=JSON.parse('{"name":"@contentsquare/integration-launch-darkly-contentsquare","version":"2.5.0","scripts":{"build:snippet":"webpack"}}')},function(e,n,t){"use strict";function r(e,n){try{e()}catch(e){window._uxa=window._uxa||[],_uxa.push(["logSnippetError",n,e.message])}}function a(e,n,t){if((t=t||window)&&n&&e){var r=!1,a=t[e];a?n():Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return a},set:function(e){a=e,r||(r=!0,n())}})}}t.r(n);var o=t(0),i=o.name,u=o.version,c=function(e){var n,t,a,o;if(r((function(){var r=e.name;a=e.version;var i=r.replace("@contentsquare/integration-","");n=i+"-"+a;var u="-contentsquare";o=new RegExp(u+"$").test(i),t=i.replace(/-contentsquare([^-contentsquare]*)$/,"$1"),o||(u="-cap",o=new RegExp(u+"$").test(i),t=i.replace(/-cap([^-cap]*)$/,"$1"))}),"Shared-Function-readPackageJSON"),o)return{snippetBuildName:n,parameterName:t,snippetVersion:a}}(o);c&&(c.parameterName,i=c.snippetBuildName,u=c.snippetVersion),r((function(){window._uxa=window._uxa||[],CS_CONF.integrations=CS_CONF.integrations||[],CS_CONF.integrations.push("LaunchDarkly - v"+u);function e(e){var n=[];function t(e,t){var r,a;e=e.toString(),t=t.toString(),n.length&&n.indexOf(e+"~~~~"+t)>-1&&(e="",t=""),e&&t&&"true"===t.toLowerCase()&&(n.push(e+"~~~~"+t),a=t,r="AB_LD_"+(r=e),_uxa.push(["trackDynamicVariable",{key:r,value:a}]))}if(CS_CONF.integrations_handler=CS_CONF.integrations_handler||{},CS_CONF.integrations_handler.launchdarkly=function(e){var n=e;setTimeout((function(){n.on&&n.on("change",(function(e){for(var n=e,r=Object.keys(n),a=0;a<r.length;a++){var o=r[a],i=n[r[a]];i&&i.hasOwnProperty("current")&&"object"!=typeof(i=i.current)&&"function"!=typeof i&&t(o,i)}}))}),500)},"function"==typeof window.CustomEvent){var o=new window.CustomEvent("Contentsquare_LD_Integration_Launch");window.dispatchEvent(o)}!function(e,n,t){t=t||window;var r=e.split(".");if(1==r.length)a(e,n,t);else{var o=t,i=0;const e=function(){o=i>0?o[r[i-1]]:window,++i>=r.length?a(r[i-1],n,o):a(r[i-1],e,o)};e()}}("ldMeta",(function(){setTimeout((function(){r((function(){for(var e=0;e<ldMeta.length;e++){if(ldMeta[e].hasOwnProperty("name")&&void 0!==ldMeta[e].name&&null!=ldMeta[e].name&&ldMeta[e].hasOwnProperty("experience")&&void 0!==ldMeta[e].experience&&null!=ldMeta[e].experience&&"object"!=typeof ldMeta[e].experience&&"function"!=typeof ldMeta[e].experience)t(ldMeta[e].name,ldMeta[e].experience)}}),i)}),500)}))}var n=!1;_uxa.push(["afterPageView",function(t){r((function(){n||(n=!0,e())}),i)}])}),i)}]);!function(){"use strict";var t={d:function(n,i){for(var r in i)t.o(i,r)&&!t.o(n,r)&&Object.defineProperty(n,r,{enumerable:!0,get:i[r]})},o:function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},r:function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},n={};t.r(n),t.d(n,{get:function(){return dt},getRequestParameters:function(){return wt}});var i={};t.r(i),t.d(i,{getRequestParameters:function(){return ms}});var r="cs-native-frame",e={navigatorProperties:[{propertyName:"sendBeacon",binding:navigator}],nodeProperties:["childNodes","parentNode","nextSibling","firstChild"],elementProperties:["shadowRoot"],elementPropertiesValues:["matches","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector"],eventProperties:["target"],imageProperties:["src"],constructors:{Date:"csDate",JSON:"csJSON",Array:"csArray",String:"csString",URL:"csURL",MutationObserver:"csMutationObserver",screen:"csScreen"}};function s(t,n,i){var r=function(t,n){for(var i,r=t;r&&!(i=Object.getOwnPropertyDescriptor(r,n));)r=Object.getPrototypeOf(r);return i}(t,n);if(!r)return function(){return this[n]};switch(i){case"get":return r.get;case"set":return r.set;case"value":return r.value}}function o(t){Object.keys(e.constructors).forEach((function(n){window[e.constructors[n]]=t[n]instanceof Function&&null==t[n].prototype?t[n].bind(window):t[n]})),function(t){window.csquerySelector={1:t.Element.prototype.querySelector,9:t.Document.prototype.querySelector,11:t.DocumentFragment.prototype.querySelector},window.csquerySelectorAll={1:t.Element.prototype.querySelectorAll,9:t.Document.prototype.querySelectorAll,11:t.DocumentFragment.prototype.querySelectorAll}}(t),("Prototype"in window||/^((?!chrome|android).)*safari/i.test(navigator.userAgent))&&(window.csMutationObserver=window.WebKitMutationObserver||window.MutationObserver),u("csNode",e.nodeProperties,t.Node.prototype,"get"),u("csElement",e.elementProperties,t.Element.prototype,"get"),u("csElement",e.elementPropertiesValues,t.Element.prototype,"value",!1),u("csHTMLImageElement",e.imageProperties,t.HTMLImageElement.prototype,"set"),u("csEvent",e.eventProperties,t.Event.prototype,"get"),u("csNavigator",e.navigatorProperties,t.navigator,"value")}function u(t,n,i,r,e){void 0===e&&(e=!0),n.forEach((function(n){var o="string"!=typeof n&&"binding"in n,u=o?n.propertyName:n;(e||u in i)&&(window["".concat(t+u)]=s(i,u,r),o&&(window["".concat(t+u)]=window["".concat(t+u)].bind(n.binding)))}))}function h(t,n){window.CSProtectnativeFunctionsLogs=window.CSProtectnativeFunctionsLogs||{},window.CSProtectnativeFunctionsLogs[t]=n}if(!function(){try{var t=function(){var t=document.createElement("iframe");t.id=r,t.setAttribute("hidden",""),t.setAttribute("title","Intentionally blank"),t.setAttribute("sandbox","allow-same-origin");var n=document.createElement("cs-native-frame-holder");if(n.setAttribute("hidden",""),document.body.appendChild(n),Boolean(Element.prototype.attachShadow)){var i=n.attachShadow({mode:"closed"});return i.innerHTML=t.outerHTML,i.firstElementChild.contentWindow}return n.innerHTML=t.outerHTML,n.firstElementChild.contentWindow}();return!!t&&(window.CSPureWindow=t,o(window.CSPureWindow),!0)}catch(t){return h("Warning","failed to copy references from pure iframe: ".concat(t.message)),!1}}())try{o(window)}catch(ae){h("Critical","failed to copy references from window: ".concat(ae.message))}function c(t){return a(csString.prototype.toLowerCase.call(t.localName))}function a(t){return csString.prototype.replace.call(t,/([#;&,.+*~':"!^$[\]()<=>|/%?@`{}\\ ])/g,"\\$1")}function f(t){return 1===t.nodeType}function v(t){return 3===t.nodeType}function l(t){return f(t)&&"a"===t.localName}function d(t){return function(t){return f(t)&&"link"===t.localName}(t)&&-1!==csString.prototype.indexOf.call(t.rel,"stylesheet")}function w(t){return f(t)&&"img"===t.localName}function p(t){return f(t)&&"style"===t.localName}function y(t){return f(t)&&"input"===t.localName}function m(t){switch(t.nodeType){case 9:case 11:return!0;default:return!1}}function g(t){return 9===t.nodeType}function S(t){return m(t)&&"host"in t&&"mode"in t}var E=["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"];var A="detached";function b(t){for(var n=t,i=[n];null!==csNodeparentNode.apply(n);)n=csNodeparentNode.apply(n),csArray.prototype.push.call(i,n);return R(n)&&csArray.prototype.push.call(i,A),{ancestors:i,selectionRoot:n}}function R(t){return D.isValidElement(t)}var N=window.csElementmatches||window.csElementmatchesSelector||window.csElementmozMatchesSelector||window.csElementmsMatchesSelector||window.csElementoMatchesSelector||window.csElementwebkitMatchesSelector,T=9;function O(t,n){return!!n&&csArray.prototype.some.call(n,(function(n){return N.call(t,n)}))}var k=[/\d{4}/,/^ember\d+$/],C="@",I="data-cs-override-id",_="data-cs-dynamic-id";function x(t,n,i,r){var e=r.dynamicIdRegex||null,s=r.dynamicElementNameRegex,o=c(t);s&&(s.test(t.localName)&&(o=csString.prototype.replace.call(o,s,"$1".concat(C))));if(function(t,n){var i=L(t);return i&&csString.prototype.match.call(i,/^[\w-]+$/)&&P(I,i,n)}(t,i)){var u=L(t);return{hasUniqueIdentifier:!0,elementSelector:"".concat(o,"[").concat(I,'="').concat(u,'"]')}}var h=function(t,n,i){if(!i.uniqueAttributes)return{success:!1};for(var r=0,e=i.uniqueAttributes;r<e.length;r++){var s=e[r],o=t.getAttribute(s);if(null!==o)if(P(s,o,n))return{attributeName:s,attributeValue:o,success:!0}}return{success:!1}}(t,i,r);if(h.success)return{hasUniqueIdentifier:!0,elementSelector:"".concat(o,"#UA[").concat(h.attributeName,'="').concat(h.attributeValue,'"]')};var f=function(t,n,i){if(!i.uniqueCssSelectors)return;for(var r=0,e=i.uniqueCssSelectors;r<e.length;r++){var s=e[r];if(N.call(t,s)&&M(s,n))return s}return}(t,i,r);if(f)return{hasUniqueIdentifier:!0,elementSelector:"".concat(o,"#UCS[").concat(f,"]")};var v=function(t){var n=t.getAttribute("id");return n?a(n):n}(t);if(function(t,n,i,r){return n&&!function(t){return null!==L(t)}(t)&&!function(t,n,i){return t.hasAttribute(_)||function(t,n){var i=!1;t&&n&&(i=n.test(t));return t&&(csArray.prototype.some.call(k,(function(n){return n.test(t)}))||i)}(n,i)}(t,n,r)&&function(t,n){return t&&P("id",t,n)}(n,i)}(t,v,i,e))return{hasUniqueIdentifier:!0,elementSelector:"".concat(o,"#").concat(v)};var l=function(t,n){if(!n.reliableSelectors)return;for(var i=0,r=n.reliableSelectors;i<r.length;i++){var e=r[i];if(N.call(t,e))return e}return}(t,r);if(l){var d=function(t,n,i){if(t===A||t.nodeType===T)return 0;for(var r=0,e=n.previousElementSibling;e;)N.call(e,i)&&(r+=1),e=e.previousElementSibling;return r}(n,t,l);return{hasUniqueIdentifier:!1,elementSelector:"".concat(o,"[").concat(l,"](").concat(d,")")}}var w=function(t,n,i){if(t===A||t.nodeType===T)return 0;for(var r=i.dynamicElementNameRegex,e=!!(null==r?void 0:r.test(n.localName)),s=c(n),o=0,u=n.previousElementSibling;u;)(c(u)===s||e&&(null==r?void 0:r.test(u.localName)))&&!O(u,i.reliableSelectors)&&(o+=1),u=u.previousElementSibling;return o}(n,t,r);return{hasUniqueIdentifier:!1,elementSelector:"".concat(o,":eq(").concat(w,")")}}function L(t){return t.getAttribute(I)}function P(t,n,i){try{return 1===window.csquerySelectorAll[i.nodeType].call(i,"[".concat(t,'="').concat(n,'"]')).length}catch(t){if("SyntaxError"!==t.name)throw t}return!1}function M(t,n){try{return 1===window.csquerySelectorAll[n.nodeType].call(n,t).length}catch(t){if("SyntaxError"!==t.name)throw t}return!1}var D,U=11;function j(t,n,i){var r=csArray.prototype.shift.call(t);if(0===t.length)return q(r,i);var e=x(r,t[0],n,i),s=e.elementSelector,o=e.hasUniqueIdentifier;if(!i.fullPath&&o){var u=t[t.length-1];return"".concat(q(u,i)).concat(s)}var h=j(t,n,i);return"".concat(h?"".concat(h,">"):"").concat(s)}function q(t,n){if(t===A)return"|detached|";if(t.host){var i=b(t.host),r=i.ancestors,e=i.selectionRoot;return"".concat(j(r,e,n),"|shadow-root|")}return t.nodeType===U?"|fragment|":""}!function(t){function n(t){return!!t&&"localName"in t&&"getAttribute"in t&&"hasAttribute"in t&&"parentNode"in t}function i(t){return t&&"jquery"in t&&1===t.length?t[0]:t}t.INVALID_ELEMENT="INVALID_ELEMENT",t.isValidElement=n,t.getElementPath=function(r,e){void 0===e&&(e={fullPath:!1,dynamicIdRegex:null});var s=i(r);if(s===document)return"";if(!n(s))return t.INVALID_ELEMENT;var o=b(s);return j(o.ancestors,o.selectionRoot,e)},t.getElementPathAndFirstAnchorParent=function(r,e){void 0===e&&(e={fullPath:!1,dynamicIdRegex:null});var s=i(r);if(s===document)return{path:"",firstAnchorParent:null};if(!n(s))return{path:t.INVALID_ELEMENT,firstAnchorParent:null};var o=function(t){for(var n=t,i=[n],r=null;null!==csNodeparentNode.apply(n);)null===r&&l(n)&&(r=n),csArray.prototype.push.call(i,csNodeparentNode.apply(n)),n=csNodeparentNode.apply(n);return R(n)&&csArray.prototype.push.call(i,A),{firstAnchorParent:r,ancestors:i,selectionRoot:n}}(s),u=o.firstAnchorParent;return{path:j(o.ancestors,o.selectionRoot,e),firstAnchorParent:u}}}(D||(D={})),window.CSPathComputation=window.CSPathComputation||D;var H=function(t,n){return H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},H(t,n)};function z(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}H(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}var B=function(){return B=Object.assign||function(t){for(var n,i=1,r=arguments.length;i<r;i++)for(var e in n=arguments[i])Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t},B.apply(this,arguments)};function F(t,n,i,r){var e,s=arguments.length,o=s<3?n:null===r?r=Object.getOwnPropertyDescriptor(n,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(o=(s<3?e(o):s>3?e(n,i,o):e(n,i))||o);return s>3&&o&&Object.defineProperty(n,i,o),o}function V(t,n,i,r){return new(i||(i=Promise))((function(e,s){function o(t){try{h(r.next(t))}catch(t){s(t)}}function u(t){try{h(r.throw(t))}catch(t){s(t)}}function h(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(t){t(n)}))).then(o,u)}h((r=r.apply(t,n||[])).next())}))}function G(t,n){var i,r,e,s,o={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(s){return function(u){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,r&&(e=2&s[0]?r.return:s[0]?r.throw||((e=r.return)&&e.call(r),0):r.next)&&!(e=e.call(r,s[1])).done)return e;switch(r=0,e&&(s=[2&s[0],e.value]),s[0]){case 0:case 1:e=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(e=o.trys,(e=e.length>0&&e[e.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!e||s[1]>e[0]&&s[1]<e[3])){o.label=s[1];break}if(6===s[0]&&o.label<e[1]){o.label=e[1],e=s;break}if(e&&o.label<e[2]){o.label=e[2],o.ops.push(s);break}e[2]&&o.ops.pop(),o.trys.pop();continue}s=n.call(t,o)}catch(t){s=[6,t],r=0}finally{i=e=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}}Object.create;function J(t,n,i){if(i||2===arguments.length)for(var r,e=0,s=n.length;e<s;e++)!r&&e in n||(r||(r=Array.prototype.slice.call(n,0,e)),r[e]=n[e]);return t.concat(r||Array.prototype.slice.call(n))}Object.create;var Y=Number.MAX_SAFE_INTEGER||9007199254740991;function W(){}function X(t,n){return 0===csString.prototype.lastIndexOf.call(t,n,0)}function K(t,n){return-1!==csString.prototype.indexOf.call(t,n,t.length-n.length)}var $=34164e6,Q={percentage:function(){return Math.floor(1e4*Math.random())/100},boolean:function(t){return this.percentage()<t},integer:function(t){return void 0===t&&(t=Y),Math.floor(Math.random()*t)}},Z="function"==typeof Symbol?Symbol("json"):null;var tt,nt,it=Z?function(t){if(t[Z])return t[Z];if(csArray.isArray(t)){if(0===t.length)return"[]";for(var n="["+it(t[0]),i=1;i<t.length;i++)n+=","+it(t[i]);return n+"]"}return t[Z]=csJSON.stringify(t)}:csJSON.stringify,rt=function(){function t(t){var n;this.trackerDomain=t.trackerDomain,this.loggerDomain=t.ed,this.minLogLevel=t.logLevel,this.projectId=t.projectId,this.status=t.status,this.hostnames=t.hostnames,this.iframesTracking=!!t.iframesTracking,this.crossDomainTracking=!!t.crossDomainTracking,this.crossDomainSingleIframeTracking=!!t.crossDomainSingleIframeTracking,this.consentRequired=!!t.consentRequired,this.allowSubdomains=!!t.allowSubdomains,this.visitorCookieTimeout=t.visitorCookieTimeout||$,this.sampleRate=t.sampleRate,this.replayRecordingRate=t.replayRecordingRate,this.validationRate=t.validationRate,this.lastTrackingDraw=t.lastTrackingDraw||1,this.useHttps=!0,this.recordingDomain=t.recordingDomain,this.eMerchandisingEnabled=t.eMerchandisingEnabled,this.mouseMoveHeatmapEnabled=t.mouseMoveHeatmapEnabled,this.jsErrorsEnabled=t.jsErrorsEnabled,this.apiErrors=B({enabled:null!==(n=t.apiErrorsEnabled)&&void 0!==n?n:0},t.apiErrors),this.customErrorsEnabled=t.customErrorsEnabled,this.jsCustomErrorsEnabled=t.jsCustomErrorsEnabled,this.triggerSessionReplayEnabled=t.triggerSessionReplayEnabled,this.triggerSessionReplayRegex=this.t(t.triggerSessionReplayRegex),this.dynamicIdRegex=t.dynamicIdRegex?new RegExp(t.dynamicIdRegex):null,this.whitelistedAttributes=t.whitelistedAttributes||[],this.replayRecordingUnmaskedUrlRegex=this.t(t.replayRecordingUnmaskedUrlRegex),this.replayRecordingMaskedUrlRegex=this.t(t.replayRecordingMaskedUrlRegex),this.replayRecordingMaskedUrlRegexRules=t.replayRecordingMaskedUrlRegexRules||null,this.replayRecordingUnmaskedUrlRegexRules=t.replayRecordingUnmaskedUrlRegexRules||null,this.anonymisationMethod=t.anonymisationMethod||null,this.tagDeploymentMode=t.tagDeploymentMode,this.dualCollectionTagDomain=t.dualCollectionTagDomain||null,this.ptcDomain=t.ptcDomain||null,this.ptcGuid=t.ptcGuid||null,this.secureCookiesEnabled=!!t.secureCookiesEnabled,this.ptcSha512=t.ptcSha512||null,this.ptcSnapshotPath=t.ptcSnapshotPath||null,this.emitDebugEvents=!1,this.useMalkaPipeline=t.useMalkaPipeline,this.malkaQuotaServiceDomain=t.malkaQuotaServiceDomain||null,this.malkaRecordingDomain=t.malkaRecordingDomain||null,this.textVisibilityEnabled=t.textVisibilityEnabled,this.experimental=t.experimental||{},this.malkaEtrEnabled=!!t.malkaEtrEnabled,this.malkaUrlEnabled=!!t.malkaUrlEnabled,this.cookielessTrackingEnabled=t.cookielessTrackingEnabled,this.customHashIdEnabled=!!t.customHashIdEnabled,this.encryptionEnabled=!!t.recordingEncryptionEnabled,this.encryptionPublicKey=t.recordingEncryptionPublicKey||null,this.pathComputationRules=t.pathComputationRules||{},t.pathComputationRules&&t.pathComputationRules.dynamicElementNameRegex&&(this.pathComputationRules.dynamicElementNameRegex=new RegExp(t.pathComputationRules.dynamicElementNameRegex)),this.asyncSerializerEnabled=!!t.asyncSerializerEnabled,this.encryptionPublicKeyId=t.recordingEncryptionPublicKeyId,this.pendingInactivityTimeout=t.pendingInactivityTimeout||5e3,this.accessibilityEnabled=!!t.accessibilityEnabled,t.taskSchedulerOptions&&(this.taskSchedulerOptions=B(B({},t.taskSchedulerOptions),{enabled:!!t.taskSchedulerOptions.enabled})),this.uxaDomain=t.uxaDomain,this.isWebView=!1}return t.prototype.getTrackerUri=function(){return"".concat(this.i(),"://").concat(this.trackerDomain)},t.prototype.getRecordingUri=function(){return"".concat(this.i(),"://").concat(this.useMalkaPipeline&&this.malkaRecordingDomain?this.malkaRecordingDomain:this.recordingDomain)},t.prototype.getQuotaServiceUri=function(){return"".concat(this.i(),"://").concat(this.malkaQuotaServiceDomain)},t.prototype.getLoggerUri=function(){return"".concat(this.i(),"://").concat(this.loggerDomain)},t.prototype.i=function(){return this.useHttps?"https":"http"},t.prototype.isProjectActive=function(){return 1===this.status},t.prototype.processOptionOverrides=function(t){var n=this;t&&t.forEach&&t.forEach((function(t){var i=t[0],r=t.slice(1);if("setOption"===i){var e=r[0],s=r[1];n.u(e,s)}}))},t.prototype.u=function(t,n){"trackerDomain"===t&&(this.trackerDomain=n),"recordingDomain"===t&&(this.recordingDomain=n),"loggerDomain"===t&&(this.loggerDomain=n),"malkaRecordingDomain"===t&&(this.malkaRecordingDomain=n),"malkaQuotaServiceDomain"===t&&(this.malkaQuotaServiceDomain=n),"minLogLevel"===t&&(this.minLogLevel=n),"useHttps"===t&&(this.useHttps=!!n),"isWebView"===t&&(this.isWebView=n)},t.prototype.t=function(t){return t?this.h(t):null},t.prototype.getRequestParameters=function(){return{pid:"".concat(this.projectId)}},t.prototype.updateDynamicFields=function(t,n){"emitDebugEvents"===t&&(this.emitDebugEvents=n),"minLogLevel"===t&&(this.minLogLevel=n)},t.prototype.h=function(t){try{var n=/^\/(.*)\/([gim]*)$/.exec(t);if(n){var i=n[1],r=n[2];return new RegExp("^".concat(i,"$"),r)}return new RegExp("^".concat(t,"$"))}catch(t){return null}},t}(),et=function(){function t(t,n){this.g=t,this.S=n}return t.prototype.init=function(){this.A=this.g!==this.g.top,this.R=this.S.isWebView&&this.g===this.g.top,this.S.iframesTracking&&this.A||this.R?this.N=!1:this.N=!0},t.prototype.isInIframeContext=function(){return this.A},t.prototype.isTopWindowTracker=function(){return this.N},t.prototype.isInWebViewContext=function(){return this.R},t}();!function(t){t.debug="debug",t.warn="warn",t.error="error",t.critical="critical"}(tt||(tt={})),function(t){t.toQuery=function(t){return csArray.prototype.join.call(csArray.prototype.map.call(Object.keys(t),(function(n){return"".concat(encodeURIComponent(n),"=").concat(encodeURIComponent(t[n]))})),"&")}}(nt||(nt={}));var st=function(){function t(t,n){this.domainUri=t,this.path=n,this.beforeRequestCallbacks=[],this.afterRequestCallbacks=[]}return t.prototype.setRequestParametersProviders=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.requestParametersProviders=t},t.prototype.before=function(t){csArray.prototype.push.call(this.beforeRequestCallbacks,t)},t.prototype.after=function(t){csArray.prototype.push.call(this.afterRequestCallbacks,t)},t.prototype.retrieveParameters=function(){return this.requestParametersProviders?csArray.prototype.reduce.call(csArray.prototype.map.call(this.requestParametersProviders,(function(t){return t.getRequestParameters()})),(function(t,n){return B(B({},t),n)})):{}},t}(),ot=function(t){function n(n,i){return t.call(this,n,i)||this}return z(n,t),n.prototype.send=function(){csArray.prototype.forEach.call(this.beforeRequestCallbacks,(function(t){return t()}));var t=this.retrieveParameters();this.T(t);var n=nt.toQuery(t);this.O(n),csArray.prototype.forEach.call(this.afterRequestCallbacks,(function(t){return t()}))},n.prototype.O=function(t){var n=new window.Image(1,1);n.onload=W,n.onerror=W,csHTMLImageElementsrc.call(n,"".concat(this.domainUri).concat(this.path?"/".concat(this.path):"","?").concat(t))},n.prototype.T=function(t){t.r=csString.prototype.slice.call("".concat(Math.random()),2,8)},n}(st),ut=function(){function t(t,n){this.k=t,this.C=n}return t.prototype.init=function(){this.I=new ot(this.k.getLoggerUri()),this.I.setRequestParametersProviders(this,this.C)},t.prototype.send=function(t){this._=t,this.I.send()},t.prototype.getRequestParameters=function(){return{a:this._.app,l:this._.level,m:this._.message,s:this._.stacktrace}},t}(),ht=/[a-zA-Z0-9._%+-]+(?:@|%40)[a-zA-Z0-9.%-_]+((?:\.|%2[eE])[a-zA-Z0-9-]+)+/g,ct=/[a-zA-Z0-9+_-](?:@|%40)/,at="([-A-Za-z0-9+/=_]|=[^=]|={3,})+",ft=new RegExp("(ey".concat(at,"\\.ey").concat(at,"\\.").concat(at,")"),"g"),vt=function(){function t(){}return t.prototype.anonymizeEmail=function(t){return"string"==typeof t&&ct.test(t)?csString.prototype.replace.call(t,ht,"CS_ANONYMIZED_EMAIL"):t},t.prototype.anonymizeJwt=function(t){return csString.prototype.replace.call(t,ft,"CS_ANONYMIZED_JWT")},t.prototype.anonymizeFields=function(t,n){var i=this;return csArray.prototype.forEach.call(n,(function(n){t[n]=i.anonymizeEmail(t[n])})),t},t}(),lt="13.30.6";function dt(){return lt}function wt(){return{v:lt}}var pt=function(){return void 0!==window.performance&&window.performance.now?window.performance.timing.navigationStart+Math.round(window.performance.now()):csDate.now()};function yt(){return Math.floor(pt()/1e3)}var mt=function(){function t(t,n){this.L=t,this.P=n}return t.prototype.getRequestParameters=function(){return B(B({d:"".concat(pt()),p:this.P.anonymizeEmail(window.location.href)},this.L.getRequestParameters()),wt())},t}();function gt(t){return bt(t)&&("number"==typeof t||t instanceof Number)&&!isNaN(t)}function St(t){return t===parseInt(t,10)}function Et(t){return bt(t)&&("string"==typeof t||t instanceof csString)}function At(t){return"object"==typeof t}function bt(t){return void 0!==t}function Rt(t){return bt(t)&&null!==t}function Nt(t){return"function"==typeof t}function Tt(t){return t instanceof Element}function Ot(t){return t instanceof Error}var kt,Ct,It="snippet-",_t="implementation-snippet-";!function(t){t.IMPLEMENTATION="implementation",t.DYNAMIC="dynamic"}(kt||(kt={})),function(t){t[t.debug=0]="debug",t[t.warn=1]="warn",t[t.error=2]="error",t[t.critical=3]="critical"}(Ct||(Ct={}));var xt=function(){function t(t,n,i){var r;this.M=n,this.P=new vt,this.D=Ct[tt.warn],this.D=Ct[t.minLogLevel||tt.warn],this.I=i||new ut(t,new mt(t,this.P)),this.U=((r={})[tt.debug]=[],r[tt.warn]=[],r[tt.error]=[],r[tt.critical]=[],r),this.j={implementation:{},dynamic:{}},this.I.init()}return t.prototype.send=function(t,n,i){if(void 0===n&&(n=""),void 0===i&&(i=tt.warn),this.q(i,n)){csArray.prototype.push.call(this.U[i],n||"");var r={message:this.H(t,n),stacktrace:this.B(t),app:"uxa",level:i};this.I.send(r)}},t.prototype.H=function(t,n){var i=Ot(t)?this.P.anonymizeEmail(t.message||t.toString()):t;return n&&(i+=" ErrorCode: ".concat(n)),i},t.prototype.B=function(t){return Ot(t)?"".concat(t.stack||"No stacktrace"," ").concat(this.F()):this.F()},t.prototype.F=function(){var t=this.M.getVisitorService(),n=null==t?void 0:t.getVisitor();if(!n)return"No context";var i=this.M.getSessionService(),r=i&&i.getSession(),e={userId:n.id,sessionNumber:n.visitsCount,pageNumber:r&&r.pageNumber};return csJSON.stringify(e)},t.prototype.q=function(t,n){if(Ct[t]<this.D)return!1;if(0===(null==n?void 0:csString.prototype.indexOf.call(n,_t,0)))return this.V(n,kt.IMPLEMENTATION);if(0===(null==n?void 0:csString.prototype.indexOf.call(n,It,0)))return this.V(n,kt.DYNAMIC);var i=this.U[t];return!(i.length>=5)&&(!n||!csArray.prototype.some.call(i,(function(t){return t===n})))},t.prototype.V=function(t,n){return t in this.j[n]?!(this.j[n][t]>=5)&&(this.j[n][t]+=1,!0):(this.j[n][t]=1,!0)},t}(),Lt=document.createElement("a"),Pt=/(:443|:80)$/;function Mt(t){return Lt.href=t,Lt.href}function Dt(t){var n=qt(t);return null===n?"":decodeURIComponent(n.hostname)}function Ut(t,n){return csArray.prototype.some.call(n,(function(n){return K(t,".".concat(n))||t===n||""===n}))}function jt(t){return csString.prototype.replace.call(t,Pt,"")}function qt(t){return X(t,"http://")||X(t,"https://")?(Lt.href=t,{hash:Lt.hash,host:jt(Lt.host),hostname:Lt.hostname,href:Lt.href,origin:Lt.origin?Lt.origin:jt("".concat(Lt.protocol,"//").concat(Lt.host)),pathname:(n=Lt.pathname,"/"===n[0]?n:"/".concat(n)),port:Lt.port,protocol:Lt.protocol,search:Lt.search}):null;var n}var Ht,zt,Bt,Ft,Vt="CS_IFRAME_MESSAGE";!function(t){t.AfterPageView="afterPageView",t.GetSessionKey="getSessionKey"}(Ht||(Ht={})),function(t){t.Parent="parent",t.Child="child"}(zt||(zt={})),function(t){t.Discovery="discovery",t.Stop="stop",t.RecordingStatus="recordingStatus",t.RecordingEvent="recordingEvent",t.EndOfBufferedMessages="endOfBufferedMessages",t.ChildLogMessage="childLogMessage",t.AnalysisEvent="analysisEvent",t.JavascriptError="javascriptError",t.ApiError="apiError",t.Assets="assets",t.DetailedApiError="detailedApiError",t.EmerchandisingMessage="emerchandisingMessage",t.Commands="commands",t.IntegrationCallback="integrationCallback",t.TrackingContextResultMessage="trackingContextResultMessage",t.TrackingContextRequestMessage="trackingContextRequestMessage"}(Bt||(Bt={})),function(t){t.buildBaseMessage=function(t,n,i,r){var e={type:t,from:n,pid:i,signature:Vt};return void 0!==r&&r>=0&&(e.id=r),e},t.isMessageValid=function(t,n,i,r){var e=Dt(t.origin);return!!t.data&&!!t.data.type&&t.data.signature===Vt&&t.data.from===n&&t.data.pid===i&&Ut(e,r)},t.sendPostMessage=function(t,n,i,r){r?t.postMessage(i,n,r):t.postMessage(i,n)},t.getNewChannelMessage=function(){return new MessageChannel},t.sendChannelMessage=function(t,n){t.postMessage(n)},t.closeChannelPort=function(t){t.close()}}(Ft||(Ft={}));var Gt=function(){function t(t){this.L=t}return t.prototype.send=function(t,n,i){void 0===n&&(n=""),void 0===i&&(i=tt.warn);var r={message:t,errorCode:n,level:i},e=Ft.buildBaseMessage(Bt.ChildLogMessage,zt.Child,this.L.projectId);e.content=r,Ft.sendPostMessage(window.parent,"*",e)},t}(),Jt=function(){function t(){}return t.prototype.setContext=function(t,n){this.G=t,this.J=n},t.prototype.getVisitorService=function(){return this.G},t.prototype.getSessionService=function(){return this.J},t}(),Yt=["t.contentsquare.net","clicktale"];window.addEventListener("error",(function(t){"string"==typeof t.filename&&csArray.prototype.some.call(Yt,(function(n){return csString.prototype.indexOf.call(t.filename,n)>-1}))&&Wt.error("Uncaught jsError: filename: ".concat(t.filename," - lineno: ").concat(t.lineno," - colno: ").concat(t.colno," - message: ").concat(t.message," "))}));var Wt=function(){function t(){}return t.whiteListFilename=function(t){csArray.prototype.push.call(Yt,t)},t.setStrategy=function(n){t.Y=n},t.computeIsActive=function(n){t.W=Q.boolean(n),t.W?t.X=Q.boolean(10):t.X=!1},t.isLoggingActive=function(){return t.W},t.getStrategy=function(){return t.Y},t.debug=function(n,i){void 0===i&&(i=""),t.W&&this.Y.send(n,i,tt.debug)},t.warn=function(n,i){void 0===i&&(i=""),t.W&&this.Y.send(n,i,tt.warn)},t.error=function(n,i){void 0===i&&(i=""),t.W&&this.Y.send(n,i,tt.error)},t.critical=function(n,i){void 0===i&&(i=""),t.W&&this.Y.send(n,i,tt.critical)},t.tryToExecute=function(t,n){var i=this;return function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];try{var s=n.apply(void 0,r);return bt(window.Promise)&&s instanceof window.Promise?s.then((function(t){return t}),(function(n){return i.error(n,t)})):s}catch(n){try{i.error(n,t)}catch(t){}}}},t.isPerfLoggingActive=function(){return t.X},t.W=!1,t.X=!1,t}(),Xt={debug:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n]},warn:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n]},error:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n]},critical:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n]}};var Kt,$t,Qt,Zt,tn=function(t){return function(n,i,r){var e=(null==i?void 0:i.toString())||"",s=t||"".concat(n.constructor&&n.constructor.name,".").concat(e);if(r){var o=r.value;r.value=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return function(t,n){return function(){for(var i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];try{var e=n.apply(void 0,i);return bt(window.Promise)&&e instanceof window.Promise?e.then((function(t){return t}),(function(n){return Xt.error(n,t)})):e}catch(n){try{Xt.error(n,t)}catch(t){}}}}(s,o.bind(this)).apply(void 0,t)}}}};!function(t){function n(t){var n=new RegExp("(^|;)[ ]*".concat(t,"=([^;]*)")).exec(document.cookie);return n?decodeURIComponent(n[2]):null}function i(n,i,e,s,o,u){var h=encodeURIComponent("".concat(i)),c=e===t.CURRENT_DOMAIN?void 0:e,a=r(s),f=a?";expires=".concat(a.toUTCString()):"",v=Rt(c)?";domain=".concat(c):"",l="".concat(n,"=").concat(h).concat(f).concat(";path=/").concat(v);return bt(o)&&o!==Qt.NotSet&&(l="".concat(l,";SameSite=").concat(o)),bt(u)&&u===Zt.Yes&&(l="".concat(l,";Secure")),document.cookie=l,!0}function r(t){return gt(t)?new csDate(pt()+t):t}function e(t,r){n(t)&&i(t,"",r,new csDate(0)),n(t)&&i(t,"",r,new csDate(0),Qt.None,Zt.Yes)}t.CURRENT_DOMAIN="CURRENT_DOMAIN",t.get=n,t.set=i,t.toExpireDate=r,t.remove=e,t.isCookiePresent=function(){return document.cookie.length>0},t.getRootDomain=function(t,r){var s="_cs_root-domain",o=n(s);if(null!==o&&"1"!==o)return o;for(var u=csString.prototype.split.call(window.location.hostname,"."),h=csArray.prototype.pop.call(u);u.length&&(null===o||"1"===o);)i(s,h=csArray.prototype.join.call([csArray.prototype.pop.call(u),h],"."),h,void 0,t,r),o=n(s);return e(s,h),h}}(Kt||(Kt={})),function(t){t.browserIsSafariV12=function(){return window.navigator.vendor&&csString.prototype.indexOf.call(window.navigator.vendor,"Apple")>-1&&window.navigator.appVersion&&csString.prototype.indexOf.call(window.navigator.appVersion,"Version/12.")>-1}}($t||($t={})),function(t){t.None="None",t.Lax="Lax",t.NotSet="X"}(Qt||(Qt={})),function(t){t[t.Yes=1]="Yes",t[t.No=0]="No"}(Zt||(Zt={}));var nn=function(){function t(t,n,i){this.L=t,this.K=n,this.$=i,this.Z=!1,this.tt=Qt.NotSet,this.nt=Zt.No}return t.prototype.getSameSiteFlag=function(){return this.tt},t.prototype.getSecureFlag=function(){return this.nt},t.prototype.getDomain=function(){return this.it},t.prototype.getRootDomain=function(){return this.et},t.prototype.init=function(){if(!this.L.cookielessTrackingEnabled){var t=this.st(),n=this.ot();this.Z=this.ut(t,n),this.Z?(this.tt=t,this.nt=n):this.L.secureCookiesEnabled&&"https:"===this.K.getUrlProtocol()&&(this.nt=Zt.Yes),this.et=this.ht(),this.it=this.at(this.et)}},t.prototype.ut=function(n,i){return!$t.browserIsSafariV12()&&(Kt.set(t.COOKIE_TEST_FOR_SAME_SITE,"Test same site",t.CURRENT_DOMAIN,void 0,n,i),!!Kt.get(t.COOKIE_TEST_FOR_SAME_SITE)&&(Kt.remove(t.COOKIE_TEST_FOR_SAME_SITE,t.CURRENT_DOMAIN),!0))},t.prototype.st=function(){return"http:"===this.K.getUrlProtocol()?Qt.Lax:this.$.isSameSiteNoneSecureNeeded()||this.L.crossDomainTracking?Qt.None:Qt.Lax},t.prototype.ot=function(){return"http:"===this.K.getUrlProtocol()?Zt.No:this.L.secureCookiesEnabled||this.L.crossDomainTracking||this.$.isSameSiteNoneSecureNeeded()?Zt.Yes:Zt.No},t.prototype.isSameSiteSupported=function(){return this.Z},t.prototype.set=function(t,n,i){var r=Kt.toExpireDate(i);Kt.set(t,n,this.it,r,this.getSameSiteFlag(),this.getSecureFlag())},t.prototype.get=function(t){var n=new RegExp("(^|;)[ ]*".concat(t,"=([^;]*)")).exec(document.cookie);return n?decodeURIComponent(n[2]):null},t.prototype.delete=function(t,n){var i=n||this.it;Kt.remove(t,i)},t.prototype.ht=function(){var t=this.$.isSameSiteNoneSecureNeeded()&&this.isSameSiteSupported(),n=t?Qt.None:void 0,i=t?Zt.Yes:void 0;return Kt.getRootDomain(n,i)},t.prototype.at=function(t){return this.L.allowSubdomains?t:Kt.CURRENT_DOMAIN},t.CURRENT_DOMAIN="CURRENT_DOMAIN",t.COOKIE_TEST_FOR_SAME_SITE="_cs_same_site",t}(),rn="_cs_t",en=function(){function t(t,n){this.ft=t,this.L=n,this.vt=!1,this.lt=!1}return t.prototype.init=function(){if(!this.L.cookielessTrackingEnabled&&this.ft.isTopWindowTracker()&&"cookie"in document){if(!this.ft.isInIframeContext()&&Kt.isCookiePresent())return this.vt=!0,void(this.lt=!1);if(Kt.set(rn,"1",Kt.CURRENT_DOMAIN),null!==Kt.get(rn))return this.vt=!0,this.lt=!1,void Kt.remove(rn,Kt.CURRENT_DOMAIN);Kt.set(rn,"1",Kt.CURRENT_DOMAIN,void 0,Qt.None,Zt.Yes),null!==Kt.get(rn)&&(this.vt=!0,this.lt=!0,Kt.remove(rn,Kt.CURRENT_DOMAIN))}},t.prototype.areCookiesEnabled=function(){return this.vt},t.prototype.isSameSiteNoneSecureNeeded=function(){return this.lt},t}(),sn=function(){function t(){}return t.check=function(){return void 0===Object.assign||this.wt()},t.wt=function(){try{var t={},n=Object.assign(t,{a:1},{b:2,c:{d:4}}),i={a:1,b:2,c:{d:4}};return csJSON.stringify(n)===csJSON.stringify(i)&&csJSON.stringify(t)===csJSON.stringify(i)}catch(t){return!1}},t}();var on,un=function(){function t(t,n){this.L=t,this.$=n}return t.prototype.canTrack=function(){return this.L.isProjectActive()&&this.yt()&&this.gt()&&this.St()},t.prototype.canTrackInChild=function(){return this.L.isProjectActive()&&this.yt()&&(this.gt()||this.Et())},t.prototype.St=function(){return this.L.cookielessTrackingEnabled?function(){var t="CSSessionStorageTest";try{return sessionStorage.setItem(t,t),sessionStorage.getItem(t)===t&&(sessionStorage.removeItem(t),!0)}catch(t){return!1}}():this.$.areCookiesEnabled()},t.prototype.gt=function(){return Ut(window.location.hostname,this.L.hostnames)},t.prototype.yt=function(){return!this.At()&&this.bt()&&sn.check()},t.prototype.Et=function(){return X(window.location.href,"about:srcdoc")&&"about:"===window.location.protocol&&""===window.location.hostname},t.prototype.At=function(){return"visibilityState"in document&&"prerender"===document.visibilityState},t.prototype.bt=function(){return"pageXOffset"in window&&"pageYOffset"in window&&"onpagehide"in window&&"JSON"in window&&"parse"in window.csJSON&&"stringify"in window.csJSON&&"addEventListener"in window&&"removeEventListener"in window&&"Node"in window&&"filter"in csArray.prototype&&"forEach"in csArray.prototype&&"querySelectorAll"in document&&"now"in csDate&&"keys"in Object&&"performance"in window&&"Map"in window&&"Set"in window&&!!window.localStorage},t}(),hn=function(){function t(t){var n=this;this.Rt=!1,this.Nt=new Map,this.Tt=new Map,this.Ot=new Map,this.kt="CS_WORKER_SIGNATURE";var i="\n    const algorithm = ".concat(t.algorithm,";\n    const compressor = (").concat(t.getCompressorSourceCode(),")();\n    ").concat('!function(){"use strict";var e,t=function(){return t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},t.apply(this,arguments)};function r(e,t,r,n){return new(r||(r=Promise))((function(o,s){function a(e){try{c(n.next(e))}catch(e){s(e)}}function i(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,i)}c((n=n.apply(e,t||[])).next())}))}function n(e,t){var r,n,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(s){return function(i){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,i])}}}Object.create,Object.create,function(e){e.UNCOMPRESSED="0",e.GZIP="2"}(e||(e={}));var o,s=function(){function r(e){var t=this;this.queryParams={},this.headers={},this.handleRecoveredRequests=function(e){for(var r=0,n=e;r<n.length;r++){var o=n[r],s=o.metadata,a=o.events;t.send(a,s)}},this.endpoint=e.endpoint,this.compressionOpts=e.compressionOpts,this.recoveryStorage=e.recoveryStorage,this.recoveryStorage&&this.recoveryStorage.recover(this.handleRecoveredRequests)}return r.prototype.setQueryParams=function(e){var t=this;Object.keys(e).forEach((function(r){t.queryParams[r]=e[r]}))},r.prototype.removeQueryParams=function(e){var t=this;e?e.forEach((function(e){delete t.queryParams[e]})):this.queryParams={}},r.prototype.send=function(r,n){var o=this,s=n||t({},this.queryParams),a=!("ct"in s),i="string"!=typeof r&&!this.isArrayBuffer(r);"ct"in s||(this.compressionOpts&&a?s.ct=this.compressionOpts.compressionType:s.ct=e.UNCOMPRESSED);var c=i?JSON.stringify(r):r,u=Object.keys(s).map((function(e){return"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(s[e]))})).join("&"),h="".concat(this.endpoint,"?").concat(u);this.compressionOpts&&a&&"string"==typeof c?this.compressionOpts.compressor(c,this.compressionOpts.compressionOutputType,(function(e){return o.doSend(h,s,e)})):this.doSend(h,s,c)},r.prototype.onLoad=function(e){this.onLoadCallback=e},r.prototype.onError=function(e){this.onErrorCallback=e},r.prototype.onTimeout=function(e,t){this.onTimeoutCallback=e,this.timeout=t},r.prototype.abort=function(){this.abortCurrentXhrCall&&this.abortCurrentXhrCall()},r.prototype.setRequestHeader=function(e,t){this.headers[e]=t},r.prototype.getQueryParams=function(){return this.queryParams},r.prototype.isArrayBuffer=function(e){return e&&void 0!==e.byteLength},r.prototype.doSend=function(e,t,r){var n=this,o=new XMLHttpRequest,s=Object.keys(t).map((function(e){return"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(t[e]))})).join("&");o.open("POST",e),o.onload=function(){if(n.recoveryStorage&&n.recoveryStorage.recover(n.handleRecoveredRequests),n.onLoadCallback){var e={params:t,responseText:o.responseText,status:o.status};n.onLoadCallback(e)}},o.onerror=function(){n.recoveryStorage&&n.recoveryStorage.save({key:s,metadata:t,events:r}),n.onErrorCallback&&n.onErrorCallback({params:t})},this.timeout&&this.onTimeoutCallback&&(o.timeout=this.timeout,o.ontimeout=function(){n.onTimeoutCallback()}),this.abortCurrentXhrCall=function(){return o.abort()},Object.keys(this.headers).forEach((function(e){o.setRequestHeader(e,n.headers[e])})),o.send(r)},r}(),a=function(){function e(e){this.maxStoredBytes=e,this.storageBytesUsed=0}return e.prototype.addString=function(e){this.storageBytesUsed+=2*e.length},e.prototype.addArrayBuffer=function(e){this.storageBytesUsed+=e.byteLength},e.prototype.isThresholdReached=function(){return this.storageBytesUsed>this.maxStoredBytes},e.prototype.reset=function(){this.storageBytesUsed=0},e}(),i=function(){function e(e){this.ramStorage={},this.byteSizeCounter=new a(e)}return e.prototype.save=function(e){var t=e.key,r=e.metadata,n=e.events;this.byteSizeCounter.isThresholdReached()||(this.byteSizeCounter.addString(t),"string"==typeof n?this.byteSizeCounter.addString(n):this.byteSizeCounter.addArrayBuffer(n),this.byteSizeCounter.isThresholdReached()||(this.ramStorage[t]={metadata:r,events:n}))},e.prototype.recover=function(e){var t=this,r=[];this.getStorageKeys().forEach((function(e){var n=t.ramStorage[e];void 0!==n&&(delete n.metadata.datatype,r.push(n),t.removeItem(e))})),0!==r.length&&(e(r),this.byteSizeCounter.reset())},e.prototype.getStorageKeys=function(){return Object.keys(this.ramStorage)},e.prototype.removeItem=function(e){delete this.ramStorage[e]},e}();!function(e){e[e.NOT_STARTED=0]="NOT_STARTED",e[e.OPEN_IN_PROGRESS=1]="OPEN_IN_PROGRESS",e[e.OPEN_FAILED=2]="OPEN_FAILED",e[e.READY=3]="READY"}(o||(o={}));var c=function(){function e(e,t,r){this.storageName=e,this.onOpenError=r,this.cacheState=o.NOT_STARTED,this.toBeSavedBuffer=[],this.recoveryInProgress=0,this.origin=self.origin,this.context="object"==typeof window?"":"worker-",this.byteSizeCounter=new a(t),this.init()}return e.prototype.init=function(){return r(this,void 0,void 0,(function(){return n(this,(function(e){switch(e.label){case 0:return[4,this.openCache()];case 1:return e.sent(),this.cacheState===o.READY?this.flushToBeSavedBuffer():this.onOpenError(this.toBeSavedBuffer),[2]}}))}))},e.prototype.flushToBeSavedBuffer=function(){var e=this;this.toBeSavedBuffer.forEach((function(t){e.save(t)})),this.toBeSavedBuffer=[]},e.prototype.save=function(e){return r(this,void 0,void 0,(function(){var t,r,s;return n(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),this.cacheState===o.OPEN_IN_PROGRESS?(this.toBeSavedBuffer.push(e),[2]):this.cacheState!==o.READY||this.byteSizeCounter.isThresholdReached()?[2]:(t=e.key,r=e.metadata,s=e.events,this.byteSizeCounter.addString(t),"string"==typeof s?this.byteSizeCounter.addString(s):this.byteSizeCounter.addArrayBuffer(s),this.byteSizeCounter.isThresholdReached()?[2]:[4,this.cache.put("".concat(this.origin,"/").concat(t),new Response(s,{headers:r}))]);case 1:case 2:return n.sent(),[3,3];case 3:return[2]}}))}))},e.prototype.recover=function(e){return r(this,void 0,void 0,(function(){return n(this,(function(t){switch(t.label){case 0:return this.cache?[3,2]:[4,this.openCache()];case 1:if(t.sent(),this.cacheState!==o.READY)return[2];t.label=2;case 2:return this.doRecover(e),[2]}}))}))},e.prototype.openCache=function(){return r(this,void 0,void 0,(function(){var e;return n(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),this.cacheState=o.OPEN_IN_PROGRESS,e=this,[4,self.caches.open("".concat(this.context).concat(this.storageName))];case 1:return e.cache=t.sent(),this.cacheState=o.READY,[3,3];case 2:return t.sent(),this.cacheState=o.OPEN_FAILED,[3,3];case 3:return[2]}}))}))},e.prototype.doRecover=function(e){return r(this,void 0,void 0,(function(){var t,r,o,s,a=this;return n(this,(function(n){switch(n.label){case 0:return n.trys.push([0,5,6,7]),this.recoveryInProgress++,this.recoveryInProgress>1?[2]:[4,this.cache.keys()];case 1:return 0===(t=n.sent()).length?[2]:[4,this.cache.matchAll()];case 2:return r=n.sent(),o=r.map((function(e){var t={};e.headers.forEach((function(e,r){t[r]=e})),delete t["content-type"];var r=t.datatype;return delete t.datatype,"json"===r||"base64"===r?e.text().then((function(e){return{metadata:t,events:e}})):e.arrayBuffer().then((function(e){return{metadata:t,events:e}}))})),[4,Promise.all(o)];case 3:return s=n.sent(),[4,Promise.all(t.map((function(e){return a.cache.delete(e)})))];case 4:return n.sent(),e(s),this.byteSizeCounter.reset(),[3,7];case 5:return n.sent(),[3,7];case 6:return this.recoveryInProgress--,[7];case 7:return[2]}}))}))},e}(),u=function(){function e(e){self.caches?this.setCachesStrategy(e):this.setRamStorageStrategy()}return e.prototype.save=function(e){this.storageStrategy.save(e)},e.prototype.recover=function(e){this.storageStrategy.recover(e)},e.prototype.setCachesStrategy=function(t){var r=this;this.storageStrategy=new c(t,e.MAX_SIZE,(function(e){r.setRamStorageStrategy(e)}))},e.prototype.setRamStorageStrategy=function(t){var r=this;this.storageStrategy=new i(e.MAX_SIZE),t&&t.forEach((function(e){r.storageStrategy.save(e)}))},e.MAX_SIZE=16777216,e}();!function(){var e="CS_WORKER_SIGNATURE",t=new Map,o=new u("csPersisted");function a(r){var n;if((n=r)&&n.WORKER_SIGNATURE===e)switch(r.type){case"CreatePostRequest":var a=r.endpoint,i=r.compressionOutputType,c=r.useRetry,u={endpoint:a};i&&(u.compressionOpts={compressor:compressor,compressionOutputType:i,compressionType:algorithm}),c&&(u.recoveryStorage=o);var h=new s(u);t.set(a,h),h.onLoad((function(t){var r={type:"onLoad",endpoint:a,response:t,WORKER_SIGNATURE:e};self.postMessage(r)})),h.onError((function(t){var r={type:"onError",endpoint:a,response:t,WORKER_SIGNATURE:e};self.postMessage(r)}));break;case"SetQueryParams":var p=r.endpoint,f=r.queryParams;(h=t.get(p))&&h.setQueryParams(f);break;case"RemoveQueryParams":p=r.endpoint,f=r.queryParams,(h=t.get(p))&&h.removeQueryParams(f);break;case"Send":p=r.endpoint;var y=r.payload;f=r.queryParams,(h=t.get(p))&&h.send(y,f);break;case"Abort":p=r.endpoint,(h=t.get(p))&&h.abort();break;case"SetHeader":p=r.endpoint;var d=r.headerName,l=r.headerValue;(h=t.get(p))&&h.setRequestHeader(d,l);break;case"SetTimeout":var v=r.endpoint,S=r.timeout;(h=t.get(v))&&h.onTimeout((function(){var t={type:"onTimeout",endpoint:v,WORKER_SIGNATURE:e};self.postMessage(t)}),S);break;default:throw new Error(JSON.stringify(r))}}self.addEventListener("message",(function(e){e.data.getReader?function(e,t){r(this,void 0,void 0,(function(){var r,o,s,a;return n(this,(function(n){switch(n.label){case 0:r=e.getReader(),n.label=1;case 1:return[4,r.read()];case 2:return o=n.sent(),s=o.done,a=o.value,s?[3,3]:(t(a),[3,1]);case 3:return[2]}}))}))}(e.data,a):a(e.data)}))}()}();');try{this.Ct=this.It(i),this.Rt=!0,this._t()&&(this.xt=new ReadableStream({start:function(t){n.Lt=t}}),this.Ct.postMessage(this.xt,[this.xt]),this.postMessage=this.postMessageAsTransferable)}catch(t){this.Rt=!1}}return t.prototype.postMessage=function(t){t.WORKER_SIGNATURE=this.kt,this.Ct.postMessage(t)},t.prototype.postMessageAsTransferable=function(t){t.WORKER_SIGNATURE=this.kt,this.Lt.enqueue(t)},t.prototype.It=function(t){var n=this,i=window.csURL||window.webkitURL,r=window.Blob,e=window.Worker,s=new r([t],{type:"application/javascript"}),o=i.createObjectURL(s);Wt.whiteListFilename(o);var u=new e(o);return u.onmessage=function(t){var i=t.data,r=i.type,e=i.endpoint;if(i.WORKER_SIGNATURE===n.kt)if("onLoad"===r){var s=t.data.response;(o=n.Nt.get(e))&&o(s)}else if("onError"===r){s=t.data.response;(o=n.Tt.get(e))&&o(s)}else if("onTimeout"===r){var o;(o=n.Ot.get(e))&&o()}},u},t.prototype.registerOnLoadCallback=function(t,n){this.Nt.set(t,n)},t.prototype.registerOnErrorCallback=function(t,n){this.Tt.set(t,n)},t.prototype.registerOnTimeoutCallback=function(t,n){this.Ot.set(t,n)},t.prototype.isSupported=function(){return this.Rt},t.prototype._t=function(){try{var t=new ReadableStream;return structuredClone(t,{transfer:[t]}),!0}catch(t){return!1}},t}(),cn=function(){function t(t){this.Pt={},this.Mt=t.endpoint,this.Dt=t.networkWorker,this.Ut=t.compressionOutputType,this.jt=t.useRetry,this.Dt.postMessage({type:"CreatePostRequest",endpoint:this.Mt,compressionOutputType:this.Ut,useRetry:this.jt})}return t.prototype.setQueryParams=function(t){var n=this;this.Dt.postMessage({type:"SetQueryParams",endpoint:this.Mt,queryParams:t}),csArray.prototype.forEach.call(Object.keys(t),(function(i){n.Pt[i]=t[i]}))},t.prototype.getQueryParams=function(){return this.Pt},t.prototype.removeQueryParams=function(t){var n=this;this.Dt.postMessage({type:"RemoveQueryParams",endpoint:this.Mt,queryParams:t}),t&&csArray.prototype.forEach.call(t,(function(t){delete n.Pt[t]}))},t.prototype.send=function(t,n){this.Dt.postMessage({type:"Send",endpoint:this.Mt,payload:t,queryParams:n})},t.prototype.abort=function(){this.Dt.postMessage({type:"Abort",endpoint:this.Mt})},t.prototype.onLoad=function(t){this.Dt.registerOnLoadCallback(this.Mt,t)},t.prototype.onError=function(t){this.Dt.registerOnErrorCallback(this.Mt,t)},t.prototype.setRequestHeader=function(t,n){this.Dt.postMessage({type:"SetHeader",endpoint:this.Mt,headerName:t,headerValue:n})},t.prototype.onTimeout=function(t,n){this.Dt.registerOnTimeoutCallback(this.Mt,t),this.Dt.postMessage({type:"SetTimeout",endpoint:this.Mt,timeout:n})},t}();!function(t){t.UNCOMPRESSED="0",t.GZIP="2"}(on||(on={}));var an,fn,vn,ln=function(t){this.onError=t},dn=function(){function t(t){var n=this;this.Pt={},this.qt={},this.Ht=function(t){for(var i=0,r=t;i<r.length;i++){var e=r[i],s=e.metadata,o=e.events;n.send(o,s)}},this.Mt=t.endpoint,this.zt=t.compressionOpts,this.Bt=t.recoveryStorage,this.Bt&&this.Bt.recover(this.Ht)}return t.prototype.setQueryParams=function(t){var n=this;Object.keys(t).forEach((function(i){n.Pt[i]=t[i]}))},t.prototype.removeQueryParams=function(t){var n=this;t?t.forEach((function(t){delete n.Pt[t]})):this.Pt={}},t.prototype.send=function(t,n){var i=this,r=n||B({},this.Pt),e=!("ct"in r),s="string"!=typeof t&&!this.Ft(t);"ct"in r||(this.zt&&e?r.ct=this.zt.compressionType:r.ct=on.UNCOMPRESSED);var o=s?JSON.stringify(t):t,u=Object.keys(r).map((function(t){return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(r[t]))})).join("&"),h="".concat(this.Mt,"?").concat(u);this.zt&&e&&"string"==typeof o?this.zt.compressor(o,this.zt.compressionOutputType,(function(t){return i.Vt(h,r,t)})):this.Vt(h,r,o)},t.prototype.onLoad=function(t){this.Gt=t},t.prototype.onError=function(t){this.Jt=t},t.prototype.onTimeout=function(t,n){this.Yt=t,this.Wt=n},t.prototype.abort=function(){this.Xt&&this.Xt()},t.prototype.setRequestHeader=function(t,n){this.qt[t]=n},t.prototype.getQueryParams=function(){return this.Pt},t.prototype.Ft=function(t){return t&&void 0!==t.byteLength},t.prototype.Vt=function(t,n,i){var r=this,e=new XMLHttpRequest,s=Object.keys(n).map((function(t){return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(n[t]))})).join("&");e.open("POST",t),e.onload=function(){if(r.Bt&&r.Bt.recover(r.Ht),r.Gt){var t={params:n,responseText:e.responseText,status:e.status};r.Gt(t)}},e.onerror=function(){r.Bt&&r.Bt.save({key:s,metadata:n,events:i}),r.Jt&&r.Jt({params:n})},this.Wt&&this.Yt&&(e.timeout=this.Wt,e.ontimeout=function(){r.Yt()}),this.Xt=function(){return e.abort()},Object.keys(this.qt).forEach((function(t){e.setRequestHeader(t,r.qt[t])})),e.send(i)},t}(),wn=function(){function t(t){this.Kt=t,this.Dt=new hn(this.Kt)}return t.prototype.create=function(t,n,i,r){if(this.Dt.isSupported()&&n)return new cn({networkWorker:this.Dt,endpoint:t,compressionOutputType:i,useRetry:!!r});var e=i?{compressor:this.Kt.compress,compressionOutputType:i,compressionType:this.Kt.algorithm}:void 0;return new dn({endpoint:t,compressionOpts:e,recoveryStorage:r})},t}(),pn=function(){function t(t,n,i,r,e){this.G=t,this.J=n,this.$t=i,this.Qt=r,this.L=e}return t.prototype.get=function(){return{exclusion:this.$t.getAppliedTrackingDraw(),visitor:this.G.getVisitor(),session:this.J.getSession(),cvars:this.Qt.getCustomVariablesSession()}},t.prototype.apply=function(t){t&&(t.exclusion?this.exclude():this.include(t))},t.prototype.exclude=function(){this.$t.exclude(this.L),this.G.removeVisitor(),this.J.removeSession(),this.Qt.removeCustomVariablesSession()},t.prototype.include=function(t){this.$t.removeExclusion(),this.G.setVisitor(t.visitor),t.session?this.J.setSession(t.session):this.J.removeSession(),t.cvars?this.Qt.setCustomVariableSession(t.cvars):this.Qt.removeCustomVariablesSession()},t}();!function(t){t[t.MUTATION_INSERT=1]="MUTATION_INSERT",t[t.MUTATION_REMOVE=2]="MUTATION_REMOVE",t[t.MUTATION_ATTRIBUTE=3]="MUTATION_ATTRIBUTE",t[t.MUTATION_CHARACTER_DATA=4]="MUTATION_CHARACTER_DATA",t[t.INITIAL_DOM=5]="INITIAL_DOM",t[t.SCROLL=6]="SCROLL",t[t.CLICK=8]="CLICK",t[t.RESIZE=9]="RESIZE",t[t.INPUT_CHECKABLE=10]="INPUT_CHECKABLE",t[t.INPUT_SELECT=11]="INPUT_SELECT",t[t.INPUT_TEXT=12]="INPUT_TEXT",t[t.HASH_CHANGE=13]="HASH_CHANGE",t[t.CONSENT_GRANTED=14]="CONSENT_GRANTED",t[t.CONSENT_WITHDRAWN=15]="CONSENT_WITHDRAWN",t[t.MOUSE_OVER=16]="MOUSE_OVER",t[t.VISIBILITY_CHANGE=17]="VISIBILITY_CHANGE",t[t.STYLESHEET_RULE_INSERT=18]="STYLESHEET_RULE_INSERT",t[t.STATIC_RESOURCE_URL=19]="STATIC_RESOURCE_URL",t[t.PERFORMANCE_TIMINGS=20]="PERFORMANCE_TIMINGS",t[t.ATTACH_SHADOW=22]="ATTACH_SHADOW",t[t.STYLESHEET_CSS_TEXT_UPDATE=23]="STYLESHEET_CSS_TEXT_UPDATE",t[t.JAVASCRIPT_ERROR=26]="JAVASCRIPT_ERROR",t[t.PAGE_EVENT=27]="PAGE_EVENT",t[t.API_ERROR=28]="API_ERROR",t[t.TEXT_VISIBILITY=29]="TEXT_VISIBILITY",t[t.MUTATION_ENCRYPTED_CHARACTER_DATA=30]="MUTATION_ENCRYPTED_CHARACTER_DATA",t[t.INPUT_ENCRYPTED_TEXT=31]="INPUT_ENCRYPTED_TEXT",t[t.KEY_DOWN=32]="KEY_DOWN",t[t.KEY_UP=33]="KEY_UP",t[t.CLIPBOARD_COMMAND=34]="CLIPBOARD_COMMAND",t[t.STYLESHEET_RULE_DELETE=37]="STYLESHEET_RULE_DELETE",t[t.USER_IDENTIFIER=38]="USER_IDENTIFIER",t[t.TOUCH_START=41]="TOUCH_START",t[t.TOUCH_MOVE=42]="TOUCH_MOVE",t[t.TOUCH_END=43]="TOUCH_END",t[t.GESTURE_RECOGNITION=44]="GESTURE_RECOGNITION",t[t.POINTER_DOWN=47]="POINTER_DOWN",t[t.POINTER_MOVE=48]="POINTER_MOVE",t[t.POINTER_UP=49]="POINTER_UP",t[t.CUSTOM_ERROR=50]="CUSTOM_ERROR",t[t.CUSTOM_ELEMENT_REGISTRATION=54]="CUSTOM_ELEMENT_REGISTRATION",t[t.REGISTER_ADOPTED_STYLE_SHEET=60]="REGISTER_ADOPTED_STYLE_SHEET",t[t.SET_ADOPTED_STYLE_SHEETS=61]="SET_ADOPTED_STYLE_SHEETS",t[t.ADOPTED_STYLESHEET_RULE_INSERT=62]="ADOPTED_STYLESHEET_RULE_INSERT",t[t.ADOPTED_STYLESHEET_RULE_DELETE=63]="ADOPTED_STYLESHEET_RULE_DELETE",t[t.SCREEN_RESIZE=65]="SCREEN_RESIZE"}(an||(an={})),function(t){t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right",t[t.Fourth=3]="Fourth",t[t.Fifth=4]="Fifth"}(fn||(fn={})),function(t){t[t.SWIPE=0]="SWIPE",t[t.PINCH_IN=1]="PINCH_IN",t[t.PINCH_OUT=2]="PINCH_OUT",t[t.LONG_PRESS=3]="LONG_PRESS",t[t.TAP=4]="TAP",t[t.DOUBLE_TAP=5]="DOUBLE_TAP"}(vn||(vn={}));function yn(t,n){void 0===n&&(n=true),t.boundElement.addEventListener(t.type,t.listener,n)}function mn(t,n){void 0===n&&(n=true),t.boundElement.removeEventListener(t.type,t.listener,n)}function gn(t,n){void 0===n&&(n=0);var i=Math.pow(10,n);return Math.round(t*i)/i}function Sn(t,n){"number"==typeof n&&(n={wait:n});var i,r=n.wait;if(n.ignoreThrottledCalls){var e=0;return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var s=pt();if(s-e>r)return e=s,t.apply(this,n)}}var s,o=[],u=null,h=0,c=function(){h=pt(),u=null,s=t.apply(i,o)},a=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var a=pt(),f=r-(a-h);return i=null!=this?this:window,o=J([],n,!0),f<=0||f>r?(h=a,s=t.apply(i,o),u?(window.clearTimeout(u),u=null):o=[]):u||(u=window.setTimeout(c,f)),s};return a.cancel=function(){u&&(window.clearTimeout(u),h=0,u=null,o=[])},a.flushPending=function(){u&&(window.clearTimeout(u),c())},a}var En,An;!function(t){t[t.SPACE=0]="SPACE",t[t.ENTER=1]="ENTER",t[t.BACKSPACE=2]="BACKSPACE",t[t.DELETE=3]="DELETE",t[t.ARROWUP=4]="ARROWUP",t[t.ARROWDOWN=5]="ARROWDOWN",t[t.ARROWLEFT=6]="ARROWLEFT",t[t.ARROWRIGHT=7]="ARROWRIGHT",t[t.CAPSLOCK=8]="CAPSLOCK",t[t.SHIFT=9]="SHIFT",t[t.TAB=10]="TAB",t[t.ALPHANUMERICAL=11]="ALPHANUMERICAL",t[t.ESCAPE=12]="ESCAPE",t[t.END=13]="END",t[t.ALT=14]="ALT",t[t.CTRL=15]="CTRL",t[t.META=16]="META"}(En||(En={})),function(t){t[t.COPY=0]="COPY",t[t.CUT=1]="CUT",t[t.PASTE=2]="PASTE"}(An||(An={}));var bn=function(){function t(){}return t.isEmpty=function(){return 0===t.Zt.length},t.add=function(n){var i;(i=csArray.prototype.push).call.apply(i,J([t.Zt],n,!1))},t.getAll=function(){return t.Zt},t.clear=function(){t.Zt=[]},t.Zt=[],t}(),Rn=50,Nn=.1;var Tn=!1;var On=[],kn=[];var Cn=function(t){return function(n,i,r){var e=r.value;r.value=function(){if(!Tn)return r.value=e,e.apply(this,arguments);!function(t){csArray.prototype.push.call(On,t),performance.mark("".concat(t,"-start"))}(t);var n=e.apply(this,arguments);return function(t){var n=performance.measure(t,"".concat(t,"-start"));if(n){var i=n.duration;i>=Nn&&csArray.prototype.push.call(kn,{mName:t,mDuration:+i.toFixed(2)}),csArray.prototype.pop.call(On),0===On.length&&(i>Rn&&bn.add(kn),kn=[])}}(t),n}}},In=function(t){return function(n,i,r){var e=r.value;r.value=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];if(!Tn)return r.value=e,e.apply(this,n);!function(t){performance.mark("".concat(t,"-start"))}(t);var s=e.apply(this,n);return s.then((function(){!function(t){var n=performance.measure(t,"".concat(t,"-start"));if(n){var i=n.duration;i>Rn&&bn.add([{mName:t,mDuration:+i.toFixed(2)}])}}(t)})),s}}};function _n(t){var n=csEventtarget.apply(t);return n&&f(n)&&csElementshadowRoot.apply(n)&&t.composedPath?t.__csOriginalTarget||t.composedPath()[0]:n}function xn(){return function(t,n,i){var r=i.value;i.value=function(t,n){!1===(null==t?void 0:t.isTrusted)&&xn.enabled||r.call(this,t,n)}}}xn.enabled=!0;var Ln,Pn=!!window.chrome,Mn="data-cs-scroll-container";!function(t){t.isEventOnScrollContainer=function(t){return!!(Rt(t)&&function(t){try{if(Rt(csEventtarget.apply(t)))return!0}catch(t){}return!1}(t)&&Tt(csEventtarget.apply(t))&&null!==csEventtarget.apply(t).getAttribute(Mn))},t.getScrollContainer=function(){return window.csquerySelector[document.nodeType].call(document,"[".concat(Mn,"]"))}}(Ln||(Ln={}));var Dn=function(){function t(n,i,r,e){var s=this;this.tn=n,this.nn=i,this.rn=r,this.en=e,this.un=new Set,this.hn=[],this.cn=[{type:"pointerup",listener:function(t){return s.pointerUpListener(t)},boundElement:document},{type:"pointermove",listener:function(t){return s.pointerMoveListener(t)},boundElement:document},{type:"pointerdown",listener:function(t){return s.pointerDownListener(t)},boundElement:document}],this.an=[{type:"touchstart",listener:function(t){return s.touchStartListener(t)},boundElement:document},{type:"touchmove",listener:function(t){return s.touchMoveListener(t)},boundElement:document},{type:"touchend",listener:function(t){return s.touchEndListener(t)},boundElement:document}],this.fn=[{type:"click",listener:function(t){return s.clickListener(t)},boundElement:document},{type:"keyup",listener:this.tn.on(t.vn,(function(t){return s.inputTextListener(t)})),boundElement:document},{type:"keyup",listener:this.tn.on(t.ln,(function(t){return s.inputTextListener(t)})),boundElement:document},{type:"keyup",listener:function(t){return s.keyUpListener(t)},boundElement:document},{type:"keydown",listener:function(t){return s.keyDownListener(t)},boundElement:document},{type:"copy",listener:function(t){return s.copyListener(t)},boundElement:document},{type:"cut",listener:function(t){return s.cutListener(t)},boundElement:document},{type:"paste",listener:function(t){return s.pasteListener(t)},boundElement:document},{type:"change",listener:this.tn.on(t.dn,(function(t){return s.inputCheckableListener(t)})),boundElement:document},{type:"change",listener:this.tn.on("select",(function(t){return s.inputSelectListener(t)})),boundElement:document},{type:"change",listener:this.tn.on(t.ln,(function(t){return s.inputTextListener(t)})),boundElement:document},{type:"scroll",listener:function(t){return s.scrollListener(csEventtarget.apply(t))},boundElement:document},{type:"mouseover",listener:function(t){return s.mouseOverListener(t)},boundElement:document}],this.wn=[{type:"change",listener:this.tn.on(t.dn,(function(t){return s.inputCheckableListener(t)}))},{type:"change",listener:this.tn.on("select",(function(t){return s.inputSelectListener(t)}))},{type:"change",listener:this.tn.on(t.ln,(function(t){return s.inputTextListener(t)}))},{type:"scroll",listener:function(t){return s.scrollListener(csEventtarget.apply(t))}}];var o=function(t){if(!Et(t))return null;var n=/iP(ad|hone|od).+Version\/(\d+)\..*Safari/i.exec(t);return n?Number(n[2]):null}(window.navigator.userAgent);(null===o||o&&o>=16)&&csArray.prototype.push.call(this.wn,{type:"mouseover",listener:function(t){return s.mouseOverListener(t)}})}var n;return t.prototype.init=function(){var t;this.yn(),this.mn(),this.gn(),this.Sn(),null===(t=this.en)||void 0===t||t.onInputNodeToEncrypt(this.En.bind(this))},t.prototype.Sn=function(){var t=this;this.nn.onDocumentIdentified((function(n){t.An(n)}))},t.prototype.onEvent=function(t){csArray.prototype.push.call(this.hn,t)},t.prototype.En=function(t,n){void 0===n&&(n=!1),csArray.prototype.forEach.call(this.hn,(function(i){return i(t,n)}))},t.prototype.start=function(){this.bn()},t.prototype.stop=function(){this.Rn()},t.prototype.mn=function(){var t;this.Nn()&&(t=csArray.prototype.push).call.apply(t,J([this.fn],this.cn,!1))},t.prototype.yn=function(){var t;this.Tn()&&(t=csArray.prototype.push).call.apply(t,J([this.fn],this.an,!1))},t.prototype.An=function(t){g(t)?csArray.prototype.forEach.call(this.fn,(function(t){return yn(t)})):this.un.has(t)||(this.un.add(t),csArray.prototype.forEach.call(this.wn,(function(n){var i=n;i.boundElement=t,yn(i)})))},t.prototype.On=function(t){g(t)?csArray.prototype.forEach.call(this.fn,(function(t){return mn(t)})):(this.un.delete(t),csArray.prototype.forEach.call(this.wn,(function(n){var i=n;i.boundElement=t,mn(i)})))},t.prototype.Nn=function(){return"PointerEvent"in window&&"function"==typeof window.PointerEvent},t.prototype.Tn=function(){return"TouchEvent"in window&&"function"==typeof window.TouchEvent},t.prototype.Rn=function(){var t=this;this.On(document),this.un.forEach((function(n){return t.On(n)}))},t.prototype.bn=function(){this.kn(t.vn),this.Cn(),this.In(),this._n(),this.kn(t.ln)},t.prototype.kn=function(t){for(var n,i=window.csquerySelectorAll[document.nodeType].call(document,t),r=0;r<i.length;r+=1){var e=i.item(r);(null===(n=e.value)||void 0===n?void 0:n.length)>0&&this.xn(e,!0)}},t.prototype.Cn=function(){var t=Ln.getScrollContainer()||document,n=this.nn.getId(t);if(n){var i=this.Ln(t);if(0!==i.top||0!==i.left){var r={type:an.SCROLL,args:[n,i.left,i.top],date:pt()};this.En(r,!0)}}},t.prototype.In=function(){for(var t=document.getElementsByTagName("select"),n=0;n<t.length;n+=1)this.Pn(t[n],!0)},t.prototype._n=function(){for(var n=window.csquerySelectorAll[document.nodeType].call(document,t.dn),i=0;i<n.length;i+=1)this.Mn(n[i],!0)},t.prototype.Ln=function(t){return t===document?{top:window.pageYOffset,left:window.pageXOffset}:{top:t.scrollTop,left:t.scrollLeft}},t.prototype.scrollListener=function(t){if(!this.rn.isSensitive(t)&&!this.rn.isSensitiveChild(t)){var n=this.nn.getId(t);if(n){var i=this.Ln(t),r={type:an.SCROLL,args:[n,i.left,i.top],date:pt()};this.En(r)}}},t.prototype.mouseOverListener=function(t){if(!this.rn.isSensitiveChild(t.target)){var n=this.nn.getId(t.target);if(n){var i={type:an.MOUSE_OVER,args:[n],date:pt()};this.En(i)}}},t.prototype.clickListener=function(t){var n=_n(t);if(!this.rn.isSensitiveChild(n)){var i=this.nn.getId(n);if(i){var r={type:an.CLICK,args:[i],date:pt()};this.En(r)}}},t.prototype.inputCheckableListener=function(t){var n=_n(t);this.Mn(n)},t.prototype.Mn=function(t,n){if(void 0===n&&(n=!1),!this.rn.isSensitive(t)&&!this.rn.isSensitiveChild(t)){var i=this.nn.getId(t);if(i){var r={type:an.INPUT_CHECKABLE,args:[i,t.checked],date:pt()};this.En(r,n)}}},t.prototype.inputSelectListener=function(t){var n=_n(t);this.Pn(n)},t.prototype.Pn=function(t,n){if(void 0===n&&(n=!1),!this.rn.isSensitive(t)&&!this.rn.isSensitiveChild(t)){var i=this.nn.getId(t);if(i){var r={type:an.INPUT_SELECT,args:[i,t.selectedIndex],date:pt()};this.En(r,n)}}},t.prototype.inputTextListener=function(t){var n=_n(t);this.xn(n)},t.prototype.xn=function(t,n){var i,r,e;if(void 0===n&&(n=!1),!this.rn.isSensitive(t)&&!this.rn.isSensitiveChild(t)){var s=this.nn.getId(t);if(s){var o=null!==(i=t.value)&&void 0!==i?i:"";if(null===(r=this.en)||void 0===r?void 0:r.shouldEncrypt(t))null===(e=this.en)||void 0===e||e.registerInputNodeToEncrypt({targetId:s,targetValue:o,date:pt()});else{var u="number"===t.type?"0":"",h={type:an.INPUT_TEXT,args:[s,csString.prototype.replace.call(o,/\S/g,u)],date:pt()};this.En(h,n)}}}},t.prototype.keyUpListener=function(t){var n=_n(t);if(!this.rn.isSensitiveChild(n)){var i=this.nn.getId(n);if(i){var r=this.Dn[t.key];if(void 0!==r){var e={type:an.KEY_UP,args:[i,r],date:pt()};this.En(e)}}}},t.prototype.keyDownListener=function(t){var n=_n(t);if(!this.rn.isSensitiveChild(n)){var i=this.nn.getId(n);if(i){var r=this.Dn[t.key];if(void 0!==r){var e={type:an.KEY_DOWN,args:[i,r],date:pt()};this.En(e)}}}},t.prototype.copyListener=function(t){var n=_n(t);if(!this.rn.isSensitiveChild(n)){var i=this.nn.getId(n);if(i){var r={type:an.CLIPBOARD_COMMAND,args:[i,An.COPY],date:pt()};this.En(r)}}},t.prototype.cutListener=function(t){var n=_n(t);if(!this.rn.isSensitiveChild(n)){var i=this.nn.getId(n);if(i){var r={type:an.CLIPBOARD_COMMAND,args:[i,An.CUT],date:pt()};this.En(r)}}},t.prototype.pasteListener=function(t){var n=_n(t);if(!this.rn.isSensitiveChild(n)){var i=this.nn.getId(n);if(i){var r={type:an.CLIPBOARD_COMMAND,args:[i,An.PASTE],date:pt()};this.En(r)}}},t.prototype.pointerUpListener=function(t){var n=_n(t);if(!this.rn.isSensitiveChild(n)){var i=this.nn.getId(n);if(i){var r={type:an.POINTER_UP,args:[t.pointerId,t.pointerType,gn(t.clientX,1),gn(t.clientY,1),i,t.button],date:pt()};this.En(r)}}},t.prototype.pointerMoveListener=function(t){var n={type:an.POINTER_MOVE,args:[t.pointerId,t.pointerType,gn(t.clientX,1),gn(t.clientY,1)],date:pt()};this.En(n)},t.prototype.pointerDownListener=function(t){var n=_n(t);if(!this.rn.isSensitiveChild(n)){var i=this.nn.getId(n);if(i){var r={type:an.POINTER_DOWN,args:[t.pointerId,t.pointerType,gn(t.clientX,1),gn(t.clientY,1),i,t.button,{pageX:gn(t.pageX,1),pageY:gn(t.pageY,1)}],date:pt()};this.En(r)}}},t.prototype.touchStartListener=function(t){if(t.changedTouches)for(var n=t.changedTouches,i=0;i<n.length;i+=1){var r=n[i],e={type:an.TOUCH_START,args:[r.identifier,gn(r.clientX,1),gn(r.clientY,1)],date:pt()};this.En(e)}},t.prototype.touchMoveListener=function(t){if(t.changedTouches)for(var n=t.changedTouches,i=0;i<n.length;i+=1){var r=n[i],e={type:an.TOUCH_MOVE,args:[r.identifier,gn(r.clientX,1),gn(r.clientY,1)],date:pt()};this.En(e)}},t.prototype.touchEndListener=function(t){if(t.changedTouches)for(var n=t.changedTouches,i=0;i<n.length;i+=1){var r=n[i],e={type:an.TOUCH_END,args:[r.identifier,gn(r.clientX,1),gn(r.clientY,1)],date:pt()};this.En(e)}},t.prototype.gn=function(){this.Dn={},this.Dn[" "]=En.SPACE,this.Dn.Spacebar=En.SPACE,this.Dn.Backspace=En.BACKSPACE,this.Dn.Enter=En.ENTER,this.Dn.Delete=En.DELETE,this.Dn.ArrowUp=En.ARROWUP,this.Dn.ArrowDown=En.ARROWDOWN,this.Dn.ArrowLeft=En.ARROWLEFT,this.Dn.ArrowRight=En.ARROWRIGHT,this.Dn.Up=En.ARROWUP,this.Dn.Down=En.ARROWDOWN,this.Dn.Left=En.ARROWLEFT,this.Dn.Right=En.ARROWRIGHT,this.Dn.CapsLock=En.CAPSLOCK,this.Dn.Shift=En.SHIFT,this.Dn.Tab=En.TAB,this.Dn.Escape=En.ESCAPE,this.Dn.Esc=En.ESCAPE,this.Dn.End=En.END,this.Dn.Alt=En.ALT,this.Dn.Control=En.CTRL,this.Dn.Meta=En.META},t.vn=csArray.prototype.join.call(["textarea","input:not([type])",'input[type="text"]','input[type="email"]','input[type="search"]','input[type="tel"]','input[type="url"]','input[type="password"]'],","),t.dn=csArray.prototype.join.call(['input[type="checkbox"]','input[type="radio"]'],","),t.ln='input[type="number"]',F([Cn("RecordingPageEvents.start")],t.prototype,"start",null),F([tn("scroll")],t.prototype,"scrollListener",null),F([tn("mouseOver"),xn(),function(t,n,i){var r=i.value;return r&&(i.value=function(t){if(_n(t)===csEventtarget.apply(t))return r.call(this,t)}),i}],t.prototype,"mouseOverListener",null),F([tn("click"),xn()],t.prototype,"clickListener",null),F([tn("checkable")],t.prototype,"inputCheckableListener",null),F([tn("select")],t.prototype,"inputSelectListener",null),F([tn("text")],t.prototype,"inputTextListener",null),F([tn("Event handler type: keyup")],t.prototype,"keyUpListener",null),F([tn("Event handler type: keydown")],t.prototype,"keyDownListener",null),F([tn("Event handler type: copy")],t.prototype,"copyListener",null),F([tn("Event handler type: cut")],t.prototype,"cutListener",null),F([tn("Event handler type: paste")],t.prototype,"pasteListener",null),F([tn("Event handler type: pointerup"),xn()],t.prototype,"pointerUpListener",null),F([tn("Event handler type: pointermove"),xn(),(n={wait:33,ignoreThrottledCalls:!0},function(t,i,r){r.value=Sn(r.value,n)})],t.prototype,"pointerMoveListener",null),F([tn("Event handler type: pointerdown"),xn()],t.prototype,"pointerDownListener",null),F([tn("Event handler type: touchstart"),xn()],t.prototype,"touchStartListener",null),F([tn("Event handler type: touchmove"),xn()],t.prototype,"touchMoveListener",null),F([tn("Event handler type: touchend"),xn()],t.prototype,"touchEndListener",null),t}();function Un(t){for(var n,i=null!==(n=t.length)&&void 0!==n?n:0,r=new csArray(i),e=0;e<i;e+=1)r[e]=t[e];return r}function jn(t,n){if(t.length>=0)for(var i=t.length,r=0;r<i;r++)n(t[r],r);else for(var e=0,s=t.next();!s.done;)n(s.value,e++),s=t.next()}function qn(t,n){for(var i=t.length,r=[],e=0;e<i;e+=1){var s=t[e];n(s)&&csArray.prototype.push.call(r,s)}return r}var Hn,zn,Bn,Fn,Vn=function(){function t(t,n,i,r,e,s,o){void 0===o&&(o=document);var u=this;this.Un=t,this.jn=n,this.qn=i,this.Hn=r,this.nn=e,this.rn=s,this.zn=o,this.Bn=!1,this.Fn=function(t){u.Hn.emitInitialDomDone(t)},this.jn.onCharacterDataMutation((function(t){u.Vn(t)})),this.jn.onAttributesMutation((function(t){u.rn.isSensitive(t.target)&&"src"===t.attributeName&&w(t.target)&&(u.rn.unidentifySensitiveNodes(t.target),u.rn.identifySensitiveNodes(t.target)),u.Gn(t)})),this.jn.onChildListMutation((function(t,n){jn(t.addedNodes,(function(t){u.rn.identifySensitiveNodes(t),u.nn.identifyNodes(t,n)})),u.Jn(t,n),jn(t.removedNodes,(function(t){u.rn.unidentifySensitiveNodes(t)}))})),this.jn.onAttachShadowMutation((function(t){t.target.isConnected&&null!==csElementshadowRoot.apply(t.target)&&(u.rn.identifySensitiveNodes(t.target),u.nn.identifyNodes(csElementshadowRoot.apply(t.target)),u.Yn(t))}))}return t.prototype.onEvent=function(t){this.Wn=t},t.prototype.isStarted=function(){return this.Bn},t.prototype.start=function(){this.isStarted()||(this.Bn=!0,this.jn.start(),this.Xn())},t.prototype.stop=function(){this.isStarted()&&(this.Bn=!1,this.rn.unidentifySensitiveNodes(this.zn),this.jn.stop())},t.prototype.flushEvents=function(){this.jn.flushPendingMutations()},t.prototype.Xn=function(){this.Hn.emitInitialDomStart(),this.rn.identifySensitiveNodes(this.zn),this.nn.identifyNodes(this.zn),this.Un.serializeInitialDom(this.zn,this.Fn)},t.prototype.Yn=function(t){if(!this.rn.isSensitive(t.target)&&!this.rn.isSensitiveChild(t.target)){var n=this.Un.serializeAttachShadowEvent(t);if(n){var i={args:n,date:t.date,type:an.ATTACH_SHADOW};this.Wn(i)}}},t.prototype.Gn=function(t){if(!this.rn.isSensitiveChild(t.target)&&!this.rn.isSensitiveAttribute(t.target,t.attributeName)){var n=this.Un.serializeMutationAttribute(t);if(n){var i={args:n,date:t.date,type:an.MUTATION_ATTRIBUTE};this.Wn(i),this.qn.scanAttribute(t.target,t.attributeName)}}},t.prototype.Vn=function(t){var n=t.target.parentElement;if(!n||!this.rn.isSensitive(n)&&!this.rn.isSensitiveChild(n)){var i=this.Un.serializeMutationCharacterData(t);if(i){var r={args:i,date:t.date,type:an.MUTATION_CHARACTER_DATA};this.Wn(r),this.qn.scanText(t.target)}}},t.prototype.Jn=function(t,n){var i=this;if(!this.rn.isSensitive(t.target)&&!this.rn.isSensitiveChild(t.target)){var r=this.Un.serializeMutationChildList(t,n);if(r){var e=r.removedNodes,s=r.addedNodes;csArray.prototype.forEach.call(e,(function(n){var r={args:n,date:t.date,type:an.MUTATION_REMOVE};i.Wn(r)})),csArray.prototype.forEach.call(s,(function(n){var r={args:n,date:t.date,type:an.MUTATION_INSERT};i.Wn(r)}))}}},t}(),Gn=function(){function t(t){this.Kn=t,this.$n=0}return t.prototype.addString=function(t){this.$n+=2*t.length},t.prototype.addArrayBuffer=function(t){this.$n+=t.byteLength},t.prototype.isThresholdReached=function(){return this.$n>this.Kn},t.prototype.reset=function(){this.$n=0},t}(),Jn=function(){function t(t,n){void 0===t&&(t=[]),void 0===n&&(n=512e3),this.Qn=t,this.Zn=new Gn(n)}return t.prototype.addEvent=function(t){this.Zn.addString(it(t)),csArray.prototype.push.call(this.Qn,t)},t.prototype.addEventByTimestamp=function(t){for(var n=0;n<this.Qn.length;n+=1){if(this.Qn[n].date>t.date)break}csArray.prototype.splice.call(this.Qn,n,0,t)},t.prototype.eventsCount=function(){return this.Qn.length},t.prototype.clearEvents=function(){this.Zn.reset(),this.Qn=[]},t.prototype.isFull=function(){return this.eventsCount()>=200},t.prototype.isThresholdReached=function(){return this.Zn.isThresholdReached()},t.prototype.getEvents=function(){return this.Qn},t.prototype.extractEvents=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=[],r=[];return csArray.prototype.forEach.call(this.Qn,(function(n){-1!==csArray.prototype.indexOf.call(t,n.type)?csArray.prototype.push.call(i,n):csArray.prototype.push.call(r,n)})),this.Qn=r,i},t.prototype.stringifyEvents=function(){return it(this.Qn)},F([Cn("RecordingBatch.addEvent")],t.prototype,"addEvent",null),t}(),Yn=function(){function t(){this.ti=1}return t.prototype.getCurrentIndex=function(){return this.ti},t.prototype.increment=function(){this.ti+=1},t.prototype.reset=function(){this.ti=1},t.prototype.getRequestParameters=function(){return{ri:"".concat(this.ti)}},t}(),Wn=function(){function t(){}return t.prototype.emit=function(n,i){var r="".concat(t.ni,".").concat(n),e=t.createEvent(r,{detail:i});null!==e&&document.dispatchEvent(e)},t.createEvent=function(t,n){if(void 0===n&&(n={}),"function"==typeof CustomEvent)return new CustomEvent(t,n);var i=this.ii();if(null===i)return null;var r=n.bubbles,e=void 0!==r&&r,s=n.cancelable,o=void 0!==s&&s,u=n.detail;return i.initCustomEvent(t,e,o,u),i},t.ii=function(){try{return document.createEvent("CustomEvent")}catch(t){return null}},t.ni="cs.tracking",t}(),Xn=function(){function t(){this.isStarted=!1}return t.prototype.start=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.isStarted||(this.isStarted=!0,this.onStart.apply(this,t))},t.prototype.stop=function(){this.isStarted&&(this.isStarted=!1,this.onStop())},t.prototype.restart=function(){this.stop(),this.start()},t}();!function(t){t.REPLAY_RECORDING_DISABLED="1",t.REPLAY_RECORDING_ENABLED="3",t.TRIGGER_REPLAY_RECORDING_ENABLED="5"}(Hn||(Hn={})),function(t){t.NOT_RECORDED="0",t.TEMPORARILY_RECORDED="T",t.GLOBAL_SAMPLING="5",t.URL_SAMPLING="6",t.ETR_SAMPLING="7"}(zn||(zn={})),function(t){t.ETR_OFF="0",t.ETR_ON="1"}(Bn||(Bn={})),function(t){t.ETR_LEGACY="0",t.ETR_SESSION="1",t.ETR_PAGE="2"}(Fn||(Fn={}));var Kn,$n,Qn,Zn=function(t){function n(n,i,r,e,s,o,u,h,c,a,f,v,l,d,w,p,y,m,g,S,E,A,b,R){void 0===R&&(R=[]);var N=t.call(this)||this;return N.L=n,N.ei=i,N.si=r,N.oi=e,N.ui=s,N.hi=o,N.ci=u,N.ai=h,N.fi=c,N.vi=a,N.li=f,N.J=v,N.qn=l,N.wi=d,N.pi=w,N.yi=p,N.mi=y,N.gi=m,N.en=g,N.Si=S,N.Ei=E,N.Ai=A,N.bi=b,N.Ri=R,N.Ni=0,N.Ti=0,N.Oi=0,N.ki=new Wn,N.Ci={allowFromQuotaService:!0,allowFromSerialization:!0},N.Ii=Sn((function(){N.ei.eventsCount()>0&&N._i()}),2e3),N.xi=function(t){return N.processBrowserEvent(t)},N.Li=function(t){return N.Pi(t)},N.Mi=0,N.Di=0,N.Ui=function(t){N.Ai.removeBatchInProgress("".concat(t.params.sn,".").concat(t.params.pn,".").concat(t.params.ri))},N}return z(n,t),n.prototype.init=function(){this.ji(),this.Ei.onLoad(this.Ui),this.Ei.onError(this.Ui)},n.prototype.ji=function(){var t,n,i,r=this;this.hi.onEvent(this.xi),this.ci.onEvent(this.xi),this.fi.onEvent(this.xi),this.ai.onEvent(this.Li),this.qn.onEvent(this.xi),this.wi.onEvent(this.xi),jn(this.Ri,(function(t){return t.onEvent(r.xi)})),this.vi.onEvent(this.Li),null===(t=this.en)||void 0===t||t.onTextNodeToEncrypt(this.xi),null===(n=this.en)||void 0===n||n.onApiErrorToEncrypt((function(t){r.qi(t)})),this.bi.onEvent(this.xi),null===(i=this.en)||void 0===i||i.onUserIdentifierToEncrypt(this.xi),this.Si.onEvent(this.xi)},n.prototype.isRecording=function(){return this.J.hasValidSession()&&this.isStarted},n.prototype.isMutationTrackerStarted=function(){return this.ci.isStarted()},n.prototype.blockSendingEventsFromQuotaService=function(){this.Ci.allowFromQuotaService=!1},n.prototype.allowSendingEventsFromQuotaService=function(){this.Ci.allowFromQuotaService=!0},n.prototype.blockSendingEventsFromSerialization=function(){this.Ci.allowFromSerialization=!1},n.prototype.allowSendingEventsFromSerialization=function(){this.Ci.allowFromSerialization=!0},n.prototype.canSendEvents=function(){return this.Ci.allowFromQuotaService&&this.Ci.allowFromSerialization},n.prototype.onIframeJavascriptError=function(t){this.Hi(t)},n.prototype.onIframeDetailedApiError=function(t){this.zi(t)},n.prototype.onIframeRecordingUserEvent=function(t){for(var n=0,i=t;n<i.length;n++){var r=i[n];this.Pi(r)}},n.prototype.onIframeRecordingBrowserEvent=function(t){if(this.isMutationTrackerStarted())for(var n=0,i=t;n<i.length;n++){var r=i[n];this.processBrowserEvent(r)}},n.prototype.processBrowserEvent=function(t){this.J.hasValidSession()&&this.Bi(t)},n.prototype.Pi=function(t){this.li.isSessionValid()&&this.Bi(t)},n.prototype.Bi=function(t){this.ei.addEvent(t),this.ei.isThresholdReached()?this.pushEvents():this.ei.isFull()&&this.Ii(),this.Fi(t)},n.prototype.Fi=function(t){this.L.emitDebugEvents&&this.ki.emit("recordingEvent",B(B({},t),{typeName:an[t.type]}))},n.prototype.onStart=function(){var t=this;this.initStates(),this.ui.start(),this.Si.start(),jn(this.Ri,(function(t){return t.start()})),this.wi.start(),this.ci.start(),this.hi.start(),this.fi.start(),this.vi.start(),this.bi.start(),this.pi&&this.yi&&this.pi.subscribe(n.Vi,(function(n){return t.Hi(n)})),this.mi&&this.gi&&this.mi.subscribe(n.Vi,(function(n){return t.zi(n)}),{detailedEvent:!0}),this.L.emitDebugEvents&&this.ki.emit("replayRecordingStarted")},n.prototype.onStop=function(){this.ui.stop(),this.hi.stop(),this.ci.stop(),this.fi.stop(),this.ai.stop(),this.pi&&this.pi.unsubscribe(n.Vi),this.mi&&this.mi.unsubscribe(n.Vi),jn(this.Ri,(function(t){return t.stop()})),this.vi.stop(),this.Si.stop(),this.bi.stop()},n.prototype.clearStates=function(){this.ci.flushEvents(),this.Ii.cancel(),this.pushEvents(),this.Ei.removeQueryParams()},n.prototype.initStates=function(){this.Mi=pt(),this.oi.reset(),this.Ni=0,this.Ti=0,this.Oi=0,this.Ei.setQueryParams(this.si.getRequestParameters())},n.prototype.pushEvents=function(){jn(this.Ri,(function(t){var n;return null===(n=t.flushEvents)||void 0===n?void 0:n.call(t)})),this.ei.eventsCount()>0&&(this.isStarted?this._i():this.ei.clearEvents())},n.prototype._i=function(){if(this.canSendEvents()){var t=this.ei.getEvents();this.Di=t[t.length-1].date;var n=this.oi.getCurrentIndex();this.Ei.setQueryParams({ri:n.toString(),rst:this.getRecordingStartTimestamp(),let:this.getRecordingLastEventTimestamp()});var i=this.Ei.getQueryParams();this.Ai.addBatchInProgress("".concat(i.sn,".").concat(i.pn,".").concat(n),this.Ei.getQueryParams(),t),this.Ei.send(t),this.oi.increment(),this.ei.clearEvents(),this.Gi&&this.Gi()}},n.prototype.addInitialDom=function(t){this.ei.addEventByTimestamp(t),this.Fi(t)},n.prototype.zi=function(t){if(t.customRequestHeaders||t.customResponseHeaders||t.queryParameters||t.requestBody||t.responseBody){if(this.en)return void this.en.registerApiErrorToEncrypt(t);t.customRequestHeaders="",t.customResponseHeaders="",t.queryParameters="",t.requestBody="",t.responseBody=""}this.qi(t)},n.prototype.qi=function(t){if(this.Ti<n.Ji){var i={type:an.API_ERROR,date:pt(),args:[this.gi.anonymize(t)]};this.xi(i),this.Ti=this.Ti+1}},n.prototype.Hi=function(t){if(this.Ni<n.Yi){var i={type:an.JAVASCRIPT_ERROR,date:pt(),args:[this.yi.anonymize(t)]};this.xi(i),this.Ni=this.Ni+1}},n.prototype.Wi=function(t){if(this.Oi<n.Xi){var i={type:an.CUSTOM_ERROR,date:pt(),args:[t]};this.xi(i),this.Oi=this.Oi+1}},n.prototype.Ki=function(t){var i,r;this.isStarted&&(t===Fn.ETR_SESSION?this.Ei.setQueryParams(((i={})[n.$i]=n.Qi,i)):t===Fn.ETR_PAGE&&this.Ei.setQueryParams(((r={})[n.Zi]=n.Qi,r)))},n.prototype.clearEvents=function(){this.ei.clearEvents()},n.prototype.onCustomJavaScriptErrorEvent=function(t){this.Hi(t)},n.prototype.onCustomErrorEvent=function(t){this.Wi(t)},n.prototype.onPageEvent=function(t){this.tr(t)},n.prototype.onUserIdentifierEvent=function(t){var n,i={userIdentifier:t,date:pt(),keyId:this.L.encryptionPublicKeyId};null===(n=this.en)||void 0===n||n.registerUserIdentifierToEncrypt(i)},n.prototype.onEventTriggerRecording=function(t,n){this.Ki(n),this.tr(t),this.pushEvents()},n.prototype.tr=function(t){var i={type:an.PAGE_EVENT,date:pt(),args:[{eventName:csString.prototype.slice.call(t,0,n.nr)}]};this.ei.addEvent(i)},n.prototype.triggerConsentGranted=function(){var t={date:pt(),type:an.CONSENT_GRANTED};this.ei.addEvent(t)},n.prototype.triggerConsentWithdrawn=function(){var t={date:pt(),type:an.CONSENT_WITHDRAWN};this.ei.addEvent(t)},n.prototype.onRecordingRequestSent=function(t){this.Gi=t},n.prototype.getRecordingStartTimestamp=function(){return this.Mi.toString()},n.prototype.getRecordingLastEventTimestamp=function(){return this.Di.toString()},n.Vi="RecordingService",n.nr=255,n.Yi=20,n.Ji=20,n.Xi=20,n.Zi="etrp",n.$i="etrs",n.Qi="1",F([Cn("addInitialDom")],n.prototype,"addInitialDom",null),n}(Xn),ti=function(t){function n(n,i,r,e,s,o){var u=t.call(this)||this;return u.ei=n,u.Bt=i,u.L=r,u.ir=e,u.Ei=s,u.si=o,u.rr=!1,u.er={},u.ur=function(t){if(0!==t.length)for(var n=0,i=t;n<i.length;n++){var r=i[n],e=r.metadata,s=r.events;u.hr(e.rt)&&u.Ei.send(s,e)}},u.cr=function(){try{if(!u.rr)return;u.ar();var t=B(B({},u.Ei.getQueryParams()),u.si.getRequestParameters());if(!u.hr(t.rt))return;if(u.sendLastMessageBeacon(),0===u.ei.eventsCount())return;u.L.useMalkaPipeline&&(t.hlm="true");var n=u.ei.getEvents();t.let=n[n.length-1].date.toString(),u.Bt.save({key:"".concat(t.sn,".").concat(t.pn,".").concat(t.ri,".last"),metadata:B(B({},t),{datatype:"json"}),events:u.ei.stringifyEvents()})}catch(t){}},u}return z(n,t),n.prototype.onStart=function(){this.vr(),this.er={}},n.prototype.onStop=function(){this.lr()},n.prototype.recover=function(){this.Bt.recover(this.ur)},n.prototype.addBatchInProgress=function(t,n,i){this.er[t]={metadata:B({},n),events:i}},n.prototype.removeBatchInProgress=function(t){delete this.er[t]},n.prototype.blockSendingLastMessage=function(){this.rr=!1},n.prototype.allowSendingLastMessage=function(){this.rr=!0},n.prototype.sendLastMessageBeacon=function(){if(this.L.useMalkaPipeline&&this.rr){var t=this.Ei.getQueryParams(),n=(t.ri,t.rst,t.let,function(t,n){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(i[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var e=0;for(r=Object.getOwnPropertySymbols(t);e<r.length;e++)n.indexOf(r[e])<0&&Object.prototype.propertyIsEnumerable.call(t,r[e])&&(i[r[e]]=t[r[e]])}return i}(t,["ri","rst","let"]));n.hlm="true",this.ir.setQueryParams(n);var i=this.ei.extractEvents(an.JAVASCRIPT_ERROR,an.API_ERROR,an.CUSTOM_ERROR),r=i.length?it(i):"";this.ir.send(r)}},n.prototype.vr=function(){window.addEventListener("pagehide",this.cr)},n.prototype.lr=function(){window.removeEventListener("pagehide",this.cr)},n.prototype.hr=function(t){return!this.L.useMalkaPipeline||!!t&&-1===csString.prototype.indexOf.call(t,zn.TEMPORARILY_RECORDED)},n.prototype.ar=function(){var t=this;csArray.prototype.forEach.call(Object.keys(this.er),(function(n){var i=t.er[n],r=i.metadata,e=i.events;t.Bt.save({key:"".concat(r.sn,".").concat(r.pn,".").concat(r.ri),metadata:B(B({},r),{datatype:"json"}),events:csJSON.stringify(e)})}))},F([tn("RecordingRecovery")],n.prototype,"recover",null),n}(Xn);!function(t){t.isSupported=function(){return!!Element.prototype.attachShadow},t.getShadowRoot=function(t){return t&&(f(n=t)&&csElementshadowRoot.apply(n)&&S(csElementshadowRoot.apply(n)))?t.shadowRoot:null;var n},t.getAllShadowHosts=function t(n){for(var i,r,e=document.createNodeIterator(n,NodeFilter.SHOW_ELEMENT,null,!1),s=[];r=e.nextNode();)csElementshadowRoot.apply(r)&&(i=csArray.prototype.push).call.apply(i,J([s,r],t(csElementshadowRoot.apply(r)),!1));return s}}(Kn||(Kn={})),function(t){function n(){var t=[r()];return document.documentElement&&csArray.prototype.push.call(t,document.documentElement.scrollHeight,document.documentElement.offsetHeight,document.documentElement.clientHeight),document.body&&csArray.prototype.push.call(t,document.body.scrollHeight,document.body.offsetHeight),Math.max.apply(Math,t)}function i(){return document.documentElement.scrollWidth}function r(){return window.innerHeight}function e(){return window.innerWidth}function s(){var t=window.csScreen.width;return St(t)&&t>0?t:window.screen.width}function o(){var t=window.csScreen.height;return St(t)&&t>0?t:window.screen.height}t.documentHeight=n,t.documentWidth=i,t.windowHeight=r,t.windowWidth=e,t.screenWidth=s,t.screenHeight=o,t.windowOffsetX=function(){return window.pageXOffset},t.windowOffsetY=function(){return window.pageYOffset},t.getRequestParameters=function(){return{dw:"".concat(i()),dh:"".concat(n()),ww:"".concat(e()),wh:"".concat(r()),sw:"".concat(s()),sh:"".concat(o())}}}($n||($n={})),function(t){var n="isConnected"in Node.prototype?function(t){return t.isConnected}:function(t){return!(t.ownerDocument&&t.ownerDocument.compareDocumentPosition(t)&t.DOCUMENT_POSITION_DISCONNECTED)};function i(t){var n;return t.parentElement?t.parentElement:t.getRootNode?null===(n=t.getRootNode())||void 0===n?void 0:n.host:null}function r(t){var n,i;if(!1===(null===(n=t.checkVisibility)||void 0===n?void 0:n.call(t,{checkOpacity:!0,checkVisibilityCSS:!0})))return!0;if(!t.offsetParent){if(!t.getBoundingClientRect)return Xt.warn("SUP-11432: Element doesn't have getBoundingClientRect. Node: ".concat(t instanceof Node," Ctor: ").concat(null===(i=null==t?void 0:t.constructor)||void 0===i?void 0:i.name)),!1;var r=t.getBoundingClientRect();if(0==r.width&&0==r.height)return!0}var e,s=window.getComputedStyle(t);return!s||("none"===s.display||"hidden"===s.visibility||"collapse"===s.visibility||"0"===s.opacity||"opacity(0)"===s.filter||"0px"===s.width&&"0px"===s.height||(e=s.color,/^rgba\(\d+, \d+, \d+, 0\)$/.test(e)))}function e(t){var n=t.getBoundingClientRect(),i=n.left+.5*n.width,r=n.top+.5*n.height;return s(document,i,r)}function s(t,n,i){var r=t.elementFromPoint(n,i);if(!r)return null;var e=Kn.getShadowRoot(r);return e&&e!=document.body.getRootNode()&&e!==t?s(e,n,i):r}function o(t){var n=e(t);return null!==n&&(t===n||t.contains(n))}t.isConnected=function(t){return n(t)},t.isDescendantOf=function n(i,r){if(i===r||r.contains(i))return!0;var e=t.getParentElement(i);return!(!e||e===i)&&n(e,r)},t.getParentElement=i,t.findAllElements=function(t,n){var i;void 0===n&&(n=document);for(var r=Un(window.csquerySelectorAll[n.nodeType].call(n,t)),e=0,s=Kn.getAllShadowHosts(n);e<s.length;e++){var o=s[e],u=csElementshadowRoot.apply(o),h=Un(window.csquerySelectorAll[u.nodeType].call(u,t));(i=csArray.prototype.push).call.apply(i,J([r],h,!1))}return r},t.isHiddenByCSS=r,t.areAncestorsHiddenByCSS=function t(n){if(r(n))return!0;var e=i(n);return null!=e&&t(e)},t.getTopAncestorHiddenByCSS=function(t){var n=null,e=t;do{if(!r(e))break;n=e}while(e=i(e));return n},t.getTopElement=e,t.getElementOnTop=function(n){if(!n.getBoundingClientRect)return null;var i=n.getBoundingClientRect(),r=i.x+i.width/2,e=i.y+i.height/2;return t.getTopElementFromPoint(document,r,e)},t.getTopElementFromPoint=s,t.isVisibleInDocument=function(t){return!function(t){var n=t.getBoundingClientRect();return n.right+$n.windowOffsetX()<0||n.bottom+$n.windowOffsetY()<0}(t)&&!r(t)&&!function(t){var n=e(t);return null!==n&&!t.contains(n)}(t)},t.isVisibleInViewportInForeground=function(t){return!r(t)&&o(t)},t.isInViewPort=o,t.getAttributeNS=function(t,n,i){var r=t.getAttributeNS(n,i);return""===r?t.hasAttributeNS(n,i)?r:null:r},t.isElementFocusable=function(t){return!!t.hasAttribute("tabIndex")||("true"===t.getAttribute("contentEditable")||(!(!l(t)||!t.hasAttribute("href"))||(!(!(f(n=t)&&"select"===n.localName||function(t){return f(t)&&"textarea"===t.localName}(t)||y(t)||function(t){return f(t)&&"button"===t.localName}(t))||t.hasAttribute("disabled"))||!(!function(t){return f(t)&&"details"===t.localName}(t)&&!function(t){return f(t)&&"summary"===t.localName}(t)))));var n}}(Qn||(Qn={}));var ni=/[^\s]/g;function ii(t){return csString.prototype.replace.call(t,ni,"a")}var ri=function(){function t(t,n,i,r){this.wr=t,this.nn=n,this.pr=i,this.en=r,this.yr=!1}return t.prototype.setAnonymization=function(t){this.mr=t},t.prototype.isDOMSerializationInProgress=function(){return this.yr},t.prototype.serializeInitialDom=function(t,n){if(this.wr.isAsynchronous())this.serializeDocumentAsync(t).then((function(t){t&&n(t)})).catch((function(t){Wt.error(t)}));else{var i=this.gr(t);n(i)}},t.prototype.gr=function(t){return{args:[this.wr.serialize(t,{withAnonymization:this.mr})],date:pt(),type:an.INITIAL_DOM}},t.prototype.serializeDocumentAsync=function(t){return V(this,void 0,void 0,(function(){return G(this,(function(n){switch(n.label){case 0:this.yr=!0,n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.wr.startSerializeAsync(t,{withAnonymization:this.mr})];case 2:return[2,n.sent()];case 3:return this.yr=!1,[7];case 4:return[2]}}))}))},t.prototype.serializeMutationCharacterData=function(t){var n,i=this.nn.getId(t.target);if(!i)return null;var r=t.target;if(r.data===t.oldValue)return null;if(v(r)&&(null===(n=this.en)||void 0===n?void 0:n.shouldEncrypt(r)))return this.en.registerTextNodeMutationToEncrypt({targetId:i,textNode:r,serializedTextData:ii(r.data),date:t.date}),null;var e=[i,this.pr.getAnonymizedText(this.mr,r,r.data)];return this.Sr(this.wr)&&this.isDOMSerializationInProgress()&&this.wr.handleMutationCharacterData(t,e),e},t.prototype.serializeAttachShadowEvent=function(t){var n=this.nn.getId(t.target);return n?[n,this.wr.serialize(t.shadowRoot)]:null},t.prototype.serializeMutationAttribute=function(t){var n=this.nn.getId(t.target);if(!n)return null;var i=t.target,r=t.attributeName,e=t.attributeNamespace,s=Qn.getAttributeNS(t.target,e,r);s&&(s=this.pr.getAnonymizedAttributeValue(i,this.mr,r,s));var o=[n,e,r,s];return this.Sr(this.wr)&&this.isDOMSerializationInProgress()&&this.wr.handleMutationAttribute(t.oldValue?this.pr.getAnonymizedAttributeValue(i,this.mr,r,t.oldValue):t.oldValue,o),o},t.prototype.serializeMutationChildList=function(t,n){var i=this.nn.getId(t.target);return i?this.Sr(this.wr)&&this.isDOMSerializationInProgress()?this.wr.serializeMutationChildList(t,this.mr,n):{removedNodes:this.Er(t),addedNodes:this.Ar(t,i,n)}:null},t.prototype.Sr=function(t){return t.isAsynchronous()},t.prototype.Er=function(t){for(var n=[],i=0;i<t.removedNodes.length;i+=1){var r=this.nn.getId(t.removedNodes[i]);r&&csArray.prototype.push.call(n,[r])}return n},t.prototype.Ar=function(t,n,i){var r=[],e=null;if(t.nextSibling){var s=this.nn.getId(t.nextSibling);e=void 0!==s?s:null}for(var o=0;o<t.addedNodes.length;o+=1){var u=t.addedNodes[o],h=this.wr.serialize(u,{excludedNodes:i,withAnonymization:this.mr}),c=i.get(u);c&&i.set(u,c-1),csArray.prototype.push.call(r,[n,e,h])}return r},F([In("serializeDocumentAsync")],t.prototype,"serializeDocumentAsync",null),t}();function ei(){var t,n=(t=new Error).stack?csArray.prototype.filter.call(csString.prototype.split.call(t.stack,"\n"),(function(t){return"Error"!==t&&-1===csString.prototype.indexOf.call(csString.prototype.toLowerCase.call(t),"promise ")&&-1===csString.prototype.indexOf.call(t,"[native code]")})):[];if(0===n.length)return"";var i=function(t){return t.length>0?si(t[0]):""}(n);return""===i?"":(n=function(t,n){return csArray.prototype.filter.call(t,(function(t){return-1===csString.prototype.indexOf.call(t,n)}))}(n,i),0===n.length?"":si(n[0]))}function si(t){var n,i="";n=t;var r=(-1!==csString.prototype.indexOf.call(n,"@")?new RegExp("@(.+):(\\d+):(\\d+)$"):new RegExp("\\((.+):(\\d+):(\\d+)\\)")).exec(t);return r&&(i=r[1]),i}var oi=function(t){return t};function ui(t){var n,i=t.target,r=t.methodName,e=t.hook,s=t.hookPrepareArgs,o=void 0===s?oi:s,u=t.options;if(!(null===(n=Object.getOwnPropertyDescriptor(i,r))||void 0===n?void 0:n.writable))return Xt.warn("Cannot intercept read only function '".concat(csString(r),"' of object '").concat(i,"'")),null;var h,c,a=!1,f=i[r];if("function"==typeof f){var v=function(){var t=o(arguments),n=f.apply(this,arguments);if(a){var i=void 0;u&&u.withCallerName&&(i=ei());try{e({result:n,context:this,args:t,callerName:i})}catch(t){Xt.error(t)}}return n};(h=v).prototype=(c=f).prototype,Object.defineProperty(h,"toString",{value:function(){return c.toString()}}),i[r]=v}return{activate:function(){return a=!0},deactivate:function(){return a=!1}}}function hi(t,n,i){var r=!1,e=Object.getOwnPropertyDescriptor(t,n);if(e){if(!e.configurable)return Xt.warn("Cannot intercept read only property '".concat(csString(n),"' of object '").concat(t,"'")),null;Object.defineProperty(t,n,B(B({},e.get?{get:function(){return e.get.apply(this,arguments)}}:{}),e.set?{set:function(){var t=arguments,n=e.set.apply(this,t);if(r)try{i(this,t[0])}catch(t){Xt.error(t)}return n}}:{}))}return{activate:function(){return r=!0},deactivate:function(){return r=!1}}}var ci,ai,fi=function(){function t(t,n,i,r){var e=this;this.nn=t,this.rn=n,this.qn=i,this.ui=r,this.br()&&(this.Rr=hi(window.CSSStyleDeclaration.prototype,"cssText",(function(t,n){return e.setStyleDeclarationCssText(t,n)})))}return t.prototype.onEvent=function(t){this.Wn=t},t.prototype.start=function(){this.Nr=this.ui.registerToInsertRuleInterceptor(this.sendInsertion.bind(this)),this.Tr=this.ui.registerToDeleteRuleInterceptor(this.sendDeletion.bind(this)),this.Rr&&this.Rr.activate()},t.prototype.stop=function(){var t,n;null===(t=this.Nr)||void 0===t||t.call(this),null===(n=this.Tr)||void 0===n||n.call(this),this.Rr&&this.Rr.deactivate()},t.prototype.setStyleDeclarationCssText=function(t,n){var i=this.Or(t);if((null==i?void 0:i.ownerNode)&&(!f(i.ownerNode)||!this.rn.isSensitiveChild(i.ownerNode))){var r=this.nn.getId(i.ownerNode);if(r){var e=this.kr(i.cssRules,t.parentRule),s={date:pt(),type:an.STYLESHEET_CSS_TEXT_UPDATE,args:[r,e,n]};this.Wn(s),this.qn.scanCssString(n)}}},t.prototype.Or=function(t){var n=t.parentRule;return n&&n.parentStyleSheet},t.prototype.kr=function(t,n){return csArray.prototype.indexOf.call(csArray.from(t),n)},t.prototype.br=function(){return window.CSSStyleDeclaration&&window.CSSStyleDeclaration.prototype&&Object.getOwnPropertyDescriptor(window.CSSStyleDeclaration.prototype,"cssText")},t.prototype.sendInsertion=function(t,n){var i=n[0],r=n[1];if(t.ownerNode&&(!f(t.ownerNode)||!this.rn.isSensitiveChild(t.ownerNode))){var e=this.nn.getId(t.ownerNode);if(e){var s={date:pt(),type:an.STYLESHEET_RULE_INSERT,args:bt(r)?[e,i,r]:[e,i]};this.Wn(s),this.qn.scanCssString(i)}}},t.prototype.sendDeletion=function(t,n){var i=n[0];if(t.ownerNode&&(!f(t.ownerNode)||!this.rn.isSensitiveChild(t.ownerNode))){var r=this.nn.getId(t.ownerNode);if(r){var e={date:pt(),type:an.STYLESHEET_RULE_DELETE,args:[r,i]};this.Wn(e)}}},F([tn("styleSheetRuleTracker.setStyleDeclarationCssText")],t.prototype,"setStyleDeclarationCssText",null),F([tn("styleSheetRuleTracker.sendInsertion")],t.prototype,"sendInsertion",null),F([tn("styleSheetRuleTracker.sendDeletion")],t.prototype,"sendDeletion",null),t}(),vi="data-cs-mask",li=function(){function t(t){this.rn=t}return t.prototype.beforeSerializeChildren=function(t,n){return this.rn.isSensitive(t)||this.Cr(t)?[]:n},t.prototype.beforeSerializeAttributes=function(t,n){var i,r=this;return this.rn.isSensitive(t)&&(!f(i=t)||"script"!==i.localName)&&(csArray.prototype.push.call(n,this.Ir(t)),t.hasAttribute(vi)||csArray.prototype.push.call(n,document.createAttribute(vi))),csArray.prototype.filter.call(n,(function(n){return!r.rn.isSensitiveAttribute(t,n.name)}))},t.prototype.Cr=function(t){return S(t)&&this.rn.isSensitive(t.host)},t.prototype.Ir=function(t){var n=t.getBoundingClientRect(),i=document.createAttribute("style");return i.value="width: ".concat(n.width,"px !important; height: ").concat(n.height,"px !important;"),i},t}(),di=function(t){return Object.getOwnPropertyDescriptor(t.prototype,"localName")},wi=null!==(ci=di(Element))&&void 0!==ci?ci:di(Node);!function(t){t[t.WebElement=0]="WebElement",t[t.MobileView=1]="MobileView",t[t.WebViewContainer=2]="WebViewContainer"}(ai||(ai={}));var pi=function(t){this.csId=t.__contentsquare_identifier,this.format=ai.WebElement,t.__contentsquare_artificial&&(this.artificial=t.__contentsquare_artificial)};var yi=function(t){function n(n){var i,r=t.call(this,n)||this;return r.attributes=[],r.localName=(i=n,wi.get.call(i)),r.namespaceURI=n.namespaceURI,r.children=[],r.nodeType=1,r}return z(n,t),n}(pi),mi=["id","class","style","src","srcset","sizes","href","rel","type","width","height","media","align","dir","bgcolor","color","border","colspan","rowspan","cols","rows","size","start",I],gi=function(){function t(t,n){this.P=t,this.L=n,this._r=new Set,this.Lr=""}return t.prototype.init=function(){var t=this;csArray.prototype.forEach.call(mi,(function(n){t._r.add(n)})),csArray.prototype.forEach.call(this.L.whitelistedAttributes,(function(n){t._r.add(n)}))},t.prototype.beforeSerializeChildren=function(t,n,i){return(p(t)||this.Pr(t))&&(i.withAnonymization=!1),n},t.prototype.serializeAttribute=function(t,n,i,r){i.anonymized=r.withAnonymization;var e=this.getAnonymizedAttributeValue(t,r.withAnonymization,i.name,i.value);i.value=e},t.prototype.serializeTextNode=function(t,n,i){n.data=this.getAnonymizedText(i.withAnonymization,t,n.data)},t.prototype.serializeCDATASectionNode=function(t,n,i){var r=t.data;return n.data=i.withAnonymization?ii(r):this.P.anonymizeEmail(r),n},t.prototype.getAnonymizedText=function(t,n,i){if(csNodeparentNode.apply(n)){if(p(csNodeparentNode.apply(n)))return i;if(t&&this.Pr(csNodeparentNode.apply(n)))return this.P.anonymizeEmail(i)}return t?ii(i):this.P.anonymizeEmail(i)},t.prototype.getAnonymizedAttributeValue=function(t,n,i,r){return this.Mr(i)||f(e=t)&&"ownerSVGElement"in e?r:n&&y(t)&&("submit"===t.type||"button"===t.type)&&"value"===i?ii(r):n?"":this.P.anonymizeEmail(r);var e},t.prototype.setWhitelistedElementsSelector=function(t){this.Lr=t},t.prototype.getWhitelistedElementsSelector=function(){return this.Lr},t.prototype.afterSerialize=function(t,n,i){null==n.anonymized&&(n.anonymized=i.withAnonymization),n instanceof yi&&n.shadowRoot&&null==n.shadowRoot.anonymized&&(n.shadowRoot.anonymized=i.withAnonymization)},t.prototype.Mr=function(t){return this._r.has(t)},t.prototype.Pr=function(t){return f(t)&&(t.hasAttribute("data-cs-capture")||this.Dr(t))},t.prototype.Dr=function(t){return!!this.Lr&&N.call(t,this.Lr)},t}(),Si=function(){function t(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.Ur=t}return t.prototype.addProvider=function(t){csArray.prototype.push.call(this.Ur,t)},t.prototype.getRequestParameters=function(){return csArray.prototype.reduce.call(this.Ur,(function(t,n){return B(B({},n.getRequestParameters()),t)}),{})},t}();function Ei(t,n){var i,r,e,s,o=null,u=function(h){var c=pt();if(!h&&null!==o){var a=n-(c-o);if(a>0)return void(r=window.setTimeout(u,a))}var f=c-e;r=null,o=null,e=null,s=t.apply(void 0,J([f],i,!1))},h=function(){for(var t=[],h=0;h<arguments.length;h++)t[h]=arguments[h];if(i=J([],t,!0),!e)return e=pt(),r=window.setTimeout(u,n),s;o=pt()};return h.flushPending=function(){r&&(window.clearTimeout(r),u(!0))},h.cancel=function(){o=null,e=null,r&&(window.clearTimeout(r),r=null)},h}var Ai=function(){function t(t){var n=this;this.L=t,this.jr=!1,this.qr=Ei((function(){n.jr=!1,n.Hr()}),this.L.pendingInactivityTimeout)}return t.prototype.start=function(){this.jr=!0,this.qr()},t.prototype.stop=function(){this.jr=!1,this.qr.cancel()},t.prototype.trackActivity=function(){this.jr||(this.jr=!0,this.zr()),this.qr()},t.prototype.isUserActive=function(){return this.jr},t.prototype.onActivityStopped=function(t){this.Hr=t},t.prototype.onActivityResumed=function(t){this.zr=t},t}(),bi=function(){function t(t,n,i){var r=this;this.Br=t,this.P=n,this.Fr=i,this.Vr=[{boundElement:window,type:"resize",listener:function(){return r.resizeListener()}},{boundElement:window,type:"hashchange",listener:function(){return r.hashChangeListener()}},{boundElement:document,type:"visibilitychange",listener:function(){return r.visibilityChangeListener()}}]}return t.prototype.onEvent=function(t){this.Wn=t},t.prototype.start=function(){this.An(),this.triggerInitialEvents(),this.Fr&&(this.Fr.setOnScreenChangedCallback(this.Wn),this.Fr.start())},t.prototype.stop=function(){var t;this.On(),null===(t=this.Fr)||void 0===t||t.stop()},t.prototype.An=function(){csArray.prototype.forEach.call(this.Vr,(function(t){return yn(t)}))},t.prototype.On=function(){csArray.prototype.forEach.call(this.Vr,(function(t){return mn(t)}))},t.prototype.triggerInitialEvents=function(){this.resizeListener(),this.hashChangeListener()},t.prototype.resizeListener=function(){var t,n={type:an.RESIZE,args:[$n.windowWidth(),$n.windowHeight()],date:pt()};this.Wn(n),null===(t=this.Fr)||void 0===t||t.onScreenPotentiallyChanged()},t.prototype.hashChangeListener=function(){var t={type:an.HASH_CHANGE,args:[this.P.anonymizeEmail(this.Br.href)],date:pt()};this.Wn(t)},t.prototype.visibilityChangeListener=function(){var t={type:an.VISIBILITY_CHANGE,args:[document.visibilityState],date:pt()};this.Wn(t)},F([tn("resize")],t.prototype,"resizeListener",null),F([tn("hashChange")],t.prototype,"hashChangeListener",null),F([tn("visibilityChange")],t.prototype,"visibilityChangeListener",null),t}(),Ri=function(t){function n(n,i,r,e,s,o,u){var h=t.call(this)||this;return h.ai=n,h.ci=i,h.Gr=r,h.Jr=e,h.Un=s,h.Yr=o,h.Hn=u,h.Wr=0,h}return z(n,t),n.prototype.init=function(){var t=this;this.ai.onEvent((function(n,i){i||t.Xr()})),this.Jr.onRecordingRequestSent((function(){t.Wr+=1,t.Kr()})),this.Gr.onActivityStopped((function(){t.Kr()})),this.Gr.onActivityResumed((function(){t.ci.isStarted()||t.$r()}))},n.prototype.onIframeRecordingUserEvent=function(t){this.Xr()},n.prototype.onStart=function(){this.Gr.start()},n.prototype.onStop=function(){this.Gr.stop()},n.prototype.Kr=function(){this.ci.isStarted()&&!this.Un.isDOMSerializationInProgress()&&!this.Gr.isUserActive()&&this.Wr>=2&&this.Qr()},n.prototype.Xr=function(){this.Gr.trackActivity(),this.Wr=0},n.prototype.Qr=function(){this.ci.stop(),this.Hn.emitRecordingStatusChange()},n.prototype.$r=function(){this.Un.setAnonymization(this.Yr.shouldUseAnonymization()),this.ci.start(),this.Hn.emitRecordingStatusChange()},n}(Xn);var Ni=/(@import\s*("([^"]+)"|'([^']+)'))|(url\s*\(\s*((("([^"\]]+)"|'([^'\]]+)')\s*)|([^)\]]+))\))/g;function Ti(t,n){var i=t.replace(Ni,(function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var r=t[3]||t[4],e=t[9]||t[10]||t[11],s=(r||e).trim().replace(/(\\)*\\(?:([a-fA-F0-9]{1,6})|(.))[\n\t\x20]?/g,(function(t,n,i,r){if("\\"===n)return t.slice(1);if(r)return r;var e=parseInt(i,16);return 55296<=e&&e<=57343||0===e||e>1114111?"":String.fromCodePoint(e)}));return(r?"@import ":"")+"url("+function(t){if(-1===t.indexOf('"'))return'"'+t+'"';if(-1===t.indexOf("'"))return"'"+t+"'";return t}(n(s)||s)+")"}));return i}function Oi(t){var n=csString.prototype.trim.call(t);if(""===t)return[];var i,r=(i=n,csString.prototype.split.call(i,/\s(.+)/)),e=r[0],s=r[1];return s?(K(e,",")||(s=function(t){return csString.prototype.split.call(t,/,(.+)/)[1]||""}(s)),J([ki(e)],Oi(s),!0)):[ki(e)]}function ki(t){return csString.prototype.split.call(t,/,$/)[0]}function Ci(t){return X(t,"data:")}function Ii(t){return X(t,"#")}var _i,xi=function(){function t(){this.Zr=!0}return t.prototype.enable=function(){this.Zr||(this.Zr=!0)},t.prototype.disable=function(){this.Zr&&(this.Zr=!1)},t.prototype.onEvent=function(t){this.Wn=t},t.prototype.onStyleSheetFound=function(t){this.te=t},t.prototype.serializeElementNode=function(t){this.Zr&&this.ne(t)},t.prototype.beforeSerializeChildren=function(t,n,i){return this.Zr&&this.ie(t,n),n},t.prototype.scanAttribute=function(t,n){this.ee(t,n)},t.prototype.scanText=function(t){v(t)&&csNodeparentNode.apply(t)&&p(csNodeparentNode.apply(t))&&this.scanCssString(t.data)},t.prototype.scanCssString=function(t){this.se(function(t){var n=[];return Ti(t,(function(t){return n.push(t),t})),n}(t))},t.prototype.ne=function(t){this.ee(t)},t.prototype.ie=function(t,n){var i=this;p(t)&&jn(n,(function(t){v(t)&&i.scanCssString(t.data)}))},t.prototype.ee=function(t,n){this.oe(t,n)||(this.ue(t,n),this.he(t,n))},t.prototype.oe=function(t,n){var i;if(d(t)&&(!n||"href"===n)&&t.href){var r=t.href;return null===(i=this.te)||void 0===i||i.call(this,r),this.ce(r),!0}return!1},t.prototype.ue=function(t,n){w(t)&&(n&&"src"!==n||!t.src||Ci(t.src)||null===t.getAttribute("src")||Ii(t.getAttribute("src"))||this.ce(t.src),n&&"srcset"!==n||!t.srcset||this.ae(t.srcset))},t.prototype.he=function(t,n){if((!n||"style"===n)&&t.hasAttribute("style")){var i=t.getAttribute("style");if("string"!=typeof i)throw new Error("Unexpected style: "+t.outerHTML);this.scanCssString(i)}},t.prototype.ae=function(t){this.se(Oi(t))},t.prototype.se=function(t){var n=this;return csArray.prototype.forEach.call(csArray.prototype.map.call(csArray.prototype.filter.call(csArray.prototype.filter.call(t,(function(t){return!Ci(t)})),(function(t){return!Ii(t)})),(function(t){return Mt(t)})),(function(t){return n.ce(t)}))},t.prototype.ce=function(t){var n,i={date:pt(),type:an.STATIC_RESOURCE_URL,args:[t]};null===(n=this.Wn)||void 0===n||n.call(this,i)},t}();!function(t){t.REQUEST_START="requestStart",t.DOM_INTERACTIVE="domInteractive"}(_i||(_i={}));var Li,Pi,Mi=function(){function t(t){this.fe=t.performance}return t.prototype.onEvent=function(t){this.Wn=t},t.prototype.start=function(){this.ve()&&this.le()},t.prototype.le=function(){var t={args:this.de(),date:pt(),type:an.PERFORMANCE_TIMINGS};this.Wn(t)},t.prototype.ve=function(){return!(!this.fe||!this.fe.timing)},t.prototype.de=function(){return[{performanceTiming:_i.REQUEST_START,timestamp:this.fe.timing.requestStart},{performanceTiming:_i.DOM_INTERACTIVE,timestamp:this.fe.timing.domInteractive}]},t}(),Di=function(t){function n(n){var i=t.call(this)||this;return i.we=n,i.pe=new Map,i}return z(n,t),n.prototype.init=function(){this.ye(),this.ge()},n.prototype.ge=function(){var t=this;this.Se=new csMutationObserver((function(n){t.handleMutations(n)}))},n.prototype.ye=function(){var t=this;this.Ee()&&(this.Ae=ui({target:Element.prototype,methodName:"attachShadow",hook:function(n){var i=n.context,r=n.result;return t.handleAttachShadow(i,r)}})),this.be()&&(this.Re=ui({target:Element.prototype,methodName:"createShadowRoot",hook:function(n){var i=n.context,r=n.result;return t.handleAttachShadow(i,r)}}))},n.prototype.onChildListMutation=function(t){this.Ne=t},n.prototype.onCharacterDataMutation=function(t){this.Te=t},n.prototype.onAttributesMutation=function(t){this.Oe=t},n.prototype.onAttachShadowMutation=function(t){this.ke=t},n.prototype.observe=function(t,n){this.isStarted&&this.Se.observe(t,n)},n.prototype.onStart=function(){this.Ae&&this.Ae.activate(),this.Re&&this.Re.activate()},n.prototype.onStop=function(){this.Ae&&this.Ae.deactivate(),this.Re&&this.Re.deactivate(),this.we.clearQueue(),this.Se.disconnect()},n.prototype.flushPendingMutations=function(){if(this.isStarted){this.we.runPendingTasks();var t=this.Se.takeRecords();this.handleMutations(t,!0)}},n.prototype.Ee=function(){return window.Element&&window.Element.prototype&&"function"==typeof window.Element.prototype.attachShadow},n.prototype.be=function(){return window.Element&&window.Element.prototype&&"function"==typeof window.Element.prototype.createShadowRoot},n.prototype.handleMutations=function(t,n){var i=this;void 0===n&&(n=!1);var r=pt(),e=t.length>1?this.Ce(t):t;this.we.isEmpty()&&this.pe.clear(),this.Ie(e);for(var s=function(t){var s=e[t];s.date=r,o.we.schedule((function(){i.processMutation(s,i.pe)}),n)},o=this,u=0;u<e.length;u+=1)s(u)},n.prototype.Ce=function(t){for(var n=new Map,i=0;i<t.length;i+=1){if("attributes"===(f=t[i]).type){var r=f.target,e=f.attributeNamespace,s=f.attributeName,o="".concat(e||""," ").concat(s),u=n.get(r),h=Qn.getAttributeNS(r,e,s)===f.oldValue?"none":"last";if(u)u.has(o)||u.set(o,h);else{var c=new Map;c.set(o,h),n.set(r,c)}}}var a=[];for(i=t.length-1;i>=0;i-=1){var f;if("attributes"===(f=t[i]).type){r=f.target,e=f.attributeNamespace,s=f.attributeName,o="".concat(e||""," ").concat(s);"last"===(u=n.get(r)).get(o)&&(csArray.prototype.push.call(a,f),u.set(o,"none"))}else csArray.prototype.push.call(a,f)}return csArray.prototype.reverse.call(a)},n.prototype.handleAttachShadow=function(t,n){this.ke({shadowRoot:n,date:pt(),target:t})},n.prototype.processMutation=function(t,n){switch(t.type){case"attributes":this.Oe(t);break;case"characterData":this.Te(t);break;case"childList":this.Ne(t,n);break;default:throw new Error("mutation type is not supported")}},n.prototype.Ie=function(t){var n=this;csArray.prototype.forEach.call(t,(function(t){jn(t.addedNodes,(function(t){var i=n.pe.get(t);i?n.pe.set(t,i+1):n.pe.set(t,1)}))}))},F([tn("handleMutations")],n.prototype,"handleMutations",null),F([Cn("handleAttachShadow")],n.prototype,"handleAttachShadow",null),F([Cn("processMutation")],n.prototype,"processMutation",null),n}(Xn),Ui=function(t){function n(n,i){var r=t.call(this,n)||this;return r.nn=i,r._e={subtree:!0,attributes:!0,childList:!0,characterData:!0,attributeOldValue:!0,characterDataOldValue:!0},r}return z(n,t),n.prototype.init=function(){t.prototype.init.call(this),this.Sn()},n.prototype.Sn=function(){var t=this;this.nn.onDocumentIdentified((function(n){t.observe(n,t._e)}))},n}(Di),ji=function(){function t(t){this.xe=[],this.Le=[],this.Pt={},this.Mt=t}return t.prototype.setQueryParams=function(t){var n=this;csArray.prototype.forEach.call(Object.keys(t),(function(i){n.Pt[i]=t[i]}))},t.prototype.removeQueryParams=function(t){var n=this;t?csArray.prototype.forEach.call(t,(function(t){delete n.Pt[t]})):this.Pt={}},t.prototype.onBeaconSuccess=function(t){csArray.prototype.push.call(this.xe,t)},t.prototype.onBeaconFailure=function(t){csArray.prototype.push.call(this.Le,t)},t.prototype.send=function(t){var n=this,i=nt.toQuery(B(B({},this.Pt),{ct:on.UNCOMPRESSED}));this.Pe(i,t)?csArray.prototype.forEach.call(this.xe,(function(t){return t()})):csArray.prototype.forEach.call(this.Le,(function(t){return t(n.Pt)}))},t.prototype.Pe=function(t,n){try{if("function"!=typeof csNavigatorsendBeacon)return!1;var i=csNavigatorsendBeacon("".concat(this.Mt,"?").concat(t),n||"");if(i)return i}catch(t){}return"function"==typeof navigator.sendBeacon&&navigator.sendBeacon("".concat(this.Mt,"?").concat(t),n||"")},t}();!function(t){t[t.TAP=0]="TAP",t[t.LONG_PRESS=1]="LONG_PRESS",t[t.DRAG=2]="DRAG",t[t.FLICK=3]="FLICK",t[t.PINCH_IN=4]="PINCH_IN",t[t.PINCH_OUT=5]="PINCH_OUT"}(Li||(Li={})),function(t){t[t.UP=1]="UP",t[t.DOWN=2]="DOWN",t[t.LEFT=3]="LEFT",t[t.RIGHT=4]="RIGHT"}(Pi||(Pi={}));var qi=function(){function t(t,n,i){this.Me=t,this.nn=n,this.rn=i}return t.prototype.start=function(){var n=this;this.Me.subscribe(t.De,(function(t,i){return n.processGesture(t,i)}))},t.prototype.stop=function(){this.Me.unsubscribe(t.De)},t.prototype.onEvent=function(t){this.Wn=t},t.prototype.processGesture=function(t,n){if(t.target&&(!f(t.target)||!this.rn.isSensitiveChild(t.target))){var i=this.nn.getId(t.target);if(i)switch(t.type){case Li.DRAG:case Li.FLICK:this.Ue(vn.SWIPE,t,i,n);break;case Li.LONG_PRESS:this.Ue(vn.LONG_PRESS,t,i,n);break;case Li.TAP:this.Ue(vn.TAP,t,i,n);break;case Li.PINCH_IN:this.Ue(vn.PINCH_IN,t,i,n);break;case Li.PINCH_OUT:this.Ue(vn.PINCH_OUT,t,i,n)}}},t.prototype.Ue=function(t,n,i,r){var e=this.je(n,t,r),s={type:an.GESTURE_RECOGNITION,args:[i,e],date:pt()};this.Wn(s)},t.prototype.je=function(t,n,i){var r={type:n};if(t.direction&&(r.direction=t.direction),t.distance&&(r.distance=t.distance),t.velocity&&(r.velocity=t.velocity),n===vn.TAP&&i.changedTouches&&1===i.changedTouches.length){var e=i.changedTouches[0];r.pageX=gn(e.pageX,1),r.pageY=gn(e.pageY,1)}return r},t.De="RecordingGesturesTracker",F([xn()],t.prototype,"processGesture",null),t}(),Hi=function(t){function n(n){var i=t.call(this,n)||this;return i.name=n.name,i.publicId=n.publicId,i.systemId=n.systemId,i.nodeType=10,i}return z(n,t),n}(pi),zi=function(t){var n;this.name=t.name,this.value=t.value,this.namespaceURI=null!==(n=t.namespaceURI)&&void 0!==n?n:""},Bi=function(t){function n(n){var i=t.call(this,n)||this;return i.data=n.data,i.nodeType=3,i}return z(n,t),n}(pi),Fi=function(t){function n(n){var i=t.call(this,n)||this;return i.data=n.data,i.nodeType=4,i}return z(n,t),n}(pi),Vi=function(t){function n(n){var i=t.call(this,n)||this;return i.data=n.data,i.nodeType=8,i}return z(n,t),n}(pi),Gi=function(t){function n(i){var r=t.call(this,i)||this;return r.baseURI=n.getBaseURI(i),r.children=[],r.nodeType=9,r}return z(n,t),n.getBaseURI=function(t){var n=t.baseURI;if(null==n){var i=t.getElementsByTagName("base");n=0!==i.length?i[0].href:t.URL}return n},n}(pi),Ji=function(t){function n(n){var i=t.call(this,n)||this;return i.mode=n.mode,i.children=[],i.nodeType=11,i}return z(n,t),n}(pi),Yi=function(){function t(n){for(var i=function(i){var e=csArray.prototype.map.call(csArray.prototype.filter.call(n,(function(t){return t[i]})),(function(t){return function(n,r,e,s){return t[i](n,r,e,s)}})),s=t.qe(e);r[i]=s},r=this,e=0,s=t.He;e<s.length;e++){i(s[e])}}return t.create=function(n){return new t(n)},t.qe=function(t){var n=csArray.prototype.map.call(t,(function(t){return function(n,i,r,e){return t(n,i,r,e)||i}})),i=n[0],r=n[1],e=n[2],s=n[3],o=n[4];switch(t.length){case 1:return t[0];case 2:return function(t,n,e,s){return r(t,i(t,n,e,s),e,s)};case 3:return function(t,n,s,o){return e(t,r(t,i(t,n,s,o),s,o),s,o)};case 4:return function(t,n,o,u){return s(t,e(t,r(t,i(t,n,o,u),o,u),o,u),o,u)};case 5:return function(t,n,u,h){return o(t,s(t,e(t,r(t,i(t,n,u,h),u,h),u,h),u,h),u,h)};default:return function(n,i,r,e){for(var s=i,o=0;o<t.length;o++)s=t[o](n,i,r,e)||s;return i}}},t.He=["beforeSerializeAttributes","beforeSerializeChildren","afterSerialize","afterSerializeShadowRoot","serializeElementNode","serializeAttribute","serializeTextNode","serializeCDATASectionNode","serializeCommentNode","serializeShadowRootNode"],t}(),Wi=function(){function t(t){this.ze=Yi.create(t)}return t.prototype.isAsynchronous=function(){return!0},t.prototype.serialize=function(t,n){var i,r=B({},n),e=t.nodeType;switch(e){case 1:i=this.Be(t,r);break;case 3:i=this.Fe(t,r);break;case 4:i=this.Ve(t,r);break;case 7:case 8:i=this.Ge(t,r);break;case 10:i=new Hi(t);break;case 9:i=this.Je(t,r);break;case 11:i=this.Ye(t,r);break;default:throw new Error("serialization is not supported (nodeType: ".concat(e,")"))}return this.ze.afterSerialize(t,i,r),i},t.prototype.Be=function(t,n){var i=new yi(t);this.ze.serializeElementNode(t,i,n),i.attributes=this.We(t,n);var r=csElementshadowRoot.apply(t);return r&&(i.shadowRoot=this.Xe(r,n)),i.children=this.Ke(t,n),i},t.prototype.We=function(t,n){var i=Un(t.attributes);i=this.ze.beforeSerializeAttributes(t,i,n);for(var r=0;r<i.length;++r){var e=i[r];i[r]=this.$e(t,e,n)}return i},t.prototype.$e=function(t,n,i){var r=new zi(n);return this.ze.serializeAttribute(t,n,r,i),r},t.prototype.runBeforeSerializeChildrenHook=function(t,n,i){var r=i||csNodechildNodes.apply(t);return r=n.excludedNodes?qn(r,(function(t){return!n.excludedNodes.get(t)})):r,Un(r=this.ze.beforeSerializeChildren(t,r,n))},t.prototype.Ke=function(t,n){if(n.skipChildrenSerialization)return[];for(var i=this.runBeforeSerializeChildrenHook(t,n),r=0;r<i.length;++r){var e=i[r];i[r]=this.serialize(e,n)}return i},t.prototype.Fe=function(t,n){var i=new Bi(t);return this.ze.serializeTextNode(t,i,n),i},t.prototype.Ve=function(t,n){var i=new Fi(t);return this.ze.serializeCDATASectionNode(t,i,n),i},t.prototype.Ge=function(t,n){var i=new Vi(t);return this.ze.serializeCommentNode(t,i,n),i},t.prototype.Je=function(t,n){var i=new Gi(t);return i.children=this.Ke(t,n),i},t.prototype.Xe=function(t,n){var i=new Ji(t);return this.ze.serializeShadowRootNode(t,i,n),i.children=this.Ke(t,n),this.ze.afterSerializeShadowRoot(t,i,n),i},t.prototype.Ye=function(t,n){if(t.mode)return this.Xe(t,n);throw new Error("Not implemented yet.")},t}();function Xi(){return V(this,void 0,void 0,(function(){return G(this,(function(t){switch(t.label){case 0:return[4,new Promise((function(t){setTimeout((function(){t()}),0)}))];case 1:return t.sent(),[2]}}))}))}var Ki=function(){function t(t){this.nn=t,this.Qe=!1,this.Ze=new Map,this.ns={},this.rs=new Map,this.es=new Map,this.ss=new Set,this.us=new Map}return t.prototype.beforeSerializeChildren=function(t,n){var i=this;return this.Qe?qn(n,(function(t){return!i.isAddedNodeDuringSerialization(t)})):n},t.prototype.beforeSerializeAttributes=function(t,n,i){if(!this.Qe)return n;var r=this.nn.getId(t);if(!r)return n;var e=this.es.get(r);return e?csArray.prototype.filter.call(n,(function(t){var n="".concat(t.name).concat(t.namespaceURI||""),i=e.get(n);return!(i&&null===i.value)})):n},t.prototype.serializeTextNode=function(t,n,i){if(this.Qe){var r=this.rs.get(n.csId);r&&(n.data=r)}},t.prototype.serializeCommentNode=function(t,n){if(this.Qe){var i=this.rs.get(n.csId);i&&(n.data=i)}},t.prototype.afterSerialize=function(t,n,i){this.Qe&&(csNodeparentNode.apply(t)&&!this.getSerializedNodeByNode(csNodeparentNode.apply(t))||i.skipRegisterNode||this.hs(n,i))},t.prototype.afterSerializeShadowRoot=function(t,n,i){this.Qe&&(i.skipRegisterNode||this.hs(n,i))},t.prototype.enable=function(){this.Qe=!0,this.cs()},t.prototype.disable=function(){this.Qe=!1,this.cs()},t.prototype.setDefaultSerializationOptions=function(t){this.ns=t},t.prototype.getSerializedNodeById=function(t){var n;return null===(n=this.Ze.get(t))||void 0===n?void 0:n.serializedNode},t.prototype.getSerializedNodeByNode=function(t){var n,i=this.nn.getId(t);if(i)return null===(n=this.Ze.get(i))||void 0===n?void 0:n.serializedNode},t.prototype.getOptions=function(t){var n,i=this.nn.getId(t);return i&&(null===(n=this.Ze.get(i))||void 0===n?void 0:n.options)||this.ns},t.prototype.registerInitialCharacterData=function(t,n){this.rs.get(t)||this.rs.set(t,n)},t.prototype.registerInitialAttributes=function(t,n,i,r){var e=this.es.get(t),s="".concat(i).concat(n||"");if(e){if(e.has(s))return}else e=new Map,this.es.set(t,e);var o={name:i,namespaceURI:n||"",value:r};e.set(s,o)},t.prototype.markAddedTreeAsProcessed=function(t){for(var n,i=document.createNodeIterator(t,NodeFilter.SHOW_ALL,null,!1);n=i.nextNode();){var r=this.nn.getId(n);r&&this.ss.add(r)}},t.prototype.markRemovedNodeAsProcessed=function(t,n,i){var r=this.nn.getId(i),e=this.nn.getId(t);if(r&&e){var s=this.us.get(r);if(s)csArray.prototype.push.call(s.removedNodeIds,e),csArray.prototype.indexOf.call(s.childNodeIds,e)<0&&csArray.prototype.push.call(s.childNodeIds,e);else{for(var o=[],u=n?this.nn.getId(n):null,h=0;h<csNodechildNodes.apply(i).length;h+=1){var c=this.nn.getId(csNodechildNodes.apply(i)[h]);c&&!this.ss.has(c)&&(u&&c===u&&csArray.prototype.push.call(o,e),csArray.prototype.push.call(o,c))}null===u&&csArray.prototype.push.call(o,e);var a=[e];this.us.set(r,{childNodeIds:o,removedNodeIds:a})}}},t.prototype.addSerializedChildToParent=function(t,n,i){var r=this.getSerializedNodeByNode(t);r&&Qi(r)&&this.fs(n,r,i)},t.prototype.isAddedNodeDuringSerialization=function(t){var n=this.nn.getId(t);return!!n&&this.ss.has(n)},t.prototype.getInitialIndexInParent=function(t,n){var i=this.nn.getId(n),r=this.nn.getId(t);if(!i||!r)return-1;var e=this.us.get(i);return e?csArray.prototype.indexOf.call(e.childNodeIds,r):-1},t.prototype.cs=function(){this.Ze.clear(),this.rs.clear(),this.es.clear(),this.ss.clear(),this.us.clear()},t.prototype.hs=function(t,n){t.csId&&(this.vs(t.csId,t,n),this.ls(t.csId,t),this.Ze.set(t.csId,{serializedNode:t,options:n}))},t.prototype.vs=function(t,n,i){if(function(t){return t instanceof yi}(n)){var r=this.es.get(t);if(r){for(var e=0,s=n.attributes;e<s.length;e++){var o=s[e],u="".concat(o.name).concat(o.namespaceURI||""),h=r.get(u);h&&null!==h.value&&(o.value=h.value,r.delete(u))}r.forEach((function(t){null!==t.value&&csArray.prototype.push.call(n.attributes,{name:t.name,value:t.value,namespaceURI:t.namespaceURI,anonymized:i.withAnonymization||!1})}))}}},t.prototype.fs=function(t,n,i){(i.csId||$i(i))&&(t>=0?csArray.prototype.splice.call(n.children,t,0,i):$i(i)&&csArray.prototype.push.call(n.children,i))},t.prototype.ls=function(t,n){var i;if(Qi(n)){var r=this.us.get(t);if(r)for(var e=0,s=r.removedNodeIds;e<s.length;e++){var o=s[e],u=csArray.prototype.indexOf.call(r.childNodeIds,o);if(-1!==u){var h=null===(i=this.Ze.get(o))||void 0===i?void 0:i.serializedNode;void 0!==h&&this.fs(u,n,h)}}}},t}();function $i(t){return"artificial"in t}function Qi(t){return"children"in t}var Zi,tr,nr={taskTime:25},ir=function(t){function n(n,i,r,e){void 0===r&&(r=new Ki(i)),void 0===e&&(e=nr);var s=t.call(this,J([r],n,!0))||this;return s.ds=i,s.ws=r,s.ps=e,s.ys=0,s.gs=s.ps.taskTime,s}return z(n,t),n.prototype.isAsynchronous=function(){return!0},n.prototype.handleMutationAttribute=function(t,n){var i=n[0],r=n[1],e=n[2];this.ws.getSerializedNodeById(i)||this.ws.registerInitialAttributes(i,r,e,t)},n.prototype.handleMutationCharacterData=function(t,n){var i=n[0];this.ws.getSerializedNodeById(i)||this.ws.registerInitialCharacterData(i,t.oldValue||"")},n.prototype.serializeMutationChildList=function(t,n,i){var r=this.Ar(t,n,i);return this.Ss(t),{removedNodes:this.Er(t,n),addedNodes:r}},n.prototype.startSerializeAsync=function(t,n){return void 0===n&&(n={}),V(this,void 0,void 0,(function(){return G(this,(function(i){return this.ys+=1,this.ws.setDefaultSerializationOptions(n),[2,this.Es(t,n)]}))}))},n.prototype.Ar=function(t,n,i){var r=[],e=null;if(t.nextSibling){var s=this.ds.getId(t.nextSibling);e=void 0!==s?s:null}for(var o=this.ds.getId(t.target),u=0;u<t.addedNodes.length;u+=1){var h=t.addedNodes[u],c=this.serialize(h,{excludedNodes:i,skipRegisterNode:!0,withAnonymization:n}),a=i.get(h);a&&i.set(h,a-1),csArray.prototype.push.call(r,[o,e,c])}return r},n.prototype.Ss=function(t){for(var n=0;n<t.addedNodes.length;n+=1){var i=t.addedNodes[n];this.ws.markAddedTreeAsProcessed(i)}},n.prototype.As=function(t,n){if(!n)return-1;var i=this.ws.getInitialIndexInParent(t,n);return i>=0?i:csArray.prototype.indexOf.call(csNodechildNodes.apply(n),t)},n.prototype.Er=function(t,n){for(var i=[],r=0;r<t.removedNodes.length;r+=1){var e=t.removedNodes[r];if(this.ws.markRemovedNodeAsProcessed(e,t.nextSibling,t.target),this.bs(e))this.Rs(e)&&this.Ns(e,n);else{var s=this.serialize(e,{withAnonymization:n});if(this.Rs(t.target)){var o=this.As(e,t.target);this.ws.addSerializedChildToParent(t.target,o,s)}}var u=this.ds.getId(e);u&&csArray.prototype.push.call(i,[u])}return i},n.prototype.Ns=function(t,n){for(var i=0;i<csNodechildNodes.apply(t).length;i+=1){var r=csNodechildNodes.apply(t)[i];if(this.Rs(r))this.Ns(r,n);else if(!this.ws.isAddedNodeDuringSerialization(r)){var e=this.serialize(r,{withAnonymization:n}),s=this.As(r,t);this.ws.addSerializedChildToParent(t,s,e)}}},n.prototype.Rs=function(t){return!!this.ws.getSerializedNodeByNode(t)},n.prototype.bs=function(t){return this.Rs(t)||this.ws.isAddedNodeDuringSerialization(t)},n.prototype.Es=function(t,n){return void 0===n&&(n={}),V(this,void 0,void 0,(function(){var i,r,e,s,o,u,h,c,a,v,l;return G(this,(function(d){switch(d.label){case 0:return i=this.ys,r=pt(),this.ws.enable(),n.skipChildrenSerialization=!0,e=[t],[4,Xi()];case 1:if(d.sent(),i!==this.ys)return[2,null];this.Ts=csDate.now(),this.serialize(t,n),d.label=2;case 2:if(!(e.length>0))return[3,7];s=csArray.prototype.pop.call(e),o=this.ws.getOptions(s),u=this.runBeforeSerializeChildrenHook(s,o),h=csArray.prototype.shift.call(u),d.label=3;case 3:return h?csDate.now()-this.Ts>this.gs?[4,Xi()]:[3,5]:[3,6];case 4:if(d.sent(),i!==this.ys)return[2,null];this.Ts=csDate.now(),d.label=5;case 5:return this.bs(h)?(h=csArray.prototype.shift.call(u),[3,3]):(csArray.prototype.push.call(e,h),c=this.serialize(h,o),a=this.As(h,s),this.ws.addSerializedChildToParent(s,a,c),f(h)&&csElementshadowRoot.apply(h)&&(v=csElementshadowRoot.apply(h),csArray.prototype.push.call(e,v)),h=csArray.prototype.shift.call(u),[3,3]);case 6:return[3,2];case 7:if(!(l=this.ws.getSerializedNodeByNode(t)))throw this.ws.disable(),new Error("traverseAndSerialize : fail to serialize");return this.ws.disable(),[2,{args:[l],date:r,type:an.INITIAL_DOM}]}}))}))},n}(Wi),rr=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return z(n,t),n.prototype.isAsynchronous=function(){return!1},n}(Wi),er=function(){function t(){this.Os=!1}return t.prototype.isSupported=function(){return"object"==typeof window.customElements&&"function"==typeof window.customElements.whenDefined&&"function"==typeof window.Promise},t.prototype.start=function(){!this.Os&&this.isSupported()&&(this.ks?this.ks.clear():this.ks=new Set,this.Os=!0)},t.prototype.stop=function(){this.Os&&(this.Os=!1)},t.prototype.onEvent=function(t){this.Wn=t},t.prototype.register=function(t){return V(this,void 0,void 0,(function(){return G(this,(function(n){switch(n.label){case 0:return this.ks.has(t)?[2]:(this.ks.add(t),[4,window.customElements.whenDefined(t)]);case 1:return n.sent(),this.Cs(t),[2]}}))}))},t.prototype.Cs=function(t){if(this.Os){var n={type:an.CUSTOM_ELEMENT_REGISTRATION,date:pt(),args:[t]};this.Wn(n)}},t.prototype.getProcessor=function(){return new(function(){function t(t){this.Is=t}return t.prototype.serializeElementNode=function(t){(function(t){return f(t)&&csString.prototype.indexOf.call(t.tagName,"-")>0&&-1===csString.prototype.indexOf.call(t.tagName,":")&&-1===csString.prototype.indexOf.call(t.tagName,'"')&&-1===csString.prototype.indexOf.call(t.tagName,",")&&csArray.prototype.indexOf.call(E,csString.prototype.toLocaleLowerCase.call(t.tagName))<0})(t)&&this.Is.register(csString.prototype.toLowerCase.call(t.tagName))},t}())(this)},F([tn("CustomElementRegistrationTracker: register")],t.prototype,"register",null),t}(),sr=function(){function t(){this._s=new Map,this.xs=document.implementation.createHTMLDocument("")}return t.prototype.beforeSerializeChildren=function(t,n){if(!p(t))return n;var i=this.Ls(t);if(null===i||0===i.length)return n;if(function(t){for(var n=t.length,i=0;i<n;i++)switch(csString.prototype.charCodeAt.call(t,i)){case 9:case 10:case 11:case 12:case 13:case 32:case 160:continue;default:return!1}return!0}(t.textContent)){var r=Un(n);return csArray.prototype.push.call(r,this.Ps(i)),r}var e=this.Ms(t);if(e===i.length)return n;for(var s=new csArray(i.length-e),o=e,u=0;o<i.length;o+=1,u+=1)s[u]=i[o];r=Un(n);return csArray.prototype.push.call(r,this.Ps(s)),r},t.prototype.Ms=function(t){var n=this._s.get(t.textContent);if(n)return n;var i=t.cloneNode(!0);i.textContent=t.textContent,this.xs.head.appendChild(i);var r=this.Ls(i);return n=r?r.length:0,this._s.set(t.textContent,n),this.xs.head.removeChild(i),n},t.prototype.Ls=function(t){try{if(t.disabled)return null;var n=t.sheet;return n?n.cssRules||n.rules:null}catch(t){if("SecurityError"!==t.name&&"InvalidAccessError"!==t.name)throw t;return null}},t.prototype.Ps=function(t){var n="";jn(t,(function(t){return n+=t.cssText}));var i=document.createTextNode(n);return i.__contentsquare_artificial=!0,i},t}(),or=function(){function t(t,n){this.nn=t,this.ui=n,this.Ds=1}return t.prototype.isAdoptedStyleSheetsSupported=function(){return"adoptedStyleSheets"in Document.prototype&&"queueMicrotask"in window},t.prototype.init=function(){this.isAdoptedStyleSheetsSupported()&&(this.Us=new Set,this.js=hi(window.ShadowRoot.prototype,"adoptedStyleSheets",this.qs.bind(this)),this.Hs=hi(window.Document.prototype,"adoptedStyleSheets",this.qs.bind(this)))},t.prototype.onEvent=function(t){this.Wn=t},t.prototype.start=function(){this.isAdoptedStyleSheetsSupported()&&(this.zs(),this.js&&this.js.activate(),this.Hs&&this.Hs.activate())},t.prototype.stop=function(){this.isAdoptedStyleSheetsSupported()&&(this.Bs(),this.Us.clear(),this.js&&this.js.deactivate(),this.Hs&&this.Hs.deactivate())},t.prototype.serializeDocumentNode=function(t){t.adoptedStyleSheets&&this.qs(t,t.adoptedStyleSheets)},t.prototype.serializeShadowRootNode=function(t){t.adoptedStyleSheets&&this.qs(t,t.adoptedStyleSheets)},t.prototype.zs=function(){this.ui.registerToInsertRuleInterceptor(this.Fs.bind(this)),this.ui.registerToDeleteRuleInterceptor(this.Vs.bind(this))},t.prototype.Bs=function(){var t,n;null===(t=this.Nr)||void 0===t||t.call(this),null===(n=this.Tr)||void 0===n||n.call(this)},t.prototype.qs=function(t,n){var i=this;csArray.prototype.forEach.call(n,(function(t){return i.Gs(t)}));var r=csArray.prototype.map.call(n,(function(t){return i.Js(t)})),e=this.nn.getId(t);e&&queueMicrotask((function(){var t={type:an.SET_ADOPTED_STYLE_SHEETS,args:[e,r],date:pt()};i.Wn(t)}))},t.prototype.Js=function(t){return t.__adopted_stylesheet_id},t.prototype.Fs=function(t,n){var i=n[0],r=n[1],e=this.Ys(t);if(e){var s={date:pt(),type:an.ADOPTED_STYLESHEET_RULE_INSERT,args:bt(r)?[e,i,r]:[e,i]};this.Wn(s)}},t.prototype.Vs=function(t,n){var i=n[0],r=this.Ys(t);if(r&&r){var e={date:pt(),type:an.ADOPTED_STYLESHEET_RULE_DELETE,args:[r,i]};this.Wn(e)}},t.prototype.Ys=function(t){return this.Us.has(t)&&t.__adopted_stylesheet_id?t.__adopted_stylesheet_id:null},t.prototype.Gs=function(t){if(!this.Us.has(t)){var n=this.Ds++;t.__adopted_stylesheet_id=n,this.Us.add(t);var i=this.Ws(t),r={type:an.REGISTER_ADOPTED_STYLE_SHEET,args:[n,i],date:pt()};this.Wn(r)}},t.prototype.Ws=function(t){var n=[];try{n=csArray.prototype.map.call(t.cssRules,(function(t){return t.cssText}))}catch(t){Wt.warn("AdoptedStylesheetsTracker.serializeStyleSheet: could not extract cssRules")}return{cssRules:n}},t}();!function(t){t.replayRecordingUnmaskedUrlRegex="replayRecordingUnmaskedUrlRegex",t.replayRecordingMaskedUrlRegex="replayRecordingMaskedUrlRegex",t.replayRecordingUnmaskedUrlRegexRules="replayRecordingUnmaskedUrlRegexRules",t.replayRecordingMaskedUrlRegexRules="replayRecordingMaskedUrlRegexRules"}(Zi||(Zi={})),function(t){t.START="start",t.NOT_START="not-start",t.END="end",t.NOT_END="not-end",t.CONTAIN="contain",t.NOT_CONTAIN="not-contain",t.EXACT="exact",t.NOT_EXACT="not-exact"}(tr||(tr={}));var ur,hr=function(){function t(t,n,i,r){this.Xs=t,this.L=n,this.K=i,this.Ks=r}return t.prototype.init=function(){this.$s()},t.prototype.shouldUseAnonymization=function(){if(this.Xs.isAllowedByConsent()){switch(this.L.anonymisationMethod){case null:case Zi.replayRecordingMaskedUrlRegex:return!(!this.L.replayRecordingMaskedUrlRegex||!this.L.replayRecordingMaskedUrlRegex.test(this.K.getAnonymizedUrl()));case Zi.replayRecordingMaskedUrlRegexRules:return this.Ks.evaluateUrl(this.K.getAnonymizedUrl())}return!1}switch(this.L.anonymisationMethod){case null:case Zi.replayRecordingUnmaskedUrlRegex:return!(this.L.replayRecordingUnmaskedUrlRegex&&this.L.replayRecordingUnmaskedUrlRegex.test(this.K.getAnonymizedUrl()));case Zi.replayRecordingUnmaskedUrlRegexRules:return!this.Ks.evaluateUrl(this.K.getAnonymizedUrl())}return!0},t.prototype.$s=function(){this.L.anonymisationMethod===Zi.replayRecordingMaskedUrlRegexRules&&this.L.replayRecordingMaskedUrlRegexRules?this.Ks.setRegexRules(this.L.replayRecordingMaskedUrlRegexRules):this.L.anonymisationMethod===Zi.replayRecordingUnmaskedUrlRegexRules&&this.L.replayRecordingUnmaskedUrlRegexRules&&this.Ks.setRegexRules(this.L.replayRecordingUnmaskedUrlRegexRules)},t}(),cr=function(){function t(){}return t.isRecordingSupported=function(){return"MutationObserver"in window&&"visibilityState"in document},t.isAsyncSerializationSupported=function(){return"Promise"in window&&"findIndex"in csArray.prototype},t}(),ar=function(){function t(){this.Bn=!1,this.Qs=[],this.Zs=[],this.no()}return t.prototype.registerToInsertRuleInterceptor=function(t){var n=this;return this.io(this.Qs,t)?function(){}:(csArray.prototype.push.call(this.Qs,t),function(){n.Qs=csArray.prototype.filter.call(n.Qs,(function(n){return n!==t}))})},t.prototype.registerToDeleteRuleInterceptor=function(t){var n=this;return this.io(this.Zs,t)?function(){}:(csArray.prototype.push.call(this.Zs,t),function(){n.Zs=csArray.prototype.filter.call(n.Zs,(function(n){return n!==t}))})},t.prototype.start=function(){var t,n;this.Bn||(this.Bn=!0,null===(t=this.ro)||void 0===t||t.activate(),null===(n=this.eo)||void 0===n||n.activate())},t.prototype.stop=function(){var t,n;this.Bn&&(this.Bn=!1,null===(t=this.ro)||void 0===t||t.deactivate(),null===(n=this.eo)||void 0===n||n.deactivate())},t.prototype.io=function(t,n){return csArray.prototype.indexOf.call(t,n)>-1},t.prototype.so=function(t,n){csArray.prototype.forEach.call(this.Qs,(function(i){return i(t,n)}))},t.prototype.oo=function(t,n){csArray.prototype.forEach.call(this.Zs,(function(i){return i(t,n)}))},t.prototype.no=function(){var t=this;this.uo()&&(this.ro=ui({target:window.CSSStyleSheet.prototype,methodName:"insertRule",hook:function(n){var i=n.context,r=n.args;t.so(i,r)}})),this.ho()&&(this.eo=ui({target:window.CSSStyleSheet.prototype,methodName:"deleteRule",hook:function(n){var i=n.context,r=n.args;return t.oo(i,r)}}))},t.prototype.uo=function(){var t,n;return"function"==typeof(null===(n=null===(t=window.CSSStyleSheet)||void 0===t?void 0:t.prototype)||void 0===n?void 0:n.insertRule)},t.prototype.ho=function(){var t,n;return"function"==typeof(null===(n=null===(t=window.CSSStyleSheet)||void 0===t?void 0:t.prototype)||void 0===n?void 0:n.deleteRule)},t}(),fr=function(){function t(t){this.co={},this.ao=new Gn(t)}return t.prototype.save=function(t){var n=t.key,i=t.metadata,r=t.events;this.ao.isThresholdReached()||(this.ao.addString(n),"string"==typeof r?this.ao.addString(r):this.ao.addArrayBuffer(r),this.ao.isThresholdReached()||(this.co[n]={metadata:i,events:r}))},t.prototype.recover=function(t){var n=this,i=[];csArray.prototype.forEach.call(this.fo(),(function(t){var r=n.co[t];void 0!==r&&(delete r.metadata.datatype,csArray.prototype.push.call(i,r),n.vo(t))})),0!==i.length&&(t(i),this.ao.reset())},t.prototype.fo=function(){return Object.keys(this.co)},t.prototype.vo=function(t){delete this.co[t]},t}();!function(t){t[t.NOT_STARTED=0]="NOT_STARTED",t[t.OPEN_IN_PROGRESS=1]="OPEN_IN_PROGRESS",t[t.OPEN_FAILED=2]="OPEN_FAILED",t[t.READY=3]="READY"}(ur||(ur={}));var vr,lr,dr,wr,pr=function(){function t(t,n,i){this.lo=t,this.do=i,this.wo=ur.NOT_STARTED,this.po=[],this.yo=0,this.mo=self.origin,this.So="object"==typeof window?"":"worker-",this.ao=new Gn(n),this.Eo()}return t.prototype.Eo=function(){return V(this,void 0,void 0,(function(){return G(this,(function(t){switch(t.label){case 0:return[4,this.Ao()];case 1:return t.sent(),this.wo===ur.READY?this.bo():this.do(this.po),[2]}}))}))},t.prototype.bo=function(){var t=this;csArray.prototype.forEach.call(this.po,(function(n){t.save(n)})),this.po=[]},t.prototype.save=function(t){return V(this,void 0,void 0,(function(){var n,i,r;return G(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),this.wo===ur.OPEN_IN_PROGRESS?(csArray.prototype.push.call(this.po,t),[2]):this.wo!==ur.READY||this.ao.isThresholdReached()?[2]:(n=t.key,i=t.metadata,r=t.events,this.ao.addString(n),"string"==typeof r?this.ao.addString(r):this.ao.addArrayBuffer(r),this.ao.isThresholdReached()?[2]:[4,this.Ro.put("".concat(this.mo,"/").concat(n),new Response(r,{headers:i}))]);case 1:return e.sent(),[3,3];case 2:return e.sent(),[3,3];case 3:return[2]}}))}))},t.prototype.recover=function(t){return V(this,void 0,void 0,(function(){return G(this,(function(n){switch(n.label){case 0:return this.Ro?[3,2]:[4,this.Ao()];case 1:if(n.sent(),this.wo!==ur.READY)return[2];n.label=2;case 2:return this.To(t),[2]}}))}))},t.prototype.Ao=function(){return V(this,void 0,void 0,(function(){var t;return G(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),this.wo=ur.OPEN_IN_PROGRESS,t=this,[4,self.caches.open("".concat(this.So).concat(this.lo))];case 1:return t.Ro=n.sent(),this.wo=ur.READY,[3,3];case 2:return n.sent(),this.wo=ur.OPEN_FAILED,[3,3];case 3:return[2]}}))}))},t.prototype.To=function(t){return V(this,void 0,void 0,(function(){var n,i,r,e,s=this;return G(this,(function(o){switch(o.label){case 0:return o.trys.push([0,5,6,7]),this.yo++,this.yo>1?[2]:[4,this.Ro.keys()];case 1:return 0===(n=o.sent()).length?[2]:[4,this.Ro.matchAll()];case 2:return i=o.sent(),r=csArray.prototype.map.call(i,(function(t){var n={};t.headers.forEach((function(t,i){n[i]=t})),delete n["content-type"];var i=n.datatype;return delete n.datatype,"json"===i||"base64"===i?t.text().then((function(t){return{metadata:n,events:t}})):t.arrayBuffer().then((function(t){return{metadata:n,events:t}}))})),[4,Promise.all(r)];case 3:return e=o.sent(),[4,Promise.all(csArray.prototype.map.call(n,(function(t){return s.Ro.delete(t)})))];case 4:return o.sent(),t(e),this.ao.reset(),[3,7];case 5:return o.sent(),[3,7];case 6:return this.yo--,[7];case 7:return[2]}}))}))},t}(),yr=function(){function t(t){self.caches?this.Oo(t):this.ko()}return t.prototype.save=function(t){this.Co.save(t)},t.prototype.recover=function(t){this.Co.recover(t)},t.prototype.Oo=function(n){var i=this;this.Co=new pr(n,t.Io,(function(t){i.ko(t)}))},t.prototype.ko=function(n){var i=this;this.Co=new fr(t.Io),n&&csArray.prototype.forEach.call(n,(function(t){i.Co.save(t)}))},t.Io=16777216,t}();!function(t){t.PORTRAIT="Portrait",t.LANDSCAPE="Landscape"}(vr||(vr={})),function(t){t.PORTRAIT_PRIMARY="portrait-primary",t.PORTRAIT_SECONDARY="portrait-secondary",t.LANDSCAPE_PRIMARY="landscape-primary",t.LANDSCAPE_SECONDARY="landscape-secondary"}(lr||(lr={})),function(t){t[t.PORTRAIT=0]="PORTRAIT",t[t.PORTRAIT_REVERSE=180]="PORTRAIT_REVERSE",t[t.LANDSCAPE=-90]="LANDSCAPE",t[t.LANDSCAPE_REVERSE=90]="LANDSCAPE_REVERSE"}(dr||(dr={})),function(t){function n(){return"orientation"in screen}function i(){return"orientation"in window}t.isScreenOrientationApiSupported=n,t.isDeprecatedScreenOrientationApiSupported=i;var r=n()?function(){switch(screen.orientation.type){case lr.PORTRAIT_PRIMARY:case lr.PORTRAIT_SECONDARY:return vr.PORTRAIT;case lr.LANDSCAPE_PRIMARY:case lr.LANDSCAPE_SECONDARY:return vr.LANDSCAPE;default:return vr.PORTRAIT}}:i()?function(){switch(window.orientation){case dr.PORTRAIT:case dr.PORTRAIT_REVERSE:return vr.PORTRAIT;case dr.LANDSCAPE:case dr.LANDSCAPE_REVERSE:return vr.LANDSCAPE;default:return vr.PORTRAIT}}:function(){return vr.LANDSCAPE};t.getCurrentOrientation=function(){return r()}}(wr||(wr={}));var mr=function(){function t(){this._o=null,this.xo=null,this.Bn=!1}return t.prototype.start=function(){this.Bn||(this.Bn=!0,this.onScreenPotentiallyChanged())},t.prototype.stop=function(){this.Bn&&(this.Bn=!1,this._o=null,this.xo=null)},t.prototype.setOnScreenChangedCallback=function(t){this.Lo=t},t.prototype.onScreenPotentiallyChanged=function(){var t;if(this.Bn){var n=wr.getCurrentOrientation(),i=this.Po(n),r=i.screenWidth,e=i.screenHeight;if(r!==this._o||e!==this.xo){this._o=r,this.xo=e;var s={type:an.SCREEN_RESIZE,args:[r,e],date:pt()};null===(t=this.Lo)||void 0===t||t.call(this,s)}}},t.prototype.Po=function(t){var n,i,r=$n.screenWidth(),e=$n.screenHeight();return t===vr.PORTRAIT?(n=r,i=e):(n=Math.max(r,e),i=Math.min(r,e)),{screenWidth:n,screenHeight:i}},t}(),gr=function(){function t(){this.Mo=[]}return t.prototype.setRegexRules=function(t){var n=this;this.Mo=csArray.prototype.map.call(t,(function(t){return n.Do(t)}))},t.prototype.evaluateUrl=function(t){var n=this;return csArray.prototype.some.call(this.Mo,(function(i){var r,e,s=n.Uo(t,i);return(null==i?void 0:i.notOperator)?!(null===(r=i.regex)||void 0===r?void 0:r.test(s)):null===(e=i.regex)||void 0===e?void 0:e.test(s)}))},t.prototype.Uo=function(t,n){var i=qt(t);return i?n.ignoreQueryParams&&n.ignoreURIFragments?"".concat(i.origin).concat(i.pathname):n.ignoreQueryParams?"".concat(i.origin).concat(i.pathname).concat(i.hash):n.ignoreURIFragments?"".concat(i.origin).concat(i.pathname).concat(i.search):t:t},t.prototype.jo=function(t){return t.ignoreCaseSensitivity?"i":""},t.prototype.Do=function(t){switch(t.operator){case tr.NOT_START:t.notOperator=!0;case tr.START:t.regex=new RegExp("^".concat(t.value),this.jo(t));break;case tr.NOT_END:t.notOperator=!0;case tr.END:t.regex=new RegExp("".concat(t.value,"$"),this.jo(t));break;case tr.NOT_CONTAIN:t.notOperator=!0;case tr.CONTAIN:t.regex=new RegExp("".concat(t.value),this.jo(t));break;case tr.NOT_EXACT:t.notOperator=!0;case tr.EXACT:t.regex=new RegExp("^".concat(t.value,"$"),this.jo(t));break;default:Wt.warn("buildRegexWithRule, unknown type: ".concat(t.operator))}return t},t}(),Sr=function(){function t(){this.qo=[],this.Ho=1}return t.prototype.identifyNodes=function(t,n){for(var i=[document.createTreeWalker(t,NodeFilter.SHOW_ALL,null,!1)],r=!1;i.length>0;)for(var e=csArray.prototype.pop.call(i),s=e.root;null!==s;)if(r&&n&&n.get(s)>0){for(var o=e.nextSibling();null===o&&null!==e.parentNode();)o=e.nextSibling();s=o}else s.__contentsquare_identifier=this.Ho,this.Ho+=1,f(s)&&csElementshadowRoot.apply(s)?csArray.prototype.push.call(i,document.createTreeWalker(csElementshadowRoot.apply(s),NodeFilter.SHOW_ALL,null,!1)):m(s)&&this.zo(s),s=e.nextNode(),r=!0},t.prototype.getId=function(t){return t.__contentsquare_identifier},t.getId=function(t){return t.__contentsquare_identifier},t.prototype.getIds=function(t){for(var n,i=new Set,r=document.createNodeIterator(t,NodeFilter.SHOW_ALL,null,!1);n=r.nextNode();){var e=n.__contentsquare_identifier;if(e&&i.add(e),f(n)&&csElementshadowRoot.apply(n)){var s=csElementshadowRoot.apply(n);this.getIds(s).forEach((function(t){return i.add(t)}))}}return i},t.prototype.onDocumentIdentified=function(t){csArray.prototype.push.call(this.qo,t)},t.prototype.zo=function(t){for(var n=0,i=this.qo;n<i.length;n++){(0,i[n])(t)}},t}(),Er="v2/recording",Ar=["setCapturedElementsSelector"],br=["setPIISelectors"],Rr=["isRecording"],Nr=function(){function t(t,n,i,r,e,s,o,u,h,c,a,f,v,l,d,w,p,y,m,g,S,E,A){this.Bo=t,this.J=n,this.L=i,this.Fo=r,this.tn=e,this.Xs=s,this.Vo=o,this.Go=u,this.P=h,this.li=c,this.K=a,this.rn=f,this.pi=v,this.yi=l,this.mi=d,this.Me=w,this.gi=p,this.Hn=y,this.Jo=m,this.Yo=g,this.Wo=S,this.we=E,this.Xo=A}return t.prototype.init=function(){var t=this,n=new yr("csPersisted");this.Ko(n);var i=new Yn;this.ei=new Jn;var r=new Sr,e=new li(this.rn);this.$o=new gi(this.P,this.L),this.$o.init();var s=new xi,o=new Ui(this.we,r),u=[new sr,e,this.$o,s],h=new ar,c=new or(r,h);c.init(),c.isAdoptedStyleSheetsSupported()&&csArray.prototype.push.call(u,c);var a,f=new er;f.isSupported()&&csArray.prototype.push.call(u,f.getProcessor()),a=this.Qo()?new ir(u,r):new rr(u);var v=new Si(i,this.Vo,{getRequestParameters:function(){return{let:t.recordingService.getRecordingLastEventTimestamp()}}},{getRequestParameters:function(){return{rst:t.recordingService.getRecordingStartTimestamp()}}}),l=new ji("".concat(this.L.getRecordingUri(),"/").concat(Er));this.L.useMalkaPipeline&&v.addProvider({getRequestParameters:function(){return{rt:csArray.prototype.join.call(t.J.getRecordingStates())}}});var d=new gr;this.Yr=new hr(this.Xs,this.L,this.K,d),this.Yr.init(),this.Un=new ri(a,r,this.$o,this.en),this.Un.setAnonymization(this.Yr.shouldUseAnonymization()),this.ai=new Dn(this.tn,r,this.rn,this.en),this.ai.init();var w=new Vn(this.Un,o,s,this.Hn,r,this.rn);this.Ai=new ti(this.ei,n,this.L,l,this.Ei,v),this.recordingService=new Zn(this.L,this.ei,v,i,h,new fi(r,this.rn,s,h),w,this.ai,new bi(window.location,this.P,new mr),new qi(this.Me,r,this.rn),this.li,this.J,s,new Mi(window),this.pi,this.yi,this.mi,this.gi,this.en,f,this.Ei,this.Ai,c,[]),this.Zo=new Ri(this.ai,w,new Ai(this.L),this.recordingService,this.Un,this.Yr,this.Hn),this.Jo.addListener(this.recordingService),this.Yo.addListener(this.recordingService),this.Yo.addListener(this.Zo),o.init(),this.Zo.init(),this.recordingService.init(),this.Go.register(Rr,(function(){return t.J.isReplayRecorded()&&!t.Wo.isUrlExcludedForSessionReplay()})),this.Go.register(Ar,(function(n){t.$o.setWhitelistedElementsSelector(n),t.Hn.emitRecordingStatusChange()})),this.Go.register(br,(function(n){t.rn.setPIISelectors(n),t.Hn.emitRecordingStatusChange()})),this.Bo.enableRecordingStatus(this.recordingService,this.rn,this.Yr,this.$o,this.en)},t.prototype.onStartTracking=function(){this.Ai.recover(),this.Un.setAnonymization(this.Yr.shouldUseAnonymization()),this.J.isReplayRecorded()&&!this.Wo.isUrlExcludedForSessionReplay()&&(this.L.useMalkaPipeline&&this.J.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.tu())},t.prototype.onArtificialPageViewEnd=function(){this.recordingService.clearStates(),!this.J.isReplayRecorded()||this.Wo.isUrlExcludedForSessionReplay()||this.J.isTemporarilyRecorded()||this.Ai.sendLastMessageBeacon()},t.prototype.onAfterArtificialPageView=function(){this.Un.setAnonymization(this.Yr.shouldUseAnonymization()),this.J.isReplayRecorded()&&!this.Wo.isUrlExcludedForSessionReplay()?(this.L.useMalkaPipeline&&this.J.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.nu()):this.iu()},t.prototype.onBeforeSessionRenewal=function(){this.recordingService.clearStates(),this.iu()},t.prototype.onOptout=function(){this.iu()},t.prototype.onConsentGranted=function(){this.Un.setAnonymization(this.Yr.shouldUseAnonymization()),this.recordingService.triggerConsentGranted(),this.Hn.emitRecordingStatusChange()},t.prototype.onConsentWithdrawn=function(){this.Un.setAnonymization(this.Yr.shouldUseAnonymization()),this.recordingService.triggerConsentWithdrawn(),this.Hn.emitRecordingStatusChange()},t.prototype.onRecordingStateChange=function(t,n){this.L.useMalkaPipeline&&(t===zn.NOT_RECORDED&&n===Bn.ETR_OFF?(this.recordingService.clearEvents(),this.iu()):(this.Ei.setQueryParams({rt:csArray.prototype.join.call(this.J.getRecordingStates(),",")}),this.recordingService.allowSendingEventsFromQuotaService(),this.Un.isDOMSerializationInProgress()||this.recordingService.pushEvents()))},t.prototype.onInitialDomStart=function(){this.recordingService.blockSendingEventsFromSerialization(),this.Ai.blockSendingLastMessage()},t.prototype.onInitialDomDone=function(t){this.recordingService.allowSendingEventsFromSerialization(),this.recordingService.addInitialDom(t),this.Ai.allowSendingLastMessage(),this.ai.start(),this.recordingService.pushEvents()},t.prototype.tu=function(){this.Zo.start(),this.recordingService.start(),this.Ai.start(),this.Hn.emitRecordingStatusChange()},t.prototype.iu=function(){this.Zo.stop(),this.recordingService.stop(),this.Ai.stop(),this.Hn.emitRecordingStatusChange()},t.prototype.nu=function(){this.iu(),this.tu()},t.prototype.Ko=function(t){var n=this.L.useMalkaPipeline?Er:"recording",i=this.L.useMalkaPipeline?"byteArray":"base64";this.Ei=this.Xo.create("".concat(this.L.getRecordingUri(),"/").concat(n),!0,i,t)},t.prototype.Qo=function(){return cr.isAsyncSerializationSupported()&&this.L.asyncSerializerEnabled},t.prototype.ru=function(){return!!this.L.encryptionPublicKey&&this.L.encryptionPublicKeyId>0&&this.eu.isSupported()&&this.su.isSupported()},F([Cn("Recording.onStartTracking")],t.prototype,"onStartTracking",null),F([Cn("onInitialDomDone")],t.prototype,"onInitialDomDone",null),t}(),Tr=function(){function t(t,n,i,r){this.G=t,this.J=n,this.L=i,this.ou=r,this.hu=!1}return t.prototype.isNaturalPageViewSent=function(){return this.hu},t.prototype.setNaturalPageViewSent=function(t){this.hu=t},t.prototype.getTrackingContext=function(){var t=this.getSessionKey(),n=this.au(),i=this.fu(),r=this.vu(),e=this.lu(),s=this.du();return t&&n?{projectId:i,sessionKey:t,pageNumber:n,pageViewType:r,isRecording:s,uxaDomain:e}:null},t.prototype.getSessionKey=function(){var t=this.G.getVisitor();return t?"".concat(t.id,".").concat(t.visitsCount):null},t.prototype.au=function(){var t=this.J.getSession();return t?t.pageNumber:null},t.prototype.fu=function(){return this.L.projectId},t.prototype.vu=function(){return this.ou.getPageViewType()},t.prototype.lu=function(){return this.L.uxaDomain},t.prototype.du=function(){return this.J.isReplayRecorded()},t}(),Or=function(){function t(t){this.wu=t,this.pu=[]}return t.prototype.handleCommand=function(t){if(Nt(t)&&(this.yu(t),this.wu.isNaturalPageViewSent())){var n=this.wu.getTrackingContext();null!==n&&this.mu(t,n)}},t.prototype.yu=function(t){csArray.prototype.push.call(this.pu,t)},t.prototype.executeRegisteredCallbacks=function(){var t=this,n=this.wu.getTrackingContext();null!==n&&csArray.prototype.map.call(this.pu,(function(i){return t.mu(i,n)}))},t.prototype.mu=function(t,n){setTimeout((function(){t(n)}))},t}(),kr=function(){function t(t){this.wu=t,this.gu=[]}return t.prototype.handleCommand=function(t){return this.wu.isNaturalPageViewSent()?this.Su(t):void this.Eu(t)},t.prototype.Su=function(t){var n=this.wu.getSessionKey();return this.io(t)&&null!==n&&this.mu(t.callback,n),n},t.prototype.Eu=function(t){this.io(t)&&csArray.prototype.push.call(this.gu,t.callback)},t.prototype.flushPendingCallbacks=function(){var t=this,n=this.wu.getSessionKey();null!==n&&csArray.prototype.forEach.call(this.gu,(function(i){t.mu(i,n)})),this.gu=[]},t.prototype.io=function(t){return t&&"function"==typeof t.callback},t.prototype.mu=function(t,n){setTimeout((function(){t(n)}))},t}(),Cr=function(){function t(t,n){this.Au=t,this.wu=n}return t.prototype.onTrackingContextRequestCallback=function(t){var n=this.wu.getTrackingContext();null!==n&&this.Au.sendToChildren(Bt.TrackingContextResultMessage,B(B({},t),{trackingContext:n}))},t.prototype.onIframeIntegrationCallback=function(t){if(this.wu.isNaturalPageViewSent()){var n=this.wu.getTrackingContext();null!==n&&(t.trackingContext=n,this.Au.sendToChildren(Bt.IntegrationCallback,t))}},t.prototype.sendAfterPageViewCallbackToChildren=function(){var t=this.wu.getTrackingContext();if(null!==t){var n={trackingContext:t,initiator:Ht.AfterPageView};this.Au.sendToChildren(Bt.IntegrationCallback,n)}},t}();var Ir,_r,xr=function(){function t(t){this.wu=t}return t.prototype.handleCommand=function(t,n){At(t)&&Nt(n)&&this.mu(t,n)},t.prototype.mu=function(t,n){var i=this;setTimeout((function(){var r=i.wu.getTrackingContext();if(r){var e=function(t,n){var i,r=t.isRecording,e=t.pageNumber,s=t.projectId,o=t.uxaDomain,u=/^(.+)\.(\d+)$/.exec(t.sessionKey);if(r&&u){var h=u[1],c=u[2];i="".concat(o,"/quick-playback/index.html?pid=").concat(s,"&uu=").concat(h,"&sn=").concat(c,"&pvid=").concat(e,"&recordingType=cs"),n.withTimestamp&&(i+="&t=".concat(pt()-n.recordingStartTimestamp))}return{replayLink:i,isRecording:r}}(r,t);n(e)}}))},t}(),Lr=["afterPageView"],Pr=["getSessionKey"],Mr=["replay:link:generate"],Dr=function(){function t(t,n,i,r,e,s,o){this.G=t,this.J=n,this.Go=i,this.bu=r,this.Au=e,this.L=s,this.ou=o}return t.prototype.init=function(){var t=this;this.wu=new Tr(this.G,this.J,this.L,this.ou),this.Ru=new Or(this.wu),this.Nu=new kr(this.wu),this.Tu=new xr(this.wu),this.Ou=new Cr(this.Au,this.wu),this.bu.addListener(this.Ou),this.Go.register(Pr,(function(n){return t.Nu.handleCommand(n)})),this.Go.register(Lr,(function(n){return t.Ru.handleCommand(n)})),this.Go.register(Mr,(function(n,i){t.Jr&&t.Tu.handleCommand(B(B({},n),{recordingStartTimestamp:parseInt(t.Jr.getRecordingStartTimestamp(),10)}),i)}))},t.prototype.onAfterNaturalPageView=function(){this.wu.setNaturalPageViewSent(!0),this.Nu.flushPendingCallbacks(),this.Ru.executeRegisteredCallbacks(),this.Ou.sendAfterPageViewCallbackToChildren()},t.prototype.onAfterArtificialPageView=function(){this.Ru.executeRegisteredCallbacks(),this.Ou.sendAfterPageViewCallbackToChildren()},t.prototype.setRecordingService=function(t){this.Jr=t},t}(),Ur=function(){function t(t,n){this.key=csString.prototype.slice.call(t,0,512),this.value=Et(n)?csString.prototype.slice.call(n,0,255):n}return t.isValid=function(t,n){return Et(t)&&(Et(n)||St(n))},t}(),jr=function(t){function n(n,i){var r=t.call(this)||this;return r.ku=n,r.P=i,r.Cu=[],r}return z(n,t),n.prototype.onStart=function(){var t=this;csArray.prototype.forEach.call(this.Cu,(function(n){return t.trackDynamicVariable(n.key,n.value)})),this.Cu=[]},n.prototype.onStop=function(){},n.prototype.trackDynamicVariable=function(t,n){this.isStarted?Ur.isValid(t,n)&&this.ku.add(new Ur(this.P.anonymizeEmail(t),this.P.anonymizeEmail(n))):csArray.prototype.push.call(this.Cu,{key:t,value:n})},n}(Xn),qr=function(){function t(t){this.Fo=t,this.ku=[]}var n;return t.prototype.add=function(t){csArray.prototype.push.call(this.ku,t),this.setBatchReadyCall()},t.prototype.clear=function(){this.ku=[]},t.prototype.onBatchReady=function(t){this.Iu=t},t.prototype.getRequestParameters=function(){for(var t={},n=0,i=this.ku;n<i.length;n++){var r=i[n];t[r.key]=r.value}return{dv:this.Fo.compressSync(csJSON.stringify(t),"base64"),ct:this.Fo.algorithm}},t.prototype.setBatchReadyCall=function(){this.Iu()},F([(void 0===n&&(n=0),function(t,i,r){var e=r.value,s=!1;r.value=function(){for(var t=this,i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];s||(s=!0,setTimeout((function(){s=!1,e.apply(t,i)}),n))}}),tn("dynamicVariablesBatchReady")],t.prototype,"setBatchReadyCall",null),t}(),Hr=["trackDynamicVariable"],zr=function(){function t(t,n,i,r,e,s){this.Go=t,this.J=n,this.L=i,this.Vo=r,this.Fo=e,this.P=s,this.I=new ot(this.L.getTrackerUri(),"dvar"),this.ku=new qr(this.Fo),this._u=new jr(this.ku,this.P)}return t.prototype.init=function(){var t=this;this.I.setRequestParametersProviders(this.Vo,this.ku),this.J.setDynamicVariablesService(this._u),this.ku.onBatchReady((function(){return t.I.send()})),this.I.after((function(){return t.ku.clear()})),this.Go.register(Hr,(function(n){var i=void 0===n?{}:n,r=i.key,e=i.value;t._u.trackDynamicVariable(r,e)}))},t.prototype.onStartTracking=function(){this._u.start()},t}(),Br=function(){function t(t,n){this.id=t,this.revenue=n}return t.from=function(n){var i=new t(n.id,parseFloat(n.revenue));return isNaN(parseFloat(n.tax))||(i.tax=parseFloat(n.tax)),isNaN(parseFloat(n.shipping))||(i.shipping=parseFloat(n.shipping)),Et(n.currency)&&n.currency.length<=10&&(i.currency=n.currency),i},t.prototype.hasValidRevenue=function(){return!isNaN(this.revenue)&&this.revenue>=0},t.isValid=function(t){return Rt(t)&&gt(t.revenue)&&Et(t.currency)&&t.currency.length<=10&&(!Rt(t.id)||Et(t.id))},t}(),Fr=function(){function t(t,n,i,r){this.id=t,this.name=n,this.price=i,this.quantity=r}return t.from=function(n){if(!t.xu(n))return null;var i=new t(n.id,n.name,parseFloat(n.price),parseInt(n.quantity,10));return bt(n.sku)&&(i.sku=n.sku),bt(n.category)&&(i.category=n.category),bt(n.merchant)&&n.merchant.length>0&&(i.merchant=n.merchant.slice(0,100)),i},t.xu=function(t){return Rt(t)&&Et(t.id)&&Et(t.name)&&gt(parseFloat(t.price))&&St(parseInt(t.quantity,10))&&(!bt(t.sku)||Et(t.sku))&&(!bt(t.category)||Et(t.category))&&(!bt(t.merchant)||Et(t.merchant))},t}(),Vr=function(){function t(t,n,i){this.P=t,this.Lu=n,this.li=i,this.clear()}return t.prototype.addTransaction=function(t){var n=this.P.anonymizeFields(t,["id"]);this.Pu=Br.from(n)},t.prototype.getTransaction=function(){return this.Pu},t.prototype.sendTransaction=function(){null!==this.Lu&&null!==this.li&&this.li.isSessionValid()&&(this.Pu.hasValidRevenue()?this.Lu.send():Wt.warn("Transaction Service: unable to send transaction with invalid parameters"))},t.prototype.addItem=function(t){if(!Nt(t)){var n=this.P.anonymizeFields(t,["id","name","sku","category"]),i=Fr.from(n);null!==i&&csArray.prototype.push.call(this.Mu,i)}},t.prototype.getItems=function(){return this.Mu},t.prototype.clear=function(){this.Pu=Br.from({revenue:NaN}),this.Mu=[]},t.prototype.getRequestParameters=function(){var t={id:this.Pu.id?"".concat(this.Pu.id):"",revenue:"".concat(this.Pu.revenue)};return bt(this.Pu.tax)&&(t.tax="".concat(this.Pu.tax)),bt(this.Pu.shipping)&&(t.shipping="".concat(this.Pu.shipping)),bt(this.Pu.currency)&&(t.cu="".concat(this.Pu.currency)),t.items=window.csJSON.stringify(this.Mu),t},t}(),Gr=function(){function t(t,n){this.Du=csString.prototype.slice.call(t,0,100),this.Uu=n&&csString.prototype.slice.call(n,0,100)}return Object.defineProperty(t.prototype,"sku",{get:function(){return this.Du},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"merchant",{get:function(){return this.Uu},enumerable:!1,configurable:!0}),t}(),Jr=function(){function t(t,n){this.ju=t,this.li=n,this.qu=null}return t.prototype.addToCart=function(t){!this.Hu(t.sku)||bt(t.merchant)&&!Et(t.merchant)||(this.qu=new Gr(t.sku,t.merchant),this.sendCartItem())},t.prototype.Hu=function(t){return Et(t)&&t.length>0},t.prototype.getCartItem=function(){return this.qu},t.prototype.sendCartItem=function(){this.li.isSessionValid()&&this.ju.send()},t.prototype.clear=function(){this.qu=null},t.prototype.getRequestParameters=function(){if(!this.qu)return{};var t={sku:"".concat(this.qu.sku)};return bt(this.qu.merchant)&&this.qu.merchant.length>0&&(t.me=this.qu.merchant),t},t}(),Yr=["ecommerce:addToCart","ec:cart:add"],Wr=["ecommerce:addTransaction","ec:transaction:create"],Xr=["ecommerce:addItem","ec:transaction:items:add"],Kr=["ecommerce:send","ec:transaction:send"],$r=function(){function t(t,n,i,r,e,s,o){this.L=t,this.G=n,this.J=i,this.Go=r,this.P=e,this.li=s,this.K=o}return t.prototype.init=function(){var t=new ot(this.L.getTrackerUri(),"transaction"),i=new ot(this.L.getTrackerUri(),"addtocart"),r=new Vr(this.P,t,this.li),e=new Jr(i,this.li);t.setRequestParametersProviders(this.L,this.G,this.J,this.K,r,n),t.after((function(){r.clear()})),i.setRequestParametersProviders(this.L,this.G,this.J,this.K,e,n),i.after((function(){e.clear()})),this.Go.register(Wr,(function(t){r.addTransaction(t)})),this.Go.register(Xr,(function(t){return r.addItem(t)})),this.Go.register(Kr,(function(){return r.sendTransaction()})),this.Go.register(Yr,(function(t){e.addToCart(t)}))},t}(),Qr=function(){function t(t){this.fe=t.performance}return t.prototype.getRequestParameters=function(){if(this.zu())return{};var t=this.Bu();return{str:t.startRender,di:t.domInteractive,dc:t.domComplete,fl:t.fullyLoaded}},t.prototype.Bu=function(){var t=this.fe.timing;return{startRender:"".concat(t.domLoading-t.requestStart),domInteractive:"".concat(t.domInteractive-t.requestStart),domComplete:"".concat(t.domComplete-t.requestStart),fullyLoaded:"".concat(t.loadEventEnd-t.requestStart)}},t.prototype.zu=function(){return!(this.fe&&this.fe.timing&&this.fe.timing.loadEventEnd>0)},t}();function Zr(t){return void 0!==t.tgt}!function(t){t[t.RESIZE=0]="RESIZE",t[t.SCROLL=1]="SCROLL",t[t.MOUSEMOVE=2]="MOUSEMOVE",t[t.MOUSEDOWN=3]="MOUSEDOWN",t[t.MOUSEUP=4]="MOUSEUP",t[t.CLICK=5]="CLICK",t[t.MOUSEOVER=6]="MOUSEOVER",t[t.MOUSEOUT=7]="MOUSEOUT",t[t.CHANGE=10]="CHANGE",t[t.FOCUSIN=11]="FOCUSIN",t[t.FOCUSOUT=12]="FOCUSOUT",t[t.TAP=14]="TAP",t[t.KEYDOWN=15]="KEYDOWN",t[t.KEYUP=16]="KEYUP",t[t.COMMAND=17]="COMMAND",t[t.SUBMIT=18]="SUBMIT",t[t.PERFORMANCE=19]="PERFORMANCE",t[t.DRAG=20]="DRAG",t[t.FLICK=21]="FLICK",t[t.KEYBOARD_NAVIGATION=22]="KEYBOARD_NAVIGATION",t[t.ZOOM=23]="ZOOM",t[t.VIEWPORT_SCALE=24]="VIEWPORT_SCALE",t[t.TEXT_HIGHLIGHT=25]="TEXT_HIGHLIGHT",t[t.EXTENSION=26]="EXTENSION"}(Ir||(Ir={})),function(t){t.SUCCESS="success",t.FAILURE="failure",t.ATTEMPT="attempt"}(_r||(_r={}));var te,ne=function(){function t(){}return t.build=function(t,n,i){return csArray.prototype.reduce.call(i,(function(n,i){return i.enhanceAnalysisEvent(t,n)}),n)},t}(),ie=function(){function t(){}return t.prototype.isEventTypeSupported=function(t){return-1!==csArray.prototype.indexOf.call(this.supportedEventTypes,t)},t.prototype.enhanceAnalysisEvent=function(t,n){return this.isEventTypeSupported(n.type)?this.baseEnhanceAnalysisEvent(t,n):n},t}(),re=function(t){function n(n){var i=t.call(this)||this;return i.Fu=n,i.supportedEventTypes=[Ir.MOUSEDOWN,Ir.MOUSEUP,Ir.CLICK,Ir.MOUSEOVER,Ir.TAP,Ir.DRAG,Ir.FLICK],i}return z(n,t),n.prototype.baseEnhanceAnalysisEvent=function(t,n){return n.tgt||(n.tgt=this.Fu.getEventTargetPath(t)),n},n}(ie),ee=function(){function t(t,n,i,r){this.L=t,this.Fu=n,this.Me=i,this.Vu=r,this.Gu=[],csArray.prototype.push.call(this.Gu,new re(this.Fu))}return t.prototype.processGesture=function(t,n){switch(t.type){case Li.TAP:this.Ju(n);break;case Li.FLICK:this.Yu(t,n);break;case Li.DRAG:this.Wu(t,n)}},t.prototype.Ju=function(t){var n={type:Ir.TAP,ts:0,x:0,y:0,tgt:""},i=ne.build(t,n,this.Gu);i.tgt!==D.INVALID_ELEMENT&&this.Wn(i)},t.prototype.Wu=function(t,n){var i,r,e={type:Ir.DRAG,ts:0,fd:t.direction,tgt:""};(null===(i=this.Vu)||void 0===i?void 0:i.collectGestureDistance)&&(e.distance=t.distance),(null===(r=this.Vu)||void 0===r?void 0:r.collectGestureVelocity)&&(e.velocity=t.velocity);var s=ne.build(n,e,this.Gu);s.tgt!==D.INVALID_ELEMENT&&this.Wn(s)},t.prototype.Yu=function(t,n){var i,r,e={type:Ir.FLICK,ts:0,fd:t.direction,tgt:""};(null===(i=this.Vu)||void 0===i?void 0:i.collectGestureDistance)&&(e.distance=t.distance),(null===(r=this.Vu)||void 0===r?void 0:r.collectGestureVelocity)&&(e.velocity=t.velocity);var s=ne.build(n,e,this.Gu);s.tgt!==D.INVALID_ELEMENT&&this.Wn(s)},t.prototype.onEvent=function(t){this.Wn=t},t.prototype.start=function(){var n=this;this.Me.subscribe(t.De,(function(t,i){return n.processGesture(t,i)}))},t.prototype.stop=function(){this.Me.unsubscribe(t.De)},t.De="AnalysisGestureTracker",F([xn()],t.prototype,"processGesture",null),t}();!function(t){t.getRelativePosition=function(t){var n=_n(t);if(!(n&&f(n)&&Nt(n.getBoundingClientRect)&&Rt(t.pageX)&&Rt(t.pageY)))return{xRel:-1,yRel:-1,valid:!1};var i=n.getBoundingClientRect(),r=t.pageX-i.left-$n.windowOffsetX(),e=t.pageY-i.top-$n.windowOffsetY();n!==document.documentElement&&(r+=n.scrollLeft,e+=n.scrollTop);var s=Math.max(n.scrollWidth,i.width),o=Math.max(n.scrollHeight,i.height);return{xRel:Math.round(r/s*65535),yRel:Math.round(e/o*65535),valid:!0}}}(te||(te={}));var se,oe=function(t){function n(n,i){var r=t.call(this)||this;return r.k=n,r.Fu=i,r.supportedEventTypes=[Ir.MOUSEMOVE],r.Xu="",r}return z(n,t),n.prototype.baseEnhanceAnalysisEvent=function(t,n){var i=te.getRelativePosition(t),r=i.valid,e=i.xRel,s=i.yRel;if(r){var o=this.Fu.getEventTargetPath(t);o!==D.INVALID_ELEMENT&&(n.xRel=e,n.yRel=s,o!==this.Xu||this.k.iframesTracking?(this.Xu=o,n.tgtHM=o):n.tgtHM="")}else this.Xu="";return n},n}(ie),ue=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.supportedEventTypes=[Ir.CHANGE],n.Ku=["text","email","number","search","tel","url","password"],n}return z(n,t),n.prototype.baseEnhanceAnalysisEvent=function(t,n){var i=_n(t);return y(i)&&csArray.prototype.indexOf.call(this.Ku,i.type)>=0&&(n.isBlank=""===i.value),n},n}(ie),he=function(){function t(t,n,i){var r=this;this.k=t,this.Fu=n,this.tn=i,this.$u="select, select *, input, textarea",this.Qu="select, select *, input, textarea",this.Zu="a, a *, button, button *, select, select *, input, textarea",this.th="input, select, textarea",this.nh=150,this.ih=400,this.rh=!1,this.eh=Ei((function(t,n){return r.scrollListener(t,n)}),this.nh),this.oh=Ei((function(t){return r.resizeListener(t)}),this.nh),this.uh=Sn((function(t){return r.mouseMoveListener(t)}),this.ih),this.hh=[{boundElement:window,type:"resize",listener:function(){return r.oh()}},{boundElement:document,type:"scroll",listener:function(t){return r.eh(t)}},{boundElement:window,type:"mousemove",listener:function(t){r.uh(r.ah(t))}},{boundElement:document,type:"mousedown",listener:function(t){return r.mouseDownListener(t)}},{boundElement:document,type:"mouseup",listener:function(t){return r.mouseUpListener(t)}},{boundElement:document,type:"click",listener:function(t){return r.clickListener(t)}}],this.fh=[{boundElement:document,type:"mouseover",listener:this.tn.on(this.Zu,(function(t){return r.mouseOverListener(t)}))},{boundElement:document,type:"mouseout",listener:this.tn.on(this.Zu,(function(t){return r.mouseOutListener(t)}))},{boundElement:document,type:"focusin",listener:this.tn.on(this.$u,(function(t){return r.focusInListener(t)}))},{boundElement:document,type:"focusout",listener:this.tn.on(this.$u,(function(t){return r.focusOutListener(t)}))},{boundElement:document,type:"change",listener:this.tn.on(this.Qu,(function(t){return r.changeListener(t)}))},{boundElement:document,type:"keyup",listener:this.tn.on(this.th,(function(t){return r.keyUpListener(t)}))},{boundElement:document,type:"keydown",listener:this.tn.on(this.th,(function(t){return r.keyDownListener(t)}))},{boundElement:document,type:"copy",listener:this.tn.on(this.th,(function(t){return r.copyListener(t)}))},{boundElement:document,type:"cut",listener:this.tn.on(this.th,(function(t){return r.cutListener(t)}))},{boundElement:document,type:"paste",listener:this.tn.on(this.th,(function(t){return r.pasteListener(t)}))}],this.Gu=[],this.Dn={},this.gn(),this.k.mouseMoveHeatmapEnabled&&csArray.prototype.push.call(this.Gu,new oe(this.k,this.Fu)),csArray.prototype.push.call(this.Gu,new ue,new re(this.Fu))}return t.prototype.onEvent=function(t){this.Wn=t},t.prototype.start=function(){var t=this.lh();csArray.prototype.forEach.call(t,(function(t){return yn(t)})),this.resizeListener()},t.prototype.stop=function(){var t=this.lh();csArray.prototype.forEach.call(t,(function(t){return mn(t)}))},t.prototype.flushPendingDebouncedListeners=function(){this.eh.flushPending(),this.oh.flushPending()},t.prototype.lh=function(){return this.tn.isMatchesSelectorSupported()?J(J([],this.hh,!0),this.fh,!0):(Wt.warn("Element.matches is not implemented yet"),this.hh)},t.prototype.resizeListener=function(t){var n=Ln.getScrollContainer(),i=Tt(n);i&&(this.rh=!0);var r={type:Ir.RESIZE,ts:0,x:i?n.clientWidth:$n.windowWidth(),y:i?n.clientHeight:$n.windowHeight()};void 0!==t&&(r.d=t),this.Wn(r)},t.prototype.scrollListener=function(t,n){var i=Ln.isEventOnScrollContainer(n);!this.rh&&i&&this.resizeListener();var r={type:Ir.SCROLL,ts:0,x:i?csEventtarget.apply(n).scrollLeft:$n.windowOffsetX(),y:i?csEventtarget.apply(n).scrollTop:$n.windowOffsetY(),d:t},e=ne.build(n,r,this.Gu);this.Wn(e)},t.prototype.mouseMoveListener=function(t){var n={type:Ir.MOUSEMOVE,ts:0,x:t.pageX,y:t.pageY},i=ne.build(t,n,this.Gu);this.Wn(i)},t.prototype.mouseDownListener=function(t){var n={type:Ir.MOUSEDOWN,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=ne.build(t,n,this.Gu);this.ph(i)},t.prototype.mouseUpListener=function(t){var n={type:Ir.MOUSEUP,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=ne.build(t,n,this.Gu);this.ph(i)},t.prototype.clickListener=function(t){var n={type:Ir.CLICK,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=ne.build(t,n,this.Gu);this.ph(i)},t.prototype.mouseOverListener=function(t){var n={type:Ir.MOUSEOVER,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=ne.build(t,n,this.Gu);this.ph(i)},t.prototype.mouseOutListener=function(t){var n={type:Ir.MOUSEOUT,ts:0,x:t.pageX,y:t.pageY,tgt:this.Fu.getEventTargetPath(t)},i=ne.build(t,n,this.Gu);this.ph(i)},t.prototype.focusInListener=function(t){var n={type:Ir.FOCUSIN,ts:0,tgt:this.Fu.getEventTargetPath(t)},i=ne.build(t,n,this.Gu);this.ph(i)},t.prototype.focusOutListener=function(t){var n={type:Ir.FOCUSOUT,ts:0,tgt:this.Fu.getEventTargetPath(t)},i=ne.build(t,n,this.Gu);this.ph(i)},t.prototype.changeListener=function(t){var n={type:Ir.CHANGE,ts:0,tgt:this.Fu.getEventTargetPath(t)},i=ne.build(t,n,this.Gu);this.ph(i)},t.prototype.copyListener=function(t){var n={type:Ir.COMMAND,ts:0,tgt:this.Fu.getEventTargetPath(t),key:An.COPY};this.ph(n)},t.prototype.cutListener=function(t){var n={type:Ir.COMMAND,ts:0,tgt:this.Fu.getEventTargetPath(t),key:An.CUT};this.ph(n)},t.prototype.pasteListener=function(t){var n={type:Ir.COMMAND,ts:0,tgt:this.Fu.getEventTargetPath(t),key:An.PASTE};this.ph(n)},t.prototype.keyUpListener=function(t){var n={type:Ir.KEYUP,ts:0,tgt:this.Fu.getEventTargetPath(t),key:this.yh(t)};this.ph(n)},t.prototype.keyDownListener=function(t){var n={type:Ir.KEYDOWN,ts:0,tgt:this.Fu.getEventTargetPath(t),key:this.yh(t)};this.ph(n)},t.prototype.yh=function(t){var n=this.Dn[t.key];return void 0===n?En.ALPHANUMERICAL:n},t.prototype.ph=function(t){Zr(t)&&t.tgt!==D.INVALID_ELEMENT&&this.Wn(t)},t.prototype.ah=function(t){return t.composedPath&&Object.defineProperty(t,"__csOriginalTarget",{value:t.composedPath()[0],writable:!1,enumerable:!1}),t},t.prototype.gn=function(){this.Dn[" "]=En.SPACE,this.Dn.Spacebar=En.SPACE,this.Dn.Enter=En.ENTER,this.Dn.Backspace=En.BACKSPACE,this.Dn.Delete=En.DELETE,this.Dn.ArrowUp=En.ARROWUP,this.Dn.ArrowDown=En.ARROWDOWN,this.Dn.ArrowLeft=En.ARROWLEFT,this.Dn.ArrowRight=En.ARROWRIGHT,this.Dn.Up=En.ARROWUP,this.Dn.Down=En.ARROWDOWN,this.Dn.Left=En.ARROWLEFT,this.Dn.Right=En.ARROWRIGHT,this.Dn.CapsLock=En.CAPSLOCK,this.Dn.Shift=En.SHIFT,this.Dn.Tab=En.TAB},F([tn("Event handler type: resize")],t.prototype,"resizeListener",null),F([tn("Event handler type: scroll")],t.prototype,"scrollListener",null),F([tn("Event handler type: mouseMove"),xn()],t.prototype,"mouseMoveListener",null),F([tn("Event handler type: mouseDown"),xn()],t.prototype,"mouseDownListener",null),F([tn("Event handler type: mouseUp"),xn()],t.prototype,"mouseUpListener",null),F([tn("Event handler type: click"),xn()],t.prototype,"clickListener",null),F([tn("Event handler type: mouseOver"),xn()],t.prototype,"mouseOverListener",null),F([tn("Event handler type: mouseOut"),xn()],t.prototype,"mouseOutListener",null),F([tn("Event handler type: focusIn")],t.prototype,"focusInListener",null),F([tn("Event handler type: focusOut")],t.prototype,"focusOutListener",null),F([tn("Event handler type: change")],t.prototype,"changeListener",null),F([tn("Event handler type: copy")],t.prototype,"copyListener",null),F([tn("Event handler type: cut")],t.prototype,"cutListener",null),F([tn("Event handler type: paste")],t.prototype,"pasteListener",null),F([tn("Event handler type: keyup")],t.prototype,"keyUpListener",null),F([tn("Event handler type: keydown")],t.prototype,"keyDownListener",null),t}(),ce=function(){function t(){var t=this;this.mh=100,this.gh=0,this.Sh=$n.documentHeight(),this.Eh={boundElement:document,type:"scroll",listener:function(n){return t.maxScrollRateListener(n)}}}return t.prototype.onEvent=function(t){this.Wn=t},t.prototype.start=function(){yn(this.Eh),this.reset()},t.prototype.stop=function(){mn(this.Eh)},t.prototype.reset=function(){this.Sh=$n.documentHeight();var t=Ln.getScrollContainer();if(null===t)this.gh=this.Ah($n.documentHeight());else{var n=this.bh(t);this.gh=this.Rh(t,n)}this.Wn()},t.prototype.maxScrollRateListener=function(t){var n,i;if(Ln.isEventOnScrollContainer(t)){var r=csEventtarget.apply(t),e=this.bh(r);n=this.Nh(r,e),i=this.Rh(r,e)}else n=$n.documentHeight(),i=this.Ah(n);(i>this.gh||n>this.Sh)&&(this.gh=i,n>this.Sh&&(this.Sh=n),this.Wn())},t.prototype.Ah=function(t){var n=Math.round(this.Th()/t*100);return Math.min(n,this.mh)},t.prototype.Th=function(){var t=$n.windowHeight();return $n.windowOffsetY()+t},t.prototype.Rh=function(t,n){var i=t.scrollTop+t.clientHeight+t.getBoundingClientRect().top+n,r=this.Nh(t,n),e=Math.round(i/r*100);return Math.min(e,this.mh)},t.prototype.bh=function(t){var n=window.getComputedStyle(t).paddingTop||"0px";return parseInt(n,10)},t.prototype.Nh=function(t,n){return t.scrollHeight+t.getBoundingClientRect().top+n},t.prototype.getRequestParameters=function(){return{sr:"".concat(this.gh),mdh:"".concat(this.Sh)}},F([tn("MaxScrollRate handler")],t.prototype,"maxScrollRateListener",null),t}();!function(t){t.Visible="visible",t.Hidden="hidden",t.Blur="blur",t.PagehideVisible="pagehideVisible",t.PagehideHidden="pagehideHidden"}(se||(se={}));var ae,fe,ve,le,de,we,pe=function(){function t(){var t=this;this.Oh=!1,this.kh=function(n){try{switch(n.type){case"visibilitychange":if("hidden"===document.visibilityState)return t.Ch(se.Hidden);break;case"pagehide":return"hidden"===document.visibilityState?t.Ch(se.PagehideHidden):t.Ch(se.PagehideVisible);case"blur":return t.Ch(se.Blur);default:return}}catch(t){}}}return t.prototype.start=function(){this.Oh||(this.Oh=!0,this.Ih(),this._h(),this.xh())},t.prototype.stop=function(){this.Oh&&(this.Oh=!1,this.Lh(),this.Ph(),this.Mh())},t.prototype.onEvent=function(t){this.Ch=t},t.prototype.Ih=function(){document.addEventListener("visibilitychange",this.kh)},t.prototype.Lh=function(){document.removeEventListener("visibilitychange",this.kh)},t.prototype._h=function(){window.addEventListener("pagehide",this.kh)},t.prototype.Ph=function(){window.removeEventListener("pagehide",this.kh)},t.prototype.xh=function(){window.addEventListener("blur",this.kh)},t.prototype.Mh=function(){window.removeEventListener("blur",this.kh)},t}(),ye=function(){function t(t,n,i,r,e,s,o,u,h,c,a,f,v,l,d,w,p,y,m){this.L=t,this.Dh=n,this.Me=i,this.Uh=r,this.jh=e,this.qh=s,this.Hh=o,this.zh=u,this.li=h,this.J=c,this.Bt=a,this.Bh=f,this.Fh=v,this.Vh=l,this.Ei=d,this.Gh=w,this.Jh=p,this.Yh=y,this.Wh=m,this.ki=new Wn,this.Xh=!1}return t.prototype.init=function(){var t,n,i,r,e=this;this.Dh.onEvent((function(t){return e.Pi(t)})),this.Me.onEvent((function(t){return e.Pi(t)})),this.Uh.onEvent((function(){var t=e.Uh.getRequestParameters();e.Ei.setQueryParams(t),e.Hh.setQueryParams(t)})),this.Fh.onEvent((function(t){return e.Kh(t)})),this.$h(),null===(t=this.Gh)||void 0===t||t.onEvent((function(t){return e.Pi(t)})),null===(n=this.Yh)||void 0===n||n.onEvent((function(t){return e.Pi(t)})),null===(i=this.Jh)||void 0===i||i.onEvent((function(t){return e.Pi(t)})),null===(r=this.Wh)||void 0===r||r.onEvent((function(t){return e.Pi(t)})),this.Qh()},t.prototype.Qh=function(){var t=this;this.Hh.onBeaconSuccess((function(){t.qh.clearEvents()})),this.Hh.onBeaconFailure((function(n){t.Zh(n)}))},t.prototype.initStates=function(){var t=this.zh.getRequestParameters(),n=this.jh.getRequestParameters(),i=this.Uh.getRequestParameters();this.Ei.setQueryParams(t),this.Ei.setQueryParams(n),this.Ei.setQueryParams(i),this.Hh.setQueryParams(t),this.Hh.setQueryParams(n),this.Hh.setQueryParams(i),this.tc()},t.prototype.start=function(t){var n,i,r,e;this.Vh.start(),this.Dh.start(),this.Uh.start(),this.Me.start(),null===(n=this.Gh)||void 0===n||n.start(),null===(i=this.Wh)||void 0===i||i.start(),null===(r=this.Yh)||void 0===r||r.start(),t||this.Fh.start(),null===(e=this.Jh)||void 0===e||e.start()},t.prototype.collectInitialEvents=function(){var t,n;null===(t=this.Yh)||void 0===t||t.flushInitialEvent(),null===(n=this.Gh)||void 0===n||n.collectInitialEvents()},t.prototype.onIframeAnalysisEvent=function(t){this.Bi(t)},t.prototype.Kh=function(t){this.J.hasValidSession()&&this.Bi(t)},t.prototype.Pi=function(t){this.li.isSessionValid()&&this.Bi(t)},t.prototype.Bi=function(t){this.qh.addEvent(this.nc(t)),this.qh.isFull()&&this.sendEvents(),this.L.emitDebugEvents&&this.ki.emit("analysisEvent",B(B({},t),{typeName:Ir[t.type]}))},t.prototype.nc=function(t){return t.ts=this.ic(),t},t.prototype.rc=function(){this.Hh.setQueryParams({hlm:"true"}),this.Xh=!0},t.prototype.sendLastMessageBeacon=function(){this.Hh.setQueryParams(this.jh.getRequestParameters()),this.Hh.send(this.qh.stringifyEvents()),this.Hh.removeQueryParams(["hlm"]),this.Xh=!1},t.prototype.sendEvents=function(){this.qh.isEmpty()||(this.Ei.setQueryParams(this.zh.getRequestParameters()),this.Ei.setQueryParams(this.jh.getRequestParameters()),this.Ei.send(this.qh.getEvents()),this.qh.clearEvents())},t.prototype.stop=function(){var t,n,i,r;this.Vh.stop(),this.Dh.stop(),this.Uh.stop(),this.Me.stop(),this.Fh.stop(),null===(t=this.Gh)||void 0===t||t.stop(),null===(n=this.Yh)||void 0===n||n.stop(),null===(i=this.Jh)||void 0===i||i.stop(),null===(r=this.Wh)||void 0===r||r.stop(),this.qh.empty()},t.prototype.clearStates=function(t){var n,i;this.Dh.flushPendingDebouncedListeners(),null===(n=this.Jh)||void 0===n||n.flushPendingKeyboardNavigationEvent(),null===(i=this.Wh)||void 0===i||i.flushPendingTextHighlightEvent(),t?(this.rc(),this.sendLastMessageBeacon()):this.sendEvents(),this.Uh.reset(),this.Fh.stop(),this.Ei.removeQueryParams()},t.prototype.tc=function(){this.ec=pt()},t.prototype.ic=function(){return pt()-this.ec},t.prototype.$h=function(){var t=this;this.Vh.onEvent((function(n){var i,r;null===(i=t.Jh)||void 0===i||i.flushPendingKeyboardNavigationEvent(),null===(r=t.Wh)||void 0===r||r.flushPendingTextHighlightEvent(),n===se.PagehideVisible?t.rc():n===se.PagehideHidden?(t.rc(),t.sendLastMessageBeacon()):t.qh.isEmpty()&&!t.Xh||t.sendLastMessageBeacon()}))},t.prototype.Zh=function(t){try{this.qh.isEmpty()&&!this.Xh||this.Bt.save({requestParameters:t,events:this.qh.getEvents()})}catch(t){}},t.prototype.pushSubmitEvent=function(t,n){if(function(t){return t===_r.SUCCESS||t===_r.FAILURE||t===_r.ATTEMPT}(t))if(Tt(n)){var i={status:t,type:Ir.SUBMIT,ts:0,tgt:this.Bh.getElementPath(n)};i.tgt!==D.INVALID_ELEMENT&&this.Kh(i)}else Wt.warn("AnalysisEvents Service: invalid element: ".concat(n));else Wt.warn("AnalysisEvents Service: invalid submit status: ".concat(t))},t}(),me=function(){function t(t,n){var i=this;this.Bt=t,this.Ei=n,this.sc=function(){"visible"===document.visibilityState&&i.oc()}}return t.prototype.start=function(){this.oc(),this.Ih()},t.prototype.stop=function(){this.Lh()},t.prototype.getRecoveryStorage=function(){return this.Bt},t.prototype.oc=function(){var t=this.Bt.recover();if(null!==t){var n=t,i=n.requestParameters,r=n.events;this.Ei.send(r,i)}},t.prototype.Ih=function(){document.addEventListener("visibilitychange",this.sc)},t.prototype.Lh=function(){document.removeEventListener("visibilitychange",this.sc)},t}(),ge=function(){function t(t){this.lo=t}return t.prototype.save=function(t){localStorage.setItem(this.lo,csJSON.stringify(t))},t.prototype.clear=function(){localStorage.removeItem(this.lo)},t.prototype.recover=function(){var t=localStorage.getItem(this.lo);if(null===t)return null;var n=null;try{n=csJSON.parse(t)}catch(n){Wt.error("Invalid item in localStorage.\n         (key:".concat(this.lo,"; value:").concat(t,")"))}finally{this.clear()}return n},t}(),Se=function(){function t(t){var n=this;this.hc=t,this.cc=function(t){return n.processMetric(t)},this.Oh=!1}return t.prototype.onEvent=function(t){this.Wn=t},t.prototype.start=function(){this.Oh||(this.Oh=!0,this.hc.onFCP(this.cc),this.hc.onCLS(this.cc),this.hc.onFID(this.cc),this.hc.onLCP(this.cc),this.hc.onTTFB(this.cc),this.hc.onINP(this.cc))},t.prototype.stop=function(){this.Oh=!1},t.prototype.processMetric=function(t){if(this.Oh){var n={type:Ir.PERFORMANCE,name:t.name,val:t.value,ts:0};this.Wn(n)}},F([tn("Performance metric handler")],t.prototype,"processMetric",null),t}(),Ee=-1,Ae=function(t){addEventListener("pageshow",(function(n){n.persisted&&(Ee=n.timeStamp,t(n))}),!0)},be=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},Re=function(){var t=be();return t&&t.activationStart||0},Ne=function(t,n){var i=be(),r="navigate";return Ee>=0?r="back-forward-cache":i&&(document.prerendering||Re()>0?r="prerender":document.wasDiscarded?r="restore":i.type&&(r=i.type.replace(/_/g,"-"))),{name:t,value:void 0===n?-1:n,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:r}},Te=function(t,n,i){try{if(PerformanceObserver.supportedEntryTypes.includes(t)){var r=new PerformanceObserver((function(t){Promise.resolve().then((function(){n(t.getEntries())}))}));return r.observe(Object.assign({type:t,buffered:!0},i||{})),r}}catch(t){}},Oe=function(t,n,i,r){var e,s;return function(o){n.value>=0&&(o||r)&&((s=n.value-(e||0))||void 0===e)&&(e=n.value,n.delta=s,n.rating=function(t,n){return t>n[1]?"poor":t>n[0]?"needs-improvement":"good"}(n.value,i),t(n))}},ke=function(t){requestAnimationFrame((function(){return requestAnimationFrame((function(){return t()}))}))},Ce=function(t){var n=function(n){"pagehide"!==n.type&&"hidden"!==document.visibilityState||t(n)};addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)},Ie=function(t){var n=!1;return function(i){n||(t(i),n=!0)}},_e=-1,xe=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},Le=function(t){"hidden"===document.visibilityState&&_e>-1&&(_e="visibilitychange"===t.type?t.timeStamp:0,Me())},Pe=function(){addEventListener("visibilitychange",Le,!0),addEventListener("prerenderingchange",Le,!0)},Me=function(){removeEventListener("visibilitychange",Le,!0),removeEventListener("prerenderingchange",Le,!0)},De=function(){return _e<0&&(_e=xe(),Pe(),Ae((function(){setTimeout((function(){_e=xe(),Pe()}),0)}))),{get firstHiddenTime(){return _e}}},Ue=function(t){document.prerendering?addEventListener("prerenderingchange",(function(){return t()}),!0):t()},je=[1800,3e3],qe=function(t,n){n=n||{},Ue((function(){var i,r=De(),e=Ne("FCP"),s=Te("paint",(function(t){t.forEach((function(t){"first-contentful-paint"===t.name&&(s.disconnect(),t.startTime<r.firstHiddenTime&&(e.value=Math.max(t.startTime-Re(),0),e.entries.push(t),i(!0)))}))}));s&&(i=Oe(t,e,je,n.reportAllChanges),Ae((function(r){e=Ne("FCP"),i=Oe(t,e,je,n.reportAllChanges),ke((function(){e.value=performance.now()-r.timeStamp,i(!0)}))})))}))},He=[.1,.25],ze={passive:!0,capture:!0},Be=new Date,Fe=function(t,n){ae||(ae=n,fe=t,ve=new Date,Je(removeEventListener),Ve())},Ve=function(){if(fe>=0&&fe<ve-Be){var t={entryType:"first-input",name:ae.type,target:ae.target,cancelable:ae.cancelable,startTime:ae.timeStamp,processingStart:ae.timeStamp+fe};le.forEach((function(n){n(t)})),le=[]}},Ge=function(t){if(t.cancelable){var n=(t.timeStamp>1e12?new Date:performance.now())-t.timeStamp;"pointerdown"==t.type?function(t,n){var i=function(){Fe(t,n),e()},r=function(){e()},e=function(){removeEventListener("pointerup",i,ze),removeEventListener("pointercancel",r,ze)};addEventListener("pointerup",i,ze),addEventListener("pointercancel",r,ze)}(n,t):Fe(n,t)}},Je=function(t){["mousedown","keydown","touchstart","pointerdown"].forEach((function(n){return t(n,Ge,ze)}))},Ye=[100,300],We=0,Xe=1/0,Ke=0,$e=function(t){t.forEach((function(t){t.interactionId&&(Xe=Math.min(Xe,t.interactionId),Ke=Math.max(Ke,t.interactionId),We=Ke?(Ke-Xe)/7+1:0)}))},Qe=function(){return de?We:performance.interactionCount||0},Ze=function(){"interactionCount"in performance||de||(de=Te("event",$e,{type:"event",buffered:!0,durationThreshold:0}))},ts=[200,500],ns=0,is=function(){return Qe()-ns},rs=[],es={},ss=function(t){var n=rs[rs.length-1],i=es[t.interactionId];if(i||rs.length<10||t.duration>n.latency){if(i)i.entries.push(t),i.latency=Math.max(i.latency,t.duration);else{var r={id:t.interactionId,latency:t.duration,entries:[t]};es[r.id]=r,rs.push(r)}rs.sort((function(t,n){return n.latency-t.latency})),rs.splice(10).forEach((function(t){delete es[t.id]}))}},os=[2500,4e3],us={},hs=[800,1800],cs=function t(n){document.prerendering?Ue((function(){return t(n)})):"complete"!==document.readyState?addEventListener("load",(function(){return t(n)}),!0):setTimeout(n,0)},as=function(t,n){n=n||{};var i=Ne("TTFB"),r=Oe(t,i,hs,n.reportAllChanges);cs((function(){var e=be();if(e){var s=e.responseStart;if(s<=0||s>performance.now())return;i.value=Math.max(s-Re(),0),i.entries=[e],r(!0),Ae((function(){i=Ne("TTFB",0),(r=Oe(t,i,hs,n.reportAllChanges))(!0)}))}}))},fs=function(){function t(){}return t.prototype.onFCP=function(t){qe(t,{reportAllChanges:!0})},t.prototype.onCLS=function(t){!function(t,n){n=n||{},qe(Ie((function(){var i,r=Ne("CLS",0),e=0,s=[],o=function(t){t.forEach((function(t){if(!t.hadRecentInput){var n=s[0],i=s[s.length-1];e&&t.startTime-i.startTime<1e3&&t.startTime-n.startTime<5e3?(e+=t.value,s.push(t)):(e=t.value,s=[t])}})),e>r.value&&(r.value=e,r.entries=s,i())},u=Te("layout-shift",o);u&&(i=Oe(t,r,He,n.reportAllChanges),Ce((function(){o(u.takeRecords()),i(!0)})),Ae((function(){e=0,r=Ne("CLS",0),i=Oe(t,r,He,n.reportAllChanges),ke((function(){return i()}))})),setTimeout(i,0))})))}(t,{reportAllChanges:!0})},t.prototype.onFID=function(t){!function(t,n){n=n||{},Ue((function(){var i,r=De(),e=Ne("FID"),s=function(t){t.startTime<r.firstHiddenTime&&(e.value=t.processingStart-t.startTime,e.entries.push(t),i(!0))},o=function(t){t.forEach(s)},u=Te("first-input",o);i=Oe(t,e,Ye,n.reportAllChanges),u&&Ce(Ie((function(){o(u.takeRecords()),u.disconnect()}))),u&&Ae((function(){var r;e=Ne("FID"),i=Oe(t,e,Ye,n.reportAllChanges),le=[],fe=-1,ae=null,Je(addEventListener),r=s,le.push(r),Ve()}))}))}(t,{reportAllChanges:!0})},t.prototype.onLCP=function(t){!function(t,n){n=n||{},Ue((function(){var i,r=De(),e=Ne("LCP"),s=function(t){var n=t[t.length-1];n&&n.startTime<r.firstHiddenTime&&(e.value=Math.max(n.startTime-Re(),0),e.entries=[n],i())},o=Te("largest-contentful-paint",s);if(o){i=Oe(t,e,os,n.reportAllChanges);var u=Ie((function(){us[e.id]||(s(o.takeRecords()),o.disconnect(),us[e.id]=!0,i(!0))}));["keydown","click"].forEach((function(t){addEventListener(t,u,!0)})),Ce(u),Ae((function(r){e=Ne("LCP"),i=Oe(t,e,os,n.reportAllChanges),ke((function(){e.value=performance.now()-r.timeStamp,us[e.id]=!0,i(!0)}))}))}}))}(t,{reportAllChanges:!0})},t.prototype.onTTFB=function(t){as(t,{reportAllChanges:!0})},t.prototype.onINP=function(t){!function(t,n){n=n||{},Ue((function(){Ze();var i,r=Ne("INP"),e=function(t){t.forEach((function(t){t.interactionId&&ss(t),"first-input"===t.entryType&&!rs.some((function(n){return n.entries.some((function(n){return t.duration===n.duration&&t.startTime===n.startTime}))}))&&ss(t)}));var n,e=(n=Math.min(rs.length-1,Math.floor(is()/50)),rs[n]);e&&e.latency!==r.value&&(r.value=e.latency,r.entries=e.entries,i())},s=Te("event",e,{durationThreshold:n.durationThreshold||40});i=Oe(t,r,ts,n.reportAllChanges),s&&(s.observe({type:"first-input",buffered:!0}),Ce((function(){e(s.takeRecords()),r.value<0&&is()>0&&(r.value=0,r.entries=[]),i(!0)})),Ae((function(){rs=[],ns=Qe(),r=Ne("INP"),i=Oe(t,r,ts,n.reportAllChanges)})))}))}(t,{reportAllChanges:!0})},t}(),vs=function(){function t(t){void 0===t&&(t=[]),this.Qn=t}return t.prototype.stringifyEvents=function(){return csJSON.stringify(this.Qn)},t.prototype.addEvent=function(t){csArray.prototype.push.call(this.Qn,t)},t.prototype.eventsCount=function(){return this.Qn.length},t.prototype.clearEvents=function(){this.Qn=[]},t.prototype.empty=function(){this.clearEvents()},t.prototype.isFull=function(){return this.eventsCount()>=50},t.prototype.isEmpty=function(){return 0===this.Qn.length},t.prototype.getEvents=function(){return this.Qn},t}(),ls="v2/events",ds=["submit"],ws=function(){function t(t,n,i,r,e,s,o,u,h,c){this.L=t,this.G=n,this.J=i,this.Bh=r,this.tn=e,this.Go=s,this.li=o,this.Me=u,this.bu=h,this.Xo=c}return t.prototype.init=function(){var t=this,n=new vs,i=this.Xo.create("".concat(this.L.getTrackerUri(),"/").concat(ls),!0,"base64");this.ac=this.fc(i),this.vc=this.lc(n,this.ac.getRecoveryStorage(),i),this.vc.init(),this.bu.addListener(this.vc),this.Go.register(ds,(function(n,i){t.vc.pushSubmitEvent(n,i)}))},t.prototype.onStartTracking=function(t){this.ac.start(),this.vc.start(t)},t.prototype.onAfterNaturalPageView=function(){this.vc.initStates()},t.prototype.onAfterArtificialPageView=function(){this.vc.initStates(),this.vc.collectInitialEvents()},t.prototype.onArtificialPageViewEnd=function(){this.vc.clearStates(!0)},t.prototype.onBeforeSessionRenewal=function(){this.vc.clearStates(),this.vc.stop(),this.ac.stop()},t.prototype.onOptout=function(){this.vc.stop(),this.ac.stop()},t.prototype.lc=function(t,i,r){var e=new Qr(window),s=new ce,o=new he(this.L,this.Bh,this.tn),u=new ee(this.L,this.Bh,this.Me),h=new Se(new fs),c=new pe;var a=new ji("".concat(this.L.getTrackerUri(),"/").concat(ls)),f=new Si(this.L,this.G,this.J,n);return new ye(this.L,o,u,s,e,t,a,f,this.li,this.J,i,this.Bh,h,c,r,undefined,undefined,undefined,undefined)},t.prototype.fc=function(t){return new me(new ge("csAnalysisEventsPersisted"),t)},t}();!function(t){t.Artificial="a",t.Renewal="r",t.Natural="n"}(we||(we={}));var ps=function(t){function n(n,i,r,e){var s=t.call(this)||this;return s.Hn=n,s.wc=i,s.K=r,s.ou=e,s}return z(n,t),n.prototype.init=function(){this.yc()},n.prototype.onStart=function(t){t?this.mc():this.gc()},n.prototype.onStop=function(){},n.prototype.triggerArtificialPageView=function(t){this.isStarted?this.Sc(t):this.K.overridePath(t)},n.prototype.gc=function(){this.ou.setPageViewType(we.Natural),this.Hn.emitBeforeNaturalPageView(),this.wc.send(),this.Hn.emitAfterNaturalPageView()},n.prototype.mc=function(){this.ou.setPageViewType(we.Renewal),this.Hn.emitBeforeNaturalPageView(),this.wc.send(),this.Hn.emitAfterNaturalPageView()},n.prototype.Sc=function(t){this.ou.setPageViewType(we.Artificial),this.Hn.emitArtificialPageViewEnd(),t&&this.K.overridePath(t),this.Hn.emitBeforeArtificialPageView(),this.wc.send(),this.Hn.emitAfterArtificialPageView()},n.prototype.yc=function(){var t=this;window.addEventListener("pageshow",(function(n){t.isStarted&&n.persisted&&t.Sc()}))},n}(Xn),ys=window.navigator.language||window.navigator.userLanguage||window.navigator.browserLanguage||window.navigator.systemLanguage||"unknown";function ms(){return{la:ys}}var gs,Ss,Es=function(){function t(t){this.Ec=t,this.Ac=[],this.bc=!1}return t.prototype.getRequestParameters=function(){return{dr:this.Rc()}},t.prototype.addUrlMaskingPattern=function(t){var n=this.Ec.getUrlMaskingPattern(t);csArray.prototype.push.call(this.Ac,n)},t.prototype.enableRemoveQueryString=function(){this.bc=!0},t.prototype.disableRemoveQueryString=function(){this.bc=!1},t.prototype.Rc=function(){var t=this.bc?this.Ec.removeQueryString(this.Nc()):this.Nc();return this.Ec.anonymizeUrl(t,this.Ac)},t.prototype.Nc=function(){var t="";try{t=window.top.document.referrer}catch(n){if(window.parent)try{t=window.parent.document.referrer}catch(n){t=""}}return""===t&&(t=document.referrer),"string"!=typeof t&&(t=""),t},t}(),As=function(){function t(t){this.J=t,this.Tc=this.Oc()&&"currentScript"in document}return t.prototype.kc=function(){var t=document.currentScript;if(!t)return null;var n=window.performance.getEntriesByName(t.src,"resource")[0];return!n||this.Cc(n)?null:Math.round(n.responseEnd-n.fetchStart)},t.prototype.Cc=function(t){var n=t.transferSize;return void 0!==n?0===n||n<t.encodedBodySize:t.connectStart===t.domainLookupEnd},t.prototype.getRequestParameters=function(){if(!this.Tc||1!==this.au())return{};var t=this.kc();return null===t?{}:{dt:"".concat(Math.min(t,99999))}},t.prototype.au=function(){var t;return(null===(t=this.J.getSession())||void 0===t?void 0:t.pageNumber)||null},t.prototype.Oc=function(){return"object"==typeof window.performance&&"function"==typeof window.performance.getEntriesByName},t}(),bs=["trackPageview"],Rs=["setPath"],Ns=["setQuery"],Ts=["referrer:maskUrl"],Os=["referrer:removeQueryString"],ks=["referrer:keepQueryString"],Cs=function(){function t(t,n,i,r,e,s,o,u,h,c,a){this.L=t,this.Go=n,this.Hn=i,this.G=r,this.J=e,this.Xs=s,this.Qt=o,this.Ec=u,this.K=h,this.Wo=c,this.ou=a}return t.prototype.init=function(){var t=this,r=new ot(this.L.getTrackerUri(),"pageview");this.Ic=new ps(this.Hn,r,this.K,this.ou);var e=new Es(this.Ec);this.Ic.init(),r.setRequestParametersProviders(this.L,this.G,this.J,$n,e,this.K,this.Xs,i,this.Qt,n,this.ou,new As(this.J),this.Wo),this.Go.register(bs,(function(n){return t.Ic.triggerArtificialPageView(n)})),this.Go.register(Rs,(function(n){return t.K.overridePath(n)})),this.Go.register(Ns,(function(n){return t.K.overrideQuery(n)})),this.Go.register(Ts,(function(t){return e.addUrlMaskingPattern(t)})),this.Go.register(Os,(function(){return e.enableRemoveQueryString()})),this.Go.register(ks,(function(){return e.disableRemoveQueryString()}))},t.prototype.start=function(t){this.Ic.start(t)},t.prototype.onBeforeSessionRenewal=function(){this.Ic.stop()},t}(),Is=function(){function t(t){this.Fu=t}return t.prototype.on=function(t,n){var i=this;return function(r){i.Fu.hasValidEventTarget(r)&&i._c(r,t)&&n(r)}},t.prototype._c=function(t,n){var i=_n(t);return N.call(i,n)},t.prototype.isMatchesSelectorSupported=function(){return!!N},t}(),_s=function(){function t(){}return t.prototype.onLoad=function(t){this.Gt=t},t.prototype.onLoadCallbackExecute=function(){this.Gt()},t.prototype.start=function(){var t=this.onLoadCallbackExecute.bind(this);this.xc(t)},t.prototype.xc=function(t){function n(){document.removeEventListener("DOMContentLoaded",n),window.removeEventListener("load",n),t()}"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?setTimeout(t):(document.addEventListener("DOMContentLoaded",n),window.addEventListener("load",n))},F([tn("onLoad")],t.prototype,"onLoadCallbackExecute",null),t}(),xs=function(){function t(t,n,i){this.L=t,this.G=n,this.J=i}return t.prototype.getSessionData=function(){var t=this.L.projectId,n=this.G.getVisitor();null==n&&Wt.warn("Visitor is null. This happens when a snippet tries to get Session Data before the tag was initialized.");var i=null!=n?n:{},r=i.id,e=i.visitsCount,s=this.J.getSession();return null===s&&Wt.warn("Session is null. This happens when a snippet tries to get Session Data before the tag was initialized."),{projectId:t,userId:r,sessionNumber:e,pageNumber:(null!=s?s:{}).pageNumber}},t}(),Ls=["clearSession"],Ps=["extendSession"],Ms=["getSessionData"],Ds=["session:start:newVisitor"],Us=function(){function t(t,n,i,r){this.L=t,this.G=n,this.J=i,this.Go=r}return t.prototype.init=function(){var t=this;this.Lc=new xs(this.L,this.G,this.J),this.Go.register(Ls,(function(){return t.J.removeSession()})),this.Go.register(Ps,(function(){return t.J.extendSessionPeriodically()}),{disableApplyPending:!0}),this.Go.register(Ms,(function(){return t.Lc.getSessionData()}),{disableApplyPending:!0}),this.Go.register(Ds,(function(){return t.G.renewVitor()}))},t.prototype.onBeforeNaturalPageView=function(){this.G.createOrUpdateVisitor(),this.J.createOrUpdateSession()},t.prototype.onBeforeArtificialPageView=function(){this.J.abortQuotaServiceRequest(),this.G.createOrUpdateVisitor(),this.J.createOrUpdateSession()},t.prototype.onOptout=function(){this.G.removeVisitor(),this.J.removeSession()},t.prototype.onRecordingStateChange=function(t,n){this.J.updateRecordingState(t,n)},t}(),js=function(){function t(t,n){this.J=t,this.G=n,this.Pc=!1}return t.prototype.onSessionExpired=function(t){this.Mc=t},t.prototype.isSessionValid=function(){if(this.Pc)return!0;var t=this.J.hasValidSession(),n=!1;return this.J.pollCacheRefreshEvent()&&(n=this.G.isSessionRenewed()),t&&!n||!this.Dc()?t:(this.Uc=pt(),this.Pc=!0,this.Mc(),this.Pc=!1,this.J.hasValidSession())},t.prototype.startNewSession=function(){this.Mc()},t.prototype.Dc=function(){return!bt(this.Uc)||pt()-this.Uc>6e4},t}();function qs(t){return t.tagDeploymentMode===gs.DualCollectionReview||t.tagDeploymentMode===gs.DualCollection}!function(t){t.ContentSquare="CONTENTSQUARE",t.LoadedByClicktale="LOADED_BY_CLICKTALE",t.LoadClicktalePtc="LOAD_CLICKTALE_PTC",t.DualCollectionReview="DUAL_COLLECTION_REVIEW",t.DualCollection="DUAL_COLLECTION",t.ContentSquareTagClickTaleEndpoints="CONTENTSQUARE_TAG_CLICKTALE_ENDPOINTS"}(gs||(gs={})),function(t){t.isRecording=function(){return window.ClickTaleIsRecording&&window.ClickTaleIsRecording()},t.stopRecording=function(){window.ClickTaleStop&&window.ClickTaleStop()},t.triggerLogicalPageView=function(t){window.ClickTaleLogicalWithUploadPage&&window.ClickTaleLogicalWithUploadPage(t)},t.sendPageEvent=function(t){window.ClickTaleEvent&&window.ClickTaleEvent(t)},t.sendEventTriggerRecording=function(t){window.ClickTaleEventTrigger&&window.ClickTaleEventTrigger(t)}}(Ss||(Ss={}));var Hs="@user-identifier@",zs=function(t){function n(n,i,r,e,s){var o=t.call(this)||this;return o.L=n,o.jc=i,o.Fo=r,o.qc=e,o.Hc=s,o.zc=[],o.Bc=[],o}return z(n,t),n.prototype.onStart=function(){var t=this;csArray.prototype.forEach.call(this.zc,(function(n){return t.trackPageEvent(n)})),this.zc=[],csArray.prototype.forEach.call(this.Bc,(function(n){return t.trackEventTriggerRecording(n)})),this.Bc=[]},n.prototype.onStop=function(){},n.prototype.trackPageEvent=function(t){this.isStarted?n.Fc(t)&&(this.Vc(t)?this.Hc.isSupported()&&this.Gc(t):this.Jc(t)):csArray.prototype.push.call(this.zc,t)},n.prototype.Vc=function(t){return X(t,Hs)},n.prototype.Gc=function(t){return V(this,void 0,void 0,(function(){var n,i;return G(this,(function(r){switch(r.label){case 0:return this.L.customHashIdEnabled?(n=csString.prototype.slice.call(t,17),this.Hc.isValidInput(n)?[4,this.Hc.digest(n,this.L.projectId)]:(Wt.warn("UserIdentifier event: invalid user identifier"),[2])):[2];case 1:return(i=r.sent())?(this.Yc={eventName:i,isETR:!1,isCustomHashId:!0},this.Wc()):Wt.warn("Page event: unable to compute customHashId"),this.L.encryptionEnabled?(this.qc.emitUserIdentifierEvent(n),[2]):[2]}}))}))},n.prototype.Jc=function(t){this.qc.emitPageEvent(t),this.Yc={eventName:t,isETR:!1,isCustomHashId:!1},this.Wc(),this.L.tagDeploymentMode===gs.LoadClicktalePtc&&Ss.sendPageEvent(t)},n.prototype.trackEventTriggerRecording=function(t){this.isStarted?n.Fc(t)&&(this.L.useMalkaPipeline&&this.L.malkaEtrEnabled?this.Xc(t):this.Kc(t)):csArray.prototype.push.call(this.Bc,t)},n.prototype.Xc=function(t){X(t,"@ETP@")?this.qc.emitEventTriggerRecording(t,Fn.ETR_PAGE):this.qc.emitEventTriggerRecording(t,Fn.ETR_SESSION),this.Yc={eventName:t,isETR:!0,isCustomHashId:!1},this.Wc()},n.prototype.Kc=function(t){(function(t){return qs(t)||t.tagDeploymentMode===gs.LoadClicktalePtc})(this.L)&&(this.qc.emitEventTriggerRecording(t,Fn.ETR_LEGACY),this.Yc={eventName:t,isETR:!0,isCustomHashId:!1},this.Wc(),this.L.tagDeploymentMode===gs.LoadClicktalePtc&&Ss.sendEventTriggerRecording(t))},n.prototype.getRequestParameters=function(){return{value:this.Fo.compressSync(this.Yc.eventName,"base64"),ct:this.Fo.algorithm,isETR:"".concat(this.Yc.isETR),isCustomHashId:"".concat(this.Yc.isCustomHashId)}},n.prototype.Wc=function(){this.jc.send()},n.Fc=function(t){return Et(t)&&!!csString.prototype.trim.call(t)},n}(Xn);var Bs=function(){function t(t){this.$c=t,this.Qc=!1}return t.prototype.init=function(){this.Qc=this.Zc(),this.Qc&&(this.ta=new TextEncoder)},t.prototype.Zc=function(){return!!(this.$c&&this.$c.subtle&&this.$c.subtle.digest&&self.TextEncoder&&csArray.from)},t.prototype.isSupported=function(){return this.Qc},t.prototype.isValidInput=function(t){return!!t&&t.length<=100},t.prototype.na=function(t,n){var i=csString.prototype.toLowerCase.call(csString.prototype.trim.call(t));return"".concat(i,":").concat(n)},t.prototype.digest=function(t,n){return V(this,void 0,void 0,(function(){var i,r,e;return G(this,(function(s){switch(s.label){case 0:if(!this.Qc)return[2,null];i=this.na(t,n),r=this.ta.encode(i),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,crypto.subtle.digest("SHA-1",r)];case 2:return e=s.sent(),[2,(o=e,u=csArray.from(new Uint8Array(o)),csArray.prototype.join.call(csArray.prototype.map.call(u,(function(t){return csString.prototype.padStart.call(t.toString(16),2,"0")})),""))];case 3:return s.sent(),[2,null];case 4:return[2]}var o,u}))}))},t}(),Fs=["trackPageEvent"],Vs=["trackEventTriggerRecording"],Gs=function(){function t(t,n,i,r,e){this.L=t,this.Go=n,this.Fo=i,this.Vo=r,this.qc=e}return t.prototype.init=function(){var t=this,n=new ot(this.L.getTrackerUri(),"pageEvent"),i=new Bs(window.crypto);i.init(),this.ia=new zs(this.L,n,this.Fo,this.qc,i),n.setRequestParametersProviders(this.ia,this.Vo),this.Go.register(Fs,(function(n){t.ia.trackPageEvent(n)})),this.Go.register(Vs,(function(n){t.ia.trackEventTriggerRecording(n)}))},t.prototype.onStartTracking=function(){this.ia.start()},t}(),Js=function(){function t(){this.subscriptions={}}return t.prototype.subscribe=function(t,n){this.subscriptions[t]=n,1===Object.keys(this.subscriptions).length&&this.onStartTracking()},t.prototype.unsubscribe=function(t){delete this.subscriptions[t],0===Object.keys(this.subscriptions).length&&this.onStopTracking()},t}(),Ys=function(t){function n(){var n=t.call(this)||this;return n.ra=!1,n.ea={boundElement:window,type:"error",listener:function(t){return n.errorListener(t)}},n}return z(n,t),n.prototype.onStartTracking=function(){yn(this.ea,this.ra)},n.prototype.onStopTracking=function(){mn(this.ea,this.ra)},n.prototype.errorListener=function(t){var n=this.sa(t);for(var i in this.subscriptions){(0,this.subscriptions[i])(n)}},n.prototype.oa=function(t){return(t=null!=t?t:"[NO ERROR MESSAGE]").length<=n.ua?t:csString.prototype.slice.call(t,0,n.ua-n.truncatedErrorMessageMarker.length)+n.truncatedErrorMessageMarker},n.prototype.sa=function(t){return{errorType:"jsError",message:this.oa(t.message),filename:t.filename,lineno:t.lineno,colno:t.colno}},n.truncatedErrorMessageMarker="",n.ua=1024,F([tn("Event handler type: error")],n.prototype,"errorListener",null),n}(Js);function Ws(t,n){if(!(!!t&&Et(t)))return Wt.warn("isValidSelector: invalid selector provided '".concat(t,"'")),!1;try{return N.call(n,t),!0}catch(n){return Wt.warn("isValidSelector: invalid selector provided '".concat(t,"'")),!1}}var Xs,Ks=["#c1_card_info_id"];!function(t){t[t.Sensitive=1]="Sensitive",t[t.SensitiveChild=2]="SensitiveChild"}(Xs||(Xs={}));var $s,Qs=["value","checked","src","data","alt"],Zs=J(["[data-cs-mask]","img[src^='data:']","script"],Ks,!0),to=[{selector:"input:not([type=button]):not([type=submit])",attrName:"value"}],no={PIISelectors:J([".ctHidden, textarea","#c1_card_info_id"],Ks,!0),Attributes:[{selector:".ctHidden, input:not([type=button]):not([type=submit])",attrName:"value"}]},io=function(){function t(t){var n;this.L=t,this.ha=[],this.ca="",this.aa=document.createElement("div"),qs(this.L)||(this.ca=this.fa(this.ca,Zs),(n=csArray.prototype.push).call.apply(n,J([this.ha],to,!1)))}return t.prototype.setPIISelectors=function(t){var n,i=this;if(t){if(null===(n=t.PIISelectors)||void 0===n?void 0:n.length){var r=csArray.prototype.filter.call(t.PIISelectors,(function(t){return Ws(t,i.aa)}));this.ca=this.fa(this.ca,r)}t.Attributes instanceof Array&&csArray.prototype.forEach.call(t.Attributes,(function(t){t&&t.attrName&&Ws(t.selector,i.aa)&&!i.va(t)&&csArray.prototype.push.call(i.ha,t)}))}},t.prototype.getPIISelectors=function(){return{PIISelectors:[this.ca],Attributes:this.ha}},t.prototype.initCTPII=function(){var t,n,i,r=this;if(this.ca=this.fa(this.ca,no.PIISelectors),null===(i=null===(n=null===window||void 0===window?void 0:window.ClickTaleSettings)||void 0===n?void 0:n.DOM)||void 0===i?void 0:i.PII){var e=csArray.prototype.filter.call(window.ClickTaleSettings.DOM.PII.Text,(function(t){return Ws(t,r.aa)}));this.ca=this.fa(this.ca,e),(t=csArray.prototype.push).call.apply(t,J([this.ha],no.Attributes,!1)),csArray.prototype.forEach.call(window.ClickTaleSettings.DOM.PII.Attributes,(function(t){t.attr&&Ws(t.rule,r.aa)&&csArray.prototype.push.call(r.ha,{selector:t.rule,attrName:t.attr})}))}},t.prototype.isSensitiveAttribute=function(t,n){return this.isSensitive(t)&&-1!==csArray.prototype.indexOf.call(Qs,n)||this.da(t,n,this.ha)},t.prototype.isSensitive=function(t){return t.__contentsquare_sensitive===Xs.Sensitive},t.prototype.isSensitiveChild=function(t){return t.__contentsquare_sensitive===Xs.SensitiveChild},t.prototype.identifySensitiveNodes=function(t){var n=this;if(f(t)||m(t)){this.wa(t);var i=Kn.getAllShadowHosts(t);csArray.prototype.forEach.call(i,(function(t){return csElementshadowRoot.apply(t)&&n.wa(csElementshadowRoot.apply(t))}))}},t.prototype.unidentifySensitiveNodes=function(t){var n=this;if(f(t)||m(t)){this.pa(t);var i=Kn.getAllShadowHosts(t);csArray.prototype.forEach.call(i,(function(t){return csElementshadowRoot.apply(t)&&n.pa(csElementshadowRoot.apply(t))}))}},t.prototype.pa=function(t){for(var n,i=document.createNodeIterator(t,NodeFilter.SHOW_ELEMENT,null,!1);n=i.nextNode();)"__contentsquare_sensitive"in n&&delete n.__contentsquare_sensitive},t.prototype.wa=function(t){var n=this;if(this.ya(t))return this.ma(t),void this.ga(t);this.Sa(t,this.ca)?(this.Ea(t),this.ga(t)):jn(window.csquerySelectorAll[t.nodeType].call(t,this.ca),(function(t){n.Aa(t)||(n.Ea(t),n.ga(t))}))},t.prototype.Aa=function(t){return w(t)&&(X(t.src,"data:image/svg+xml")||X(t.src,"data:image/png"))&&t.src.length<=1024},t.prototype.Ea=function(t){t.__contentsquare_sensitive=Xs.Sensitive},t.prototype.ma=function(t){t.__contentsquare_sensitive=Xs.SensitiveChild},t.prototype.ga=function(t){var n=document.createNodeIterator(t,NodeFilter.SHOW_ELEMENT,null,!1),i=n.nextNode();for(t===i&&(i=n.nextNode());i;)this.ma(i),i=n.nextNode()},t.prototype.ya=function(t){return!(!csNodeparentNode.apply(t)||!f(csNodeparentNode.apply(t))&&!m(csNodeparentNode.apply(t))||!this.isSensitive(csNodeparentNode.apply(t))&&!this.isSensitiveChild(csNodeparentNode.apply(t)))||S(t)&&(this.isSensitive(t.host)||this.isSensitiveChild(t.host))},t.prototype.Sa=function(t,n){return f(t)&&N.call(t,n)},t.prototype.da=function(t,n,i){return csArray.prototype.some.call(i,(function(i){return t.hasAttribute(n)&&csString.prototype.indexOf.call(i.attrName,n)>-1&&N.call(t,i.selector)}))},t.prototype.fa=function(t,n){if(0===n.length)return t;if(0===t.length)return csArray.prototype.join.call(n,",");for(var i=t,r=0,e=n;r<e.length;r++)for(var s=e[r],o=0,u=csString.prototype.split.call(s,",");o<u.length;o++){var h=u[o];-1===csString.prototype.indexOf.call(i,h)&&(i+=",".concat(h))}return i},t.prototype.va=function(t){return csArray.prototype.some.call(this.ha,(function(n){return n.selector===t.selector&&n.attrName===t.attrName}))},t}(),ro=function(){function t(t){this.Go=t}return t.prototype.init=function(){this.ba(t.Ra,_t),this.ba(t.Na,It)},t.prototype.ba=function(t,n){this.Go.register([t],(function(t,i){Et(t)&&(Et(i)||Ot(i))&&Wt.error(i,"".concat(n).concat(t))}))},t.Na="logSnippetError",t.Ra="logImplementationSnippetError",t}(),eo=function(){function t(t,n,i,r){this.L=t,this.Au=n,this.Bo=i,this.bu=r}return t.prototype.init=function(){var t=this;this.Au.onChildMessage((function(n,i,r){return t.bu.emitIframeEvent(n,i,r)})),this.Au.setRecordingStatusCallback((function(){return t.Bo.getRecordingStatus()}))},t.prototype.onStartTracking=function(){this.L.iframesTracking&&this.Au.start()},t.prototype.onOptout=function(){this.L.iframesTracking&&this.Au.stop()},t.prototype.onRecordingStatusChange=function(){this.L.iframesTracking&&this.Au.onRecordingStatusChange(this.Bo.getRecordingStatus())},t}(),so=function(t){function n(n,i){var r=t.call(this)||this;return r.L=n,r.rn=i,r.Ta=0,r.Oa=new Map,r.ka={boundElement:window,type:"message",listener:function(t){return r.Ca(t)}},r}return z(n,t),n.prototype.onChildMessage=function(t){this.Ia=t},n.prototype.setRecordingStatusCallback=function(t){this._a=t},n.prototype.onRecordingStatusChange=function(t){var n=this,i=Ft.buildBaseMessage(Bt.RecordingStatus,zt.Parent,this.L.projectId);i.content=t,this.Oa.forEach((function(t){!n.xa(t)&&t.port&&Ft.sendChannelMessage(t.port,i)}))},n.prototype.sendToChildren=function(t,n){var i=Ft.buildBaseMessage(t,zt.Parent,this.L.projectId);i.content=n,this.La(i)},n.prototype.onStart=function(){yn(this.ka,!1),this.Pa()},n.prototype.onStop=function(){this.Ma(),mn(this.ka,!1),this.Da()},n.prototype.Pa=function(){var t=this,n=this.Ua();this.ja(n),csArray.prototype.forEach.call(n,(function(n){if(null===t.qa(n)){var i={iframe:n};t.Oa.set(t.Ta,i),t.Ta+=1}})),this.Ha()},n.prototype.Ua=function(){var t=this;return csArray.prototype.filter.call(Qn.findAllElements("iframe"),(function(n){return t.za(n)}))},n.prototype.ja=function(t){var n=this;this.Oa.forEach((function(i,r){i.iframe&&-1===csArray.prototype.indexOf.call(t,i.iframe)&&n.Ba(r,i)}))},n.prototype.Ba=function(t,n){n.port&&Ft.closeChannelPort(n.port),this.Oa.delete(t)},n.prototype.Da=function(){this.Oa.forEach((function(t){t.port&&Ft.closeChannelPort(t.port)})),this.Oa.clear()},n.prototype.qa=function(t){var n=null;return this.Oa.forEach((function(i,r){null===n&&i.iframe===t&&(n=r)})),n},n.prototype.za=function(t){return t.id!==r&&(!t.src||Ut(Dt(t.src),this.L.hostnames))},n.prototype.La=function(t){this.Oa.forEach((function(n){n.port&&Ft.sendChannelMessage(n.port,t)}))},n.prototype.Ha=function(){var t=this;this.Oa.forEach((function(n,i){if(n.iframe.contentWindow){var r=t.Fa(i);Ft.sendPostMessage(n.iframe.contentWindow,"*",r)}}))},n.prototype.Ma=function(){var t=this.Va();this.Oa.forEach((function(n){n.port?Ft.sendChannelMessage(n.port,t):n.iframe.contentWindow&&Ft.sendPostMessage(n.iframe.contentWindow,"*",t)}))},n.prototype.Fa=function(t){return Ft.buildBaseMessage(Bt.Discovery,zt.Parent,this.L.projectId,t)},n.prototype.Va=function(){return Ft.buildBaseMessage(Bt.Stop,zt.Parent,this.L.projectId)},n.prototype.Ga=function(t,n){var i=this,r=this.Oa.get(t);void 0!==r?(r.port=n,r.port.onmessage=function(t){i.Ja(t,r)}):Wt.error("Parent received channel messaging initialization from unknow child id : ".concat(t," (").concat(this.Ta,")"))},n.prototype.Ya=function(t){if(t.port){var n=Ft.buildBaseMessage(Bt.RecordingStatus,zt.Parent,this.L.projectId),i=this._a();this.xa(t)&&(i.isRecording=!1,i.isMutationTrackerStarted=!1),n.content=i,Ft.sendChannelMessage(t.port,n)}},n.prototype.Ja=function(t,n){if(void 0!==n){var i=t.data.type,r=t.data.content;i===Bt.EndOfBufferedMessages?this.Ya(n):this.Ia(n.iframe,i,r)}else Wt.error("Parent received channelMessage from unknown child : ".concat(csJSON.stringify(t.data)))},n.prototype.Ca=function(t){if(Ft.isMessageValid(t,zt.Child,this.L.projectId,this.L.hostnames))switch(t.data.type){case Bt.Discovery:if(void 0===t.data.id)return void this.Pa();if(t.ports&&1===t.ports.length&&this.Oa.has(t.data.id))return void this.Ga(t.data.id,t.ports[0]);Wt.error("Parent received wrong channelMessage initialization : (".concat(t.origin,") : ").concat(csJSON.stringify(t.data)));break;case Bt.ChildLogMessage:this.Ia(null,Bt.ChildLogMessage,t.data.content);break;default:Wt.warn("Parent received unexpected postMessage type from child (".concat(t.origin,") : ").concat(csJSON.stringify(t.data)))}},n.prototype.xa=function(t){return this.rn.isSensitive(t.iframe)||this.rn.isSensitiveChild(t.iframe)},n}(Xn),oo=function(t){function n(n,i){var r=t.call(this)||this;return r.Wa=n,r.Xa=i,r.Ka=[],r}return z(n,t),n.prototype.subscribe=function(n,i,r){(null==r?void 0:r.detailedEvent)&&Object.defineProperty(i,"detailedEvent",{value:r.detailedEvent}),t.prototype.subscribe.call(this,n,i)},n.prototype.init=function(){var t=this;this.Wa.onEvent((function(n){return t.$a(n)})),this.Xa.onEvent((function(n){return t.$a(n)}))},n.prototype.onStartTracking=function(){this.Wa.start(),this.Xa.start()},n.prototype.onStopTracking=function(){this.Wa.stop(),this.Xa.stop()},n.prototype.$a=function(t){if(t.url&&t.statusCode){if(this.Qa(t.url))return;if(t.statusCode>=400||t.isConfigurableApiError)for(var n in this.subscriptions){var i=this.subscriptions[n];if(i.hasOwnProperty("detailedEvent"))i(this.Za(t));else i(this.tf(t))}}},n.prototype.tf=function(t){return{errorType:"apiError",url:t.url,method:t.method,requestTime:t.requestTime,responseTime:t.responseTime,statusCode:t.statusCode,library:t.library,matchingBodyContent:t.matchingBodyContent}},n.prototype.Za=function(t){var n=this.tf(t);return Object.keys(t.standardRequestHeaders).length>0&&(n.standardRequestHeaders=t.standardRequestHeaders),Object.keys(t.standardResponseHeaders).length>0&&(n.standardResponseHeaders=t.standardResponseHeaders),Object.keys(t.customRequestHeaders).length>0&&(n.customRequestHeaders=csJSON.stringify(t.customRequestHeaders)),Object.keys(t.customResponseHeaders).length>0&&(n.customResponseHeaders=csJSON.stringify(t.customResponseHeaders)),t.queryParameters&&(n.queryParameters=t.queryParameters),t.requestBody&&(n.requestBody=t.requestBody),t.responseBody&&(n.responseBody=t.responseBody),n},n.prototype.Qa=function(t){return csArray.prototype.some.call(this.Ka,(function(n){return-1!==csString.prototype.indexOf.call(t,n)}))},n.prototype.excludeDomains=function(t){var n;(n=csArray.prototype.push).call.apply(n,J([this.Ka],t,!1))},n.truncatedErrorMessageMarker="",n}(Js),uo=function(){function t(t){this.Ec=t,this.Ac=[]}return t.prototype.addUrlMaskingPattern=function(t){var n=this.Ec.getUrlMaskingPattern(t);csArray.prototype.push.call(this.Ac,n)},t.prototype.anonymize=function(t){var n=this.Ec.removeQueryString(t.url);return B(B({},t),{url:this.Ec.anonymizeUrl(n,this.Ac),library:t.library?this.Ec.anonymizeUrl(t.library,this.Ac):void 0})},t}(),ho=function(){function t(t,n){this.P=t,this.K=n}return t.prototype.anonymize=function(t){return Et(t.message)&&(t.message=this.nf(t.message),t.message=this.P.anonymizeEmail(t.message)),Et(t.filename)&&(t.filename=this.K.computeOverriddenUrl(t.filename)),t},t.prototype.nf=function(t){return csString.prototype.replace.call(t,/(value\s*=\s*".*"|value\s*=\s*'.*')/,"value='".concat("CS_ANONYMIZED_VALUE","'"))},t}(),co=function(){function t(){}return t.prototype.compute=function(t,n){var i=this.if(n.x)-this.if(t.x),r=this.if(n.y)-this.if(t.y),e=n.time-t.time;return{duration:e,distance:this.rf(i,r),direction:this.ef(i,r),velocity:this.sf(i,r,e)}},t.prototype.computePinchMetrics=function(t,n){var i=this.if(n.x)-this.if(t.x),r=this.if(n.y)-this.if(t.y);return{duration:n.time-t.time,distance:this.rf(i,r)}},t.prototype.getScale=function(t,n){return Math.abs(n/t-1)},t.prototype.if=function(t){return t/window.devicePixelRatio},t.prototype.rf=function(t,n){return Math.round(Math.sqrt(t*t+n*n))},t.prototype.sf=function(t,n,i){var r=i/1e3,e=t/r,s=n/r;return Math.round(Math.abs(e)+Math.abs(s))},t.prototype.ef=function(t,n){return Math.abs(t)>Math.abs(n)?t>0?Pi.RIGHT:Pi.LEFT:n>0?Pi.DOWN:Pi.UP},t}(),ao=function(){function t(){this.uf={},this.hf=new co,this.cf()}return t.prototype.onGesture=function(t){this.af=t},t.prototype.isValidTouchEvent=function(t){return"touches"in t&&"changedTouches"in t},t.prototype.processActionDown=function(t){if(this.ff(t)){this.vf(t)&&this.cf();var n={x:t.touches[0].clientX,y:t.touches[0].clientY,time:pt()};if(1===t.touches.length)this.uf.startPinchTime=n.time,this.uf.firstTouch=n;else if(2===t.touches.length&&(this.uf.secondTouch={x:t.touches[1].clientX,y:t.touches[1].clientY,time:pt()},this.uf.firstTouch&&this.uf.secondTouch)){var i=this.hf.computePinchMetrics(this.uf.firstTouch,this.uf.secondTouch);this.lf=i.distance}csArray.prototype.push.call(this.df,n),this.wf=_n(t)}},t.prototype.processActionMove=function(){this.pf=!0},t.prototype.processActionUp=function(t){if(this.yf(t)){if(csArray.prototype.push.call(this.df,{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY,time:pt()}),this.mf(t)&&this.uf.startPinchTime){var n={x:t.touches[0].clientX,y:t.touches[0].clientY,time:this.uf.startPinchTime},i={x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY,time:pt()};this.uf.firstTouch&&(this.uf.firstTouch=n,this.uf.secondTouch=i),this.gf(t)}this.lf||this.Sf()&&this.Ef(t)}},t.prototype.cf=function(){this.df=[],this.wf=null,this.pf=!1,this.lf=null,this.Af=!0},t.prototype.Ef=function(t){var n=this.hf.compute(this.df[0],this.df[1]);this.Af=t.isTrusted;var i=this.pf?this.bf(n):this.Rf(n);this.af(i,t)},t.prototype.gf=function(t){if(this.uf.firstTouch&&this.uf.secondTouch){var n=this.hf.computePinchMetrics(this.uf.firstTouch,this.uf.secondTouch);this.Af=t.isTrusted;var i=this.Nf(n);i&&this.af(i,t)}},t.prototype.Nf=function(t){if(this.lf&&!(this.hf.getScale(this.lf,t.distance)<.1))return{type:this.lf>t.distance?Li.PINCH_IN:Li.PINCH_OUT,target:this.wf,distance:t.distance,isTrusted:this.Af}},t.prototype.bf=function(t){return{type:t.velocity<100?Li.DRAG:Li.FLICK,target:this.wf,velocity:t.velocity,distance:t.distance,direction:t.direction,isTrusted:this.Af}},t.prototype.Rf=function(t){return{type:t.duration<1e3?Li.TAP:Li.LONG_PRESS,target:this.wf,isTrusted:this.Af}},t.prototype.vf=function(t){return 1===t.touches.length},t.prototype.Sf=function(){return 2===this.df.length},t.prototype.ff=function(t){return t.touches.length>0},t.prototype.yf=function(t){return t.changedTouches.length>0},t.prototype.mf=function(t){return this.pf&&!!this.lf&&1===t.changedTouches.length&&1===t.touches.length},t}(),fo=function(t){function n(n){var i=t.call(this)||this;return i.Tf=n,i.Vr=[{boundElement:document,type:"touchstart",listener:function(t){return i.Bi(t)}},{boundElement:document,type:"touchmove",listener:function(t){return i.Bi(t)}},{boundElement:document,type:"touchend",listener:function(t){return i.Bi(t)}}],i.Of=new ao,i.Of.onGesture((function(t,n){return i.kf(t,n)})),i}return z(n,t),n.prototype.kf=function(t,n){for(var i in this.subscriptions){(0,this.subscriptions[i])(t,n)}},n.prototype.onStartTracking=function(){this.canDetectGesture()&&csArray.prototype.forEach.call(this.Vr,(function(t){return yn(t)}))},n.prototype.onStopTracking=function(){this.canDetectGesture()&&csArray.prototype.forEach.call(this.Vr,(function(t){return mn(t)}))},n.prototype.canDetectGesture=function(){return void 0!==window.devicePixelRatio},n.prototype.Bi=function(t){var n=this;this.Tf.tryToExecute("process gesture event",(function(){if(n.Of.isValidTouchEvent(t))switch(t.type){case"touchstart":n.Of.processActionDown(t);break;case"touchmove":n.Of.processActionMove();break;case"touchend":n.Of.processActionUp(t)}}))()},n.isSwipe=function(t){return t.type===Li.FLICK||t.type===Li.DRAG},n}(Js),vo=function(t){function n(n,i){var r=t.call(this)||this;return r.Ei=n,r.Cf=i,r.If=0,r}return z(n,t),n.prototype.onStart=function(){var t=this;Wt.isPerfLoggingActive()&&(this._f=window.setInterval((function(){return t.xf()}),n.Lf))},n.prototype.onStop=function(){Wt.isPerfLoggingActive()&&(this.xf(),clearInterval(this._f))},n.prototype.xf=function(){if(!(bn.isEmpty()||this.If>=n.Pf)){var t=bn.getAll();this.If++;var i=B({a:n.Mf,l:n.Df},this.Cf.getRequestParameters()),r=csArray.prototype.map.call(t,(function(t){return B(B({},t),i)}));this.Ei.send(r),bn.clear()}},n.Mf="uxa",n.Df="perf",n.Lf=5e3,n.Pf=5,n}(Xn),lo=function(){function t(t,n,i){this.L=t,this.Cf=n,this.Xo=i}return t.prototype.init=function(){this.Uf=new vo(this.Xo.create(this.L.getLoggerUri(),!0),this.Cf)},t.prototype.onStartTracking=function(){this.Uf.start()},t.prototype.onOptout=function(){this.Uf.stop()},t}(),wo=function(){function t(){this.jf=!1}return t.prototype.enableRecordingStatus=function(t,n,i,r,e){this.jf=!0,this.Jr=t,this.rn=n,this.Yr=i,this.$o=r,this.en=e},t.prototype.getRecordingStatus=function(){var t;return this.jf?{isRecording:this.Jr.isRecording(),isMutationTrackerStarted:this.Jr.isMutationTrackerStarted(),PIISelectors:this.rn.getPIISelectors(),capturedElementSelector:this.$o.getWhitelistedElementsSelector(),useAnonymization:this.Yr.shouldUseAnonymization(),encryptionSelectors:null===(t=this.en)||void 0===t?void 0:t.getEncryptionSelectors()}:{isRecording:!1}},t}(),po=function(){function t(t,n,i){var r=this;this.L=t,this.qf=n,this.Hf=i,this.Oh=!1,this.zf=null,this.Bf=[],this.Ff=function(t){var n=t.result,i=t.args,e=t.callerName;r.interceptFetch(n,i,e)}}return t.prototype.onEvent=function(t){csArray.prototype.push.call(this.Bf,t)},t.prototype.start=function(){this.Oh||this.Vf()&&(this.Gf(),this.zf&&this.zf.activate(),this.Oh=!0)},t.prototype.stop=function(){this.Oh&&(this.zf&&this.zf.deactivate(),this.Oh=!1)},t.prototype.Vf=function(){return!!window.fetch&&"function"==typeof window.fetch},t.prototype.Jf=function(t){if(t[0]&&"function"==typeof t[0].clone){var n=Un(t);return n[0]=t[0].clone(),n}return t},t.prototype.Gf=function(){this.zf||(this.zf=ui({target:window,methodName:"fetch",hook:this.Ff,hookPrepareArgs:this.Jf,options:{withCallerName:!0}}))},t.prototype.Yf=function(t,n,i){return V(this,void 0,void 0,(function(){var r,e,s,o,u,h,c;return G(this,(function(a){switch(a.label){case 0:return r=csString.prototype.split.call(n.url,"?"),e=r[0],s=r[1],o=Mt(e),u=B(B({},t),{url:o,method:n.method,responseTime:pt(),standardRequestHeaders:{},standardResponseHeaders:{},customRequestHeaders:{},customResponseHeaders:{}}),this.L.apiErrors.collectStandardHeaders&&(u.standardRequestHeaders=this.qf.extractStandardHeaders(n.headers),u.standardResponseHeaders=this.qf.extractStandardHeaders(i.headers)),this.L.apiErrors.validCustomHeaders&&0!==this.L.apiErrors.validCustomHeaders.length&&(u.customRequestHeaders=this.qf.extractCustomHeaders(n.headers),u.customResponseHeaders=this.qf.extractCustomHeaders(i.headers)),this.qf.isValidUrl(e,this.L.apiErrors.validUrls)?(this.L.apiErrors.collectQueryParam&&s&&(u.queryParameters=s),this.L.apiErrors.collectResponseBody&&this.qf.isValidBodyType(u.standardResponseHeaders)?(h=u,[4,this.qf.getResponseBody(i)]):[3,2]):[3,4];case 1:h.responseBody=a.sent(),a.label=2;case 2:return this.L.apiErrors.collectRequestBody&&this.qf.isValidBodyType(u.standardRequestHeaders)?(c=u,[4,n.text()]):[3,4];case 3:c.requestBody=a.sent(),a.label=4;case 4:return csArray.prototype.forEach.call(this.Bf,(function(t){return t(u)})),[2]}}))}))},t.prototype.interceptFetch=function(t,n,i){return V(this,void 0,void 0,(function(){var r,e,s,o,u,h,c,a,f;return G(this,(function(v){switch(v.label){case 0:if(r=n[0],e=n[1],!Et((s=new Request(r,e)).url))return[2];o=pt(),v.label=1;case 1:return v.trys.push([1,3,,4]),[4,t];case 2:return u=v.sent(),[3,4];case 3:if(h=v.sent(),this.Wf(h)||this.Xf(h)||this.Kf(h))return[2];throw h;case 4:return c=u.status,a={statusCode:c,library:i,requestTime:o},c>=400?[4,this.Yf(B(B({},a),{isConfigurableApiError:!1}),s,u)]:[3,6];case 5:return v.sent(),[3,9];case 6:return[3,9];case 7:return(f=v.sent()).isMatching?[4,this.Yf(B(B({},a),{isConfigurableApiError:!0,matchingBodyContent:f.matchingBodyContent}),s,u)]:[3,9];case 8:v.sent(),v.label=9;case 9:return[2]}}))}))},t.prototype.Wf=function(t){return t instanceof TypeError},t.prototype.Xf=function(t){return t instanceof DOMException&&"AbortError"===t.name},t.prototype.Kf=function(n){return n instanceof DOMException&&csArray.prototype.some.call(t.$f,(function(t){return t===n.name}))},t.$f=["NoModificationAllowedError","InvalidStateError","OperationError"],F([tn("FetchRequestTracker.interceptFetch")],t.prototype,"interceptFetch",null),t}(),yo=function(){function t(){this.Qf=["application/json","application/graphql","application/xml","text/plain","text/csv","text/html","text/xml"]}return t.prototype.isValidUrl=function(t,n){return!!n&&csArray.prototype.some.call(n,(function(n){return-1!==csString.prototype.indexOf.call(t,n)}))},t.prototype.Zf=function(t,n){for(var i=0,r=Object.keys(n);i<r.length;i++){var e=r[i];if(csString.prototype.toLowerCase.call(e)===t)return n[e]}return""},t.prototype.isValidBodyType=function(t){var n=this.Zf("content-type",t);if(!n)return!1;var i=csString.prototype.toLocaleLowerCase.call(n);return csArray.prototype.some.call(this.Qf,(function(t){return X(i,t)}))},t.prototype.getResponseBodySize=function(t){var n=parseInt(this.Zf("content-length",t),10);return isNaN(n)?null:n},t}(),mo=function(t){function n(n){var i=t.call(this)||this;return i.tv=n,i}return z(n,t),n.prototype.extractStandardHeaders=function(t){var n=this,i={};return t.forEach((function(t,r){n.tv.isValidStandardHeader(r)&&t&&(i[r]=csString.prototype.trim.call(t))})),i},n.prototype.extractCustomHeaders=function(t){var n=this,i={};return t.forEach((function(t,r){n.tv.isValidCustomHeader(r)&&t&&(i[r]=csString.prototype.trim.call(t))})),i},n.prototype.extractResponseHeaders=function(t){var n=t.headers;return[this.extractStandardHeaders(n),this.extractCustomHeaders(n)]},n.prototype.getResponseBody=function(t){return V(this,void 0,void 0,(function(){return G(this,(function(n){return t.bodyUsed?[2,Promise.resolve(void 0)]:[2,t.clone().text()]}))}))},n}(yo),go=function(){function t(t,n,i){var r=this;this.L=t,this.nv=n,this.Hf=i,this.Oh=!1,this.iv=null,this.rv=null,this.ev=null,this.Bf=[],this.sv=function(t){var n=t.context,i=t.args,e=t.callerName;return r.interceptOpen(n,i,e)},this.ov=function(t){var n=t.context,i=t.args;return r.interceptSetRequestHeader(n,i)},this.uv=function(t){var n=t.context,i=t.args;return r.interceptSend(n,i)}}return t.prototype.onEvent=function(t){csArray.prototype.push.call(this.Bf,t)},t.prototype.start=function(){this.Oh||(this.hv(),this.iv&&this.iv.activate(),this.rv&&this.rv.activate(),this.ev&&this.ev.activate(),this.Oh=!0)},t.prototype.stop=function(){this.Oh&&(this.iv&&this.iv.deactivate(),this.rv&&this.rv.deactivate(),this.Oh=!1)},t.prototype.hv=function(){this.iv||(this.iv=ui({target:XMLHttpRequest.prototype,methodName:"open",hook:this.sv,options:{withCallerName:!0}})),this.rv||(this.rv=ui({target:XMLHttpRequest.prototype,methodName:"setRequestHeader",hook:this.ov})),this.ev||(this.ev=ui({target:XMLHttpRequest.prototype,methodName:"send",hook:this.uv}))},t.prototype.interceptOpen=function(t,n,i){var r=this;if(n[1]&&Et(n[1])){var e=csString.prototype.split.call(n[1],"?"),s=e[0],o=e[1],u=Mt(s);t.apiCall={url:u,method:n[0],standardRequestHeaders:{},standardResponseHeaders:{},customRequestHeaders:{},customResponseHeaders:{},requestTime:pt(),responseTime:0,statusCode:0,library:i,isConfigurableApiError:!1},o&&this.nv.isValidUrl(u,this.L.apiErrors.validUrls)&&this.L.apiErrors.collectQueryParam&&(t.apiCall.queryParameters=o),t.addEventListener("readystatechange",(function(){return r.readyStateChangeListener(t)}))}},t.prototype.Yf=function(t){if(t.apiCall.responseTime=pt(),t.apiCall.statusCode=t.status,this.cv()){var n=this.nv.extractResponseHeaders(t),i=n[0],r=n[1];this.L.apiErrors.collectStandardHeaders&&(t.apiCall.standardResponseHeaders=i),t.apiCall.customResponseHeaders=r}this.nv.isValidUrl(t.apiCall.url,this.L.apiErrors.validUrls)&&this.L.apiErrors.collectResponseBody&&this.nv.isValidBodyType(t.apiCall.standardResponseHeaders)&&(t.apiCall.responseBody=t.responseText),csArray.prototype.forEach.call(this.Bf,(function(n){return n(t.apiCall)}))},t.prototype.readyStateChangeListener=function(t){t.apiCall&&t.readyState===XMLHttpRequest.DONE&&(t.status>=400&&this.Yf(t))},t.prototype.interceptSetRequestHeader=function(t,n){if(t.apiCall&&this.cv()){var i=n[0],r=n[1];this.L.apiErrors.collectStandardHeaders&&this.nv.isValidStandardHeader(i)&&r?t.apiCall.standardRequestHeaders[i]=r.trim():this.nv.isValidCustomHeader(i)&&r&&(t.apiCall.customRequestHeaders[i]=r.trim())}},t.prototype.interceptSend=function(t,n){var i=n[0];t.apiCall&&this.nv.isValidUrl(t.apiCall.url,this.L.apiErrors.validUrls)&&this.L.apiErrors.collectRequestBody&&this.nv.isValidBodyType(t.apiCall.standardRequestHeaders)&&"string"==typeof i&&(t.apiCall.requestBody=i)},t.prototype.cv=function(){return this.L.apiErrors.collectStandardHeaders||this.L.apiErrors.validCustomHeaders&&0!==this.L.apiErrors.validCustomHeaders.length},F([tn("XhrRequestTracker.interceptOpen")],t.prototype,"interceptOpen",null),F([tn("XhrRequestTracker.readyStateChangeListener")],t.prototype,"readyStateChangeListener",null),F([tn("XhrRequestTracker.interceptSetRequestHeader")],t.prototype,"interceptSetRequestHeader",null),F([tn("XhrRequestTracker.interceptSend")],t.prototype,"interceptSend",null),t}(),So=function(t){function n(n){var i=t.call(this)||this;return i.tv=n,i}return z(n,t),n.prototype.extractResponseHeaders=function(t){var n=this,i={},r={};return csArray.prototype.forEach.call(null==t.getAllResponseHeaders()?void 0:csString.prototype.split.call(t.getAllResponseHeaders(),/[\r\n]+/),(function(t){var e=csString.prototype.split.call(t,/:(.*)/),s=e[0],o=e[1];n.tv.isValidStandardHeader(s)?i[s]=csString.prototype.trim.call(o):n.tv.isValidCustomHeader(s)&&(r[s]=csString.prototype.trim.call(o))})),[i,r]},n.prototype.getResponseBody=function(t){return t.responseText},n.prototype.isValidStandardHeader=function(t){return this.tv.isValidStandardHeader(t)},n.prototype.isValidCustomHeader=function(t){return this.tv.isValidCustomHeader(t)},n}(yo),Eo=function(t){function n(n,i,r,e){var s=t.call(this)||this;return s.mi=n,s.av=i,s.fv=r,s.gi=e,s.vv=[],s.Ti=0,s}return z(n,t),n.prototype.init=function(){this.mi.init()},n.prototype.initStates=function(){this.lv(),this.vv=[],this.Ti=0,this.tc()},n.prototype.tc=function(){this.ec=pt()},n.prototype.ic=function(){return pt()-this.ec},n.prototype.onStart=function(){var t=this;this.mi.subscribe(n.Vi,(function(n){return t.Bi(n)}))},n.prototype.onStop=function(){this.mi.unsubscribe(n.Vi)},n.prototype.onIframeApiError=function(t){this.Bi(t)},n.prototype.Bi=function(t){this.isStarted&&this.Ti<n.wv&&(t.relativeTime=this.ic(),csArray.prototype.push.call(this.vv,this.gi.anonymize(t)),this.pv())},n.prototype.lv=function(){this.av.removeQueryParams(),this.av.setQueryParams(this.fv.getRequestParameters())},n.prototype.pv=function(){this.av.send({errors:this.vv}),this.vv=[],this.Ti+=1},n.Vi="ApiErrorsService",n.wv=20,n}(Xn),Ao=["api-errors:maskUrl"];!function(t){t.CONTENTSQUARE="contentsquare.net",t.CLICKTALE="clicktale.net",t.FAKE_TRACKER="fake-tracker.content-square.fr"}($s||($s={}));var bo,Ro=function(){function t(t,n,i,r,e,s,o){this.mi=t,this.gi=n,this.L=i,this.fv=r,this.bu=e,this.Go=s,this.Xo=o}return t.prototype.init=function(){var t=this.Xo.create("".concat(this.L.getTrackerUri(),"/").concat("api-errors"),!0);this.mi.excludeDomains([$s.CONTENTSQUARE,$s.CLICKTALE]),this.mi.excludeDomains([$s.FAKE_TRACKER]),this.yv=new Eo(this.mi,t,this.fv,this.gi),this.yv.init(),this.bu.addListener(this.yv),this.mv()},t.prototype.mv=function(){var t=this;this.Go.register(Ao,(function(n){return t.gi.addUrlMaskingPattern(n)}))},t.prototype.onStartTracking=function(){this.yv.start()},t.prototype.onAfterNaturalPageView=function(){this.yv.initStates()},t.prototype.onAfterArtificialPageView=function(){this.yv.initStates()},t.prototype.onBeforeSessionRenewal=function(){this.yv.stop()},t.prototype.onOptout=function(){this.yv.stop()},t}(),No=function(){function t(t){this.L=t,this.gv=["age","cache-control","clear-site-data","expires","pragma","warning","downlink","ect","rtt","last-modified","connection","keep-alive","accept","accept-encoding","accept-language","expect","access-control-allow-origin","access-control-allow-credentials","access-control-allow-headers","access-control-allow-methods","access-control-expose-headers","access-control-max-age","access-control-request-headers","access-control-request-method","origin","timing-allow-origin","content-length","content-type","content-encoding","content-language","via","host","referrer-policy","user-agent","allow","server","accept-ranges","range","if-range","content-range","cross-origin-embedder-policy","cross-origin-opener-policy","cross-origin-resource-policy","content-security-policy","content-security-policy-report-only","expect-ct","feature-policy","strict-transport-security","upgrade-insecure-requests","x-content-type-options","x-download-options","x-frame-options","x-permitted-cross-domain-policies","x-powered-by","x-xss-protection","sec-fetch-site","sec-fetch-mode","sec-fetch-user","sec-fetch-dest"]}return t.prototype.isValidStandardHeader=function(t){return-1!==csArray.prototype.indexOf.call(this.gv,csString.prototype.toLowerCase.call(t))},t.prototype.isValidCustomHeader=function(t){if(!this.L.apiErrors.validCustomHeaders)return!1;var n=csString.prototype.toLowerCase.call(t);return csArray.prototype.some.call(this.L.apiErrors.validCustomHeaders,(function(t){return csString.prototype.toLowerCase.call(t)===n}))},t}(),To=function(t){function n(n,i,r,e,s,o){var u=t.call(this)||this;return u.pi=n,u.Sv=i,u.fv=r,u.yi=e,u.Jo=s,u.K=o,u.Ev=[],u.Ni=0,u.Av=[],u}return z(n,t),n.prototype.initStates=function(){this.ec=pt(),this.Sv.removeQueryParams(),this.Sv.setQueryParams(this.fv.getRequestParameters()),this.Ev=[],this.Ni=0},n.prototype.onStart=function(){var t=this;this.pi.subscribe(n.Vi,(function(n){return t.Bi(n)})),this.bv()},n.prototype.onStop=function(){this.pi.unsubscribe(n.Vi)},n.prototype.onIframeJavascriptError=function(t){this.Bi(t)},n.prototype.trackCustomError=function(t){var n={errorType:"jsError",message:"".concat("Custom Error:"," ").concat(t),lineno:1,colno:1,filename:"https://cserror.com/texterror.js"};this.Rv(n)},n.prototype.Rv=function(t){var n=this;this.isStarted?this.Bi(t,(function(t){return n.Jo.emitCustomJavaScriptErrorEvent(t)})):csArray.prototype.push.call(this.Av,t)},n.prototype.bv=function(){var t=this;this.isStarted&&(csArray.prototype.forEach.call(this.Av,(function(n){return t.Rv(n)})),this.Av=[])},n.prototype.Bi=function(t,n){if(this.isStarted&&this.Ni<20){var i=B(B({},t),{pageUrl:this.K.getAnonymizedUrl(),rt:this.ic()});this.yi.anonymize(i),csArray.prototype.push.call(this.Ev,i),this.pv(),n&&n(i)}},n.prototype.ic=function(){return pt()-this.ec},n.prototype.pv=function(){this.Sv.send({errors:this.Ev}),this.Ev=[],this.Ni+=1},n.Vi="JavaScriptErrorsService",n}(Xn),Oo=["trackError"],ko=function(){function t(t,n,i,r,e,s,o,u,h){this.pi=t,this.yi=n,this.L=i,this.fv=r,this.bu=e,this.Go=s,this.Jo=o,this.K=u,this.Xo=h}return t.prototype.init=function(){var t=this.Xo.create("".concat(this.L.getTrackerUri(),"/").concat("errors"),!0);this.Nv=new To(this.pi,t,this.fv,this.yi,this.Jo,this.K),this.bu.addListener(this.Nv),this.mv()},t.prototype.mv=function(){var t=this;this.L.jsCustomErrorsEnabled&&!this.L.customErrorsEnabled&&this.Go.register(Oo,(function(n){t.Nv.trackCustomError(n)}))},t.prototype.onStartTracking=function(){this.Nv.start()},t.prototype.onAfterNaturalPageView=function(){this.Nv.initStates()},t.prototype.onAfterArtificialPageView=function(){this.Nv.initStates()},t.prototype.onBeforeSessionRenewal=function(){this.Nv.stop()},t.prototype.onOptout=function(){this.Nv.stop()},t}(),Co=function(){function t(){this.Tv=we.Natural}return t.prototype.setPageViewType=function(t){this.Tv=t},t.prototype.getPageViewType=function(){return this.Tv},t.prototype.getRequestParameters=function(){return{pvt:this.Tv}},t}(),Io=function(){function t(t){this.li=t}return t.prototype.onAfterVisitorRenewal=function(){this.li.startNewSession()},t}(),_o=function(){function t(t,n,i,r,e,s,o,u,h,c,a,f,v,l,d,w,p,y,m,g,S,E,A,b,R){var N=this;this.fv=t,this.Fo=n,this.G=i,this.J=r,this.Hn=e,this.Go=s,this.Ov=o,this.L=u,this.kv=h,this.Cv=c,this.Iv=a,this.Xs=f,this.P=v,this.Bh=l,this.Ec=d,this.K=w,this._v=p,this.qc=y,this.bu=m,this.Qt=g,this.xv=S,this.Wo=E,this.Lv=A,this.we=b,this.Xo=R,this.Pv=function(t){void 0===t&&(t=!1),N.Mv.start(t),N.Dv.start()}}return t.prototype.start=function(){var t,n,i,r,e,s,o,u,h,c,a,f,v,l,d,w=this;(this.kv.init(),this.Cv.init(),this.Cv.isActive())||(this.we.schedule((function(){f=new js(w.J,w.G),d=new Io(f),a=new Is(w.Bh),l=new fo(Wt),t=new ws(w.L,w.G,w.J,w.Bh,a,w.Go,f,l,w.bu,w.Xo),n=new zr(w.Go,w.J,w.L,w.fv,w.Fo,w.P),v=new io(w.L),c=new wo;var p=new so(w.L,v);(h=new eo(w.L,p,c,w.bu)).init();var y=new Co;i=new Dr(w.G,w.J,w.Go,w.bu,p,w.L,y),r=new $r(w.L,w.G,w.J,w.Go,w.P,f,w.K),w.Mv=new Cs(w.L,w.Go,w.Hn,w.G,w.J,w.Xs,w.Qt,w.Ec,w.K,w.Wo,y),e=new Us(w.L,w.G,w.J,w.Go),s=new Gs(w.L,w.Go,w.Fo,w.fv,w.qc),o=new ro(w.Go),u=new lo(w.L,new mt(w.L,w.P),w.Xo),w.Dv=new _s})),this.L.apiErrors.enabled&&this.we.schedule((function(){var t,n=new No(w.L);var i=new So(n),r=new go(w.L,i,t),e=new mo(n),s=new po(w.L,e,t);w.mi=new oo(r,s),w.gi=new uo(w.Ec);var o=new Ro(w.mi,w.gi,w.L,w.fv,w.bu,w.Go,w.Xo);o.init(),w.Hn.addListener(o)})),this.L.jsErrorsEnabled&&this.we.schedule((function(){w.pi=new Ys,w.yi=new ho(w.P,w.K);var t=new ko(w.pi,w.yi,w.L,w.fv,w.bu,w.Go,w.qc,w.K,w.Xo);t.init(),w.Hn.addListener(t)})),this.we.schedule((function(){w.Iv.init()})),this.we.schedule((function(){i.init()})),this.we.schedule((function(){n.init()})),this.we.schedule((function(){r.init()})),this.we.schedule((function(){w.xv.init()})),this.we.schedule((function(){w.Mv.init()})),this.we.schedule((function(){e.init()})),this.we.schedule((function(){s.init()})),this.we.schedule((function(){w._v.init()})),this.we.schedule((function(){o.init()})),this.we.schedule((function(){u.init()})),this.we.schedule((function(){w.Lv.init()})),this.we.schedule((function(){w.Hn.addListener(e),w.Hn.addListener(w.Ov),w.Hn.addListener(t),w.Hn.addListener(w.Iv),w.Hn.addListener(i),w.Hn.addListener(w.xv),w.Hn.addListener(w.Mv),w.Hn.addListener(s),w.Hn.addListener(n),w.Hn.addListener(h),w.Hn.addListener(u),w.Hn.addListener(d)})),cr.isRecordingSupported()&&this.we.schedule((function(){var t=new Nr(c,w.J,w.L,w.Fo,a,w.Xs,w.fv,w.Go,w.P,f,w.K,v,w.pi,w.yi,w.mi,l,w.gi,w.Hn,w.qc,w.bu,w.Wo,w.we,w.Xo);t.init(),w.Hn.addListener(t),i.setRecordingService(t.recordingService)})),this.we.schedule((function(){t.init()})),this.we.schedule((function(){f.onSessionExpired((function(){w.Hn.emitBeforeSessionRenewal(),w.Uv(!0),w.Hn.emitAfterSessionRenewal()})),w.Uv()})))},t.prototype.Uv=function(t){var n=this;void 0===t&&(t=!1),this.Go.start(),this.Dv.onLoad((function(){n.Hn.emitStartTracking(t)})),qs(this.L)&&!t||this.Pv(t)},t}(),xo=function(){function t(t,n,i,r,e,s,o,u){this.L=t,this.G=n,this.$t=i,this.jv=r,this.qv=e,this.Hv=s,this.zv=o,this.Bv=u}return t.prototype.compute=function(t){var n,i,r=this;this.L.crossDomainTracking&&!this.L.cookielessTrackingEnabled?this.L.crossDomainSingleIframeTracking?null===(n=this.zv)||void 0===n||n.start((function(){return r.Fv(t)})):null===(i=this.Hv)||void 0===i||i.applyUpToDate((function(){return r.Fv(t)})):this.Fv(t)},t.prototype.Fv=function(t){this.qv.handle(),this.jv.clear(),this.Vv()?(this.jv.restoreClearedVisitor(),t(!0)):(this.$t.exclude(this.L),t(!1))},t.prototype.Vv=function(){var t=Q.boolean(this.L.sampleRate);return this.Bv.isForceIncluded()||!this.$t.isExcluded()&&this.G.doesVisitorExist()||!this.$t.isExcluded()&&t},t}();!function(t){t.generate=function(){var t=navigator.userAgent+navigator.language+navigator.platform,n=csString.prototype.slice.call(function(t){for(var n=0,i=0;i<t.length;i+=1)n=csString.prototype.charCodeAt.call(t,i)+(n<<6)+(n<<16)-n;return Math.abs(n)}(t).toString(16),-4),i=(new csDate).getTime(),r="xxxxxxxx-hhhh-axxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(i+16*Math.random())%16|0;return i=Math.floor(i/16),("x"===t?n:7&n|8).toString(16)}));return csString.prototype.replace.call(r,"hhhh",n)}}(bo||(bo={}));var Lo,Po=function(){function t(t,n,i,r){this.L=t,this.Gv=n,this.J=i,this.Hn=r,this.Jv=1e4}return t.prototype.createOrUpdateVisitor=function(){var t=this.getVisitor();null===t&&(t=this.Yv(),this.J.removeSession()),this.Wv(t),this.setVisitor(t)},t.prototype.Yv=function(){return{id:bo.generate(),visitsCount:0,appliedTrackingDraw:this.L.lastTrackingDraw,creationTimestamp:yt(),lastVisitTimestamp:0,hitTimestamp:0,expires:pt()+this.L.visitorCookieTimeout}},t.prototype.Wv=function(t){var n=yt();this.J.doesSessionExist()||(t.visitsCount+=1,t.lastVisitTimestamp=n),t.hitTimestamp=n,t.appliedTrackingDraw=this.L.lastTrackingDraw,this.Xv=t.visitsCount},t.prototype.getRequestParameters=function(){var t=this.getVisitor();return t?{uu:t.id,sn:"".concat(t.visitsCount),hd:"".concat(t.hitTimestamp)}:{}},t.prototype.getVisitor=function(){return this.Gv.get()},t.prototype.setVisitor=function(t){this.Gv.set(t)},t.prototype.doesVisitorExist=function(){return null!==this.Gv.get()},t.prototype.removeVisitor=function(){this.Gv.remove()},t.prototype.handleSubdomainChange=function(){this.Gv.handleSubdomainChange()},t.prototype.isSessionRenewed=function(){var t=this.getVisitor();return null!==t&&void 0!==this.Xv&&t.visitsCount!==this.Xv},t.prototype.Kv=function(){return!bt(this.$v)||pt()-this.$v>this.Jv},t.prototype.renewVitor=function(){this.Kv()?(this.$v=pt(),this.Hn.emitBeforeVisitorRenewal(),this.removeVisitor(),this.Hn.emitAfterVisitorRenewal()):Wt.warn("session:start:newVisitor is trying to renew visitor under time limit")},t}(),Mo="_cs_s",Do=18e5,Uo=/^(\d+\.[013567T](\.[01])?)(\.\d+)?$/,jo=".";!function(t){t[t.NOT_FOUND=0]="NOT_FOUND",t[t.EXPIRED=1]="EXPIRED",t[t.FOUND=2]="FOUND"}(Lo||(Lo={}));var qo,Ho=function(){function t(t,n,i){this.L=t,this.Qv=n,this.Zv=i,this.Ro=null,this.tl=!1}return t.prototype.get=function(n){var i=this.getRawSession(n);return this.isValid(i)?t.fromString(i):null},t.prototype.getRawSession=function(n){if(n){var i=this.nl();return t.il(i)}var r=this.rl(),e=r.sessionString,s=r.status,o=t.il(e);if(s!==Lo.EXPIRED)return o;if(this.L.cookielessTrackingEnabled)return null;var u=this.nl();if(!u)return null;var h=csString.prototype.split.call(u,jo);if(!t.el(h))return u;var c=h[h.length-1],a=parseInt(c,10);return isNaN(a)||this.sl(a),o},t.prototype.onCookieToSet=function(t){this.ol=t},t.prototype.onCookieToRemove=function(t){this.ul=t},t.prototype.set=function(t,n){var i;void 0===n&&(n=Do);var r=pt()+n,e=this.toString(t);e+="".concat(jo).concat(r),this.hl(e,r),this.L.cookielessTrackingEnabled?this.Zv.setItem(Mo,e):(this.Qv.set(Mo,e,n),null===(i=this.ol)||void 0===i||i.call(this,Mo,e,n))},t.prototype.remove=function(){var t;this.L.cookielessTrackingEnabled?this.Zv.removeItem(Mo):(this.Qv.delete(Mo),null===(t=this.ul)||void 0===t||t.call(this,Mo)),this.cl()},t.prototype.handleSubdomainChange=function(){if(!this.L.cookielessTrackingEnabled){var t=this.get(!0);t&&(this.L.allowSubdomains?this.Qv.delete(Mo,nn.CURRENT_DOMAIN):this.Qv.delete(Mo,this.Qv.getRootDomain()),this.set(t))}},t.prototype.isValid=function(n){return null!==n&&t.isValidSessionString(n)},t.prototype.toString=function(t){return csArray.prototype.join.call([t.pageNumber,t.recordingState,t.etrState],jo)},t.prototype.hl=function(t,n){this.Ro={sessionString:t,expires:n}},t.prototype.rl=function(){return this.Ro?this.Ro&&pt()<=this.Ro.expires?{sessionString:this.Ro.sessionString,status:Lo.FOUND}:{sessionString:this.Ro.sessionString,status:Lo.EXPIRED}:{sessionString:this.nl(),status:Lo.NOT_FOUND}},t.prototype.cl=function(){this.Ro=null},t.prototype.sl=function(t){this.Ro&&(this.Ro.expires=t,this.tl=!0)},t.prototype.isCacheRefreshed=function(){return this.tl},t.prototype.resetCacheRefreshed=function(){this.tl=!1},t.prototype.nl=function(){if(this.L.cookielessTrackingEnabled){var t=this.Zv.getItem(Mo);return!t||this.al(t)?null:t}return this.Qv.get(Mo)},t.prototype.al=function(t){var n=csString.prototype.split.call(t,jo),i=parseInt(n[n.length-1],10);return!isNaN(i)&&pt()>i},t.el=function(t){return 13===t[t.length-1].length},t.il=function(t){var n;if(!t)return null;var i=null===(n=csString.prototype.match.call(t,Uo))||void 0===n?void 0:n[1];return null!=i?i:null},t.fromRawString=function(n){var i=t.il(n);return null!==i?t.fromString(i):null},t.fromString=function(t){var n=csString.prototype.split.call(t,jo),i=n[0],r=n[1],e=n[2];return{recordingState:r,etrState:null!=e?e:Bn.ETR_OFF,pageNumber:parseInt(i,10)}},t.isValidSessionString=function(t){return Uo.test(t)},t}(),zo=function(t){this.configuration=t},Bo=function(t){function n(n,i,r){var e=t.call(this,n)||this;return e.configuration=n,e.Bv=i,e.K=r,e}return z(n,t),n.prototype.sanitizeSessionRecordingState=function(t){return t},n.prototype.computeInitialRecordingState=function(t){return this.Bv.isForceLegacyReplayRecorded()||Q.percentage()<this.configuration.replayRecordingRate&&cr.isRecordingSupported()?Hn.REPLAY_RECORDING_ENABLED:Hn.REPLAY_RECORDING_DISABLED},n.prototype.updateRecordingState=function(t){return t.recordingState},n.prototype.isReplayRecorded=function(t){return t.recordingState===Hn.REPLAY_RECORDING_ENABLED||this.computeTriggerSessionReplayStatus(t)},n.prototype.computeTriggerSessionReplayStatus=function(t){if(this.configuration.triggerSessionReplayEnabled&&this.configuration.triggerSessionReplayRegex&&t.recordingState!==Hn.REPLAY_RECORDING_ENABLED){var n=this.K.getAnonymizedUrl();return this.configuration.triggerSessionReplayRegex.test(n)}return!1},n.prototype.getDisabledRecordingState=function(){return Hn.REPLAY_RECORDING_DISABLED},n.prototype.setVisitorService=function(t){},n}(zo),Fo=function(t){function n(n,i,r,e,s){var o=t.call(this,n)||this;return o.configuration=n,o.vl=i,o.Hn=r,o.Bv=e,o.K=s,o.ll=[],o}return z(n,t),n.prototype.init=function(){this.dl()},n.prototype.sanitizeSessionRecordingState=function(t){return t.recordingState===zn.TEMPORARILY_RECORDED&&(t.recordingState=zn.NOT_RECORDED),t},n.prototype.computeInitialRecordingState=function(t){return cr.isRecordingSupported()?(this.ll=[],Q.percentage()<this.configuration.replayRecordingRate||this.Bv.isForceMalkaReplayRecorded()?csArray.prototype.push.call(this.ll,zn.GLOBAL_SAMPLING):this.configuration.malkaUrlEnabled&&csArray.prototype.push.call(this.ll,zn.URL_SAMPLING),this.configuration.malkaEtrEnabled&&csArray.prototype.push.call(this.ll,zn.ETR_SAMPLING),this.ll.length>0?(this.wl(t),zn.TEMPORARILY_RECORDED):zn.NOT_RECORDED):zn.NOT_RECORDED},n.prototype.updateRecordingState=function(t){return cr.isRecordingSupported()?t.recordingState===zn.GLOBAL_SAMPLING?zn.GLOBAL_SAMPLING:(this.ll=[],this.configuration.malkaUrlEnabled&&(csArray.prototype.push.call(this.ll,zn.URL_SAMPLING),this.configuration.malkaEtrEnabled&&csArray.prototype.push.call(this.ll,zn.ETR_SAMPLING)),this.ll.length>0?(this.wl(t),zn.TEMPORARILY_RECORDED):zn.NOT_RECORDED):zn.NOT_RECORDED},n.prototype.wl=function(t){var n,i=null===(n=this.G)||void 0===n?void 0:n.getVisitor();this.vl.send({recordingTypes:csArray.prototype.map.call(this.ll,Number),url:this.K.getAnonymizedUrl(),projectId:this.configuration.projectId,uu:(null==i?void 0:i.id)||"",sn:(null==i?void 0:i.visitsCount)||"",pn:(null==t?void 0:t.pageNumber)||""})},n.prototype.abortQuotaServiceRequest=function(){this.vl.abort()},n.prototype.isReplayRecorded=function(t){return t.recordingState===zn.TEMPORARILY_RECORDED||t.recordingState===zn.GLOBAL_SAMPLING||t.recordingState===zn.URL_SAMPLING||t.etrState===Bn.ETR_ON},n.prototype.dl=function(){var t=this;this.vl.onError((function(){return t.quotaServiceErrorHandler("NetworkError")})),this.vl.onTimeout((function(){return t.quotaServiceTimeoutHandler()}),3e3),this.vl.onLoad((function(n){return t.quotaServiceLoadHandler(n)}))},n.prototype.quotaServiceErrorHandler=function(t){this.pl("error - ".concat(t))},n.prototype.quotaServiceTimeoutHandler=function(){this.pl("timeout")},n.prototype.pl=function(t){var n=zn.NOT_RECORDED;this.yl(this.ll)?(n=zn.GLOBAL_SAMPLING,Wt.warn("Quota Service: request ".concat(t," - bypassed by GLOBAL_SAMPLING"))):Wt.warn("Quota Service: request ".concat(t)),this.Hn.emitRecordingStateChange(n,Bn.ETR_OFF)},n.prototype.quotaServiceLoadHandler=function(t){if(200===t.status){var n;try{n=csJSON.parse(t.responseText)}catch(n){return void this.quotaServiceErrorHandler("Unable to parse the quota service response: ".concat(t.responseText))}var i=null==n.allowedRecordingTypes?void 0:csArray.prototype.map.call(n.allowedRecordingTypes,csString);if(i){var r=Bn.ETR_OFF,e=zn.NOT_RECORDED;this.yl(i)?e=zn.GLOBAL_SAMPLING:this.ml(i)&&(e=zn.URL_SAMPLING),this.gl(i)&&(r=Bn.ETR_ON),this.Hn.emitRecordingStateChange(e,r)}else this.quotaServiceErrorHandler("recording types missing from quota service response")}else this.quotaServiceErrorHandler("Status code: ".concat(t.status))},n.prototype.yl=function(t){return csArray.prototype.some.call(t,(function(t){return t===zn.GLOBAL_SAMPLING}))},n.prototype.ml=function(t){return csArray.prototype.some.call(t,(function(t){return t===zn.URL_SAMPLING}))},n.prototype.gl=function(t){return csArray.prototype.some.call(t,(function(t){return t===zn.ETR_SAMPLING}))},n.prototype.setVisitorService=function(t){this.G=t},n.prototype.getDisabledRecordingState=function(){return zn.NOT_RECORDED},F([tn("Quota Service: onerror")],n.prototype,"quotaServiceErrorHandler",null),F([tn("Quota Service: ontimeout")],n.prototype,"quotaServiceTimeoutHandler",null),F([tn("Quota Service: onload")],n.prototype,"quotaServiceLoadHandler",null),n}(zo),Vo=function(){function t(t,n){this.Sl=t,this.El=n,this.Al=!1,this.bl=null,this.Rl=0}return t.prototype.setDynamicVariablesService=function(t){this.Nl=t},t.prototype.createOrUpdateSession=function(){this.Tl(),this.Ol=pt(),this.Rl=0;var t=this.kl();null===t?(t=this.Cl(),this.Il(t),t.recordingState=this.El.computeInitialRecordingState(t)):(t=this.El.sanitizeSessionRecordingState(t),this.Il(t),t.recordingState=this.El.updateRecordingState(t)),this.setSession(t),this._l(t)},t.prototype.Cl=function(){return{pageNumber:0,recordingState:this.El.getDisabledRecordingState(),etrState:Bn.ETR_OFF}},t.prototype._l=function(t){this.El instanceof Bo?this.Al=this.El.computeTriggerSessionReplayStatus(t):this.Al=!1},t.prototype.Il=function(t){t.pageNumber+=1},t.prototype.isReplayRecorded=function(){var t=this.getSession();return!!t&&this.El.isReplayRecorded(t)},t.prototype.isTemporarilyRecorded=function(){var t=this.getSession();return(null==t?void 0:t.recordingState)===zn.TEMPORARILY_RECORDED},t.prototype.abortQuotaServiceRequest=function(){this.El instanceof Fo&&this.El.abortQuotaServiceRequest()},t.prototype.getRequestParameters=function(){var t={},n=this.getSession();return null!==n&&(t.pn="".concat(n.pageNumber),this.El instanceof Bo&&(t.re=this.Al?Hn.TRIGGER_REPLAY_RECORDING_ENABLED:n.recordingState)),t},t.prototype.getSession=function(){return this.Sl.get()},t.prototype.kl=function(){return this.Sl.get(!0)},t.prototype.doesSessionExist=function(){return null!==this.Sl.get()},t.prototype.setSession=function(t){this.Sl.set(t)},t.prototype.removeSession=function(){this.Sl.remove()},t.prototype.getRecordingStates=function(){var t=this.getSession(),n=[];return t&&(t.recordingState!==zn.NOT_RECORDED&&csArray.prototype.push.call(n,t.recordingState),t.etrState===Bn.ETR_ON&&csArray.prototype.push.call(n,zn.ETR_SAMPLING)),n},t.prototype.updateRecordingState=function(t,n){var i=this.getSession();null!==i&&(i.recordingState=t,i.etrState=n,this.setSession(i))},t.prototype.hasValidSession=function(){var t=this.Sl.getRawSession();return this.Sl.isValid(t)},t.prototype.handleSubdomainChange=function(){this.Sl.handleSubdomainChange()},t.prototype.pollCacheRefreshEvent=function(){var t=this.Sl.isCacheRefreshed();return t&&this.Sl.resetCacheRefreshed(),t},t.prototype.extendSessionPeriodically=function(){this.bl||this.xl()},t.prototype.xl=function(){if(this.Ll())this.Tl();else{var t=this.getSession();if(null===t)return Wt.warn("extendSession is trying to extend an expired session"),void this.Tl();this.Sl.set(t,Do),this.Pl(),this.Ml()}},t.prototype.Ml=function(){var t=this;this.bl=window.setTimeout((function(){t.xl()}),174e4)},t.prototype.Ll=function(){return 1434e4-(pt()+Do-this.Ol)<0},t.prototype.Tl=function(){this.bl&&(window.clearTimeout(this.bl),this.bl=null)},t.prototype.Pl=function(){this.Rl+=1,this.Nl.trackDynamicVariable("session_expiry_update",this.Rl)},t}(),Go=function(){function t(t,n,i){this.L=t,this.G=n,this.$t=i}return t.prototype.clear=function(){this.Dl()&&(this.Ul=this.G.getVisitor(),this.G.removeVisitor()),this.jl()&&this.$t.removeExclusion()},t.prototype.Dl=function(){return this.G.doesVisitorExist()&&this.G.getVisitor().appliedTrackingDraw!==this.L.lastTrackingDraw},t.prototype.jl=function(){return this.$t.getAppliedTrackingDraw()!==this.L.lastTrackingDraw},t.prototype.restoreClearedVisitor=function(){this.Ul&&this.G.setVisitor(this.Ul)},t}(),Jo=function(){function t(t,n){this.G=t,this.J=n}return t.prototype.handle=function(){this.ql(),this.Hl()},t.prototype.ql=function(){this.G.handleSubdomainChange()},t.prototype.Hl=function(){this.J.handleSubdomainChange()},t}(),Yo=function(){function t(){this.listeners=[]}return t.prototype.addListener=function(t){csArray.prototype.push.call(this.listeners,t)},t}(),Wo=function(t){function n(n){var i=t.call(this)||this;return i.we=n,i}return z(n,t),n.prototype.emitBeforeNaturalPageView=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onBeforeNaturalPageView&&i.onBeforeNaturalPageView()}},n.prototype.emitAfterNaturalPageView=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onAfterNaturalPageView&&i.onAfterNaturalPageView()}},n.prototype.emitInitTracking=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onInitTracking&&i.onInitTracking()}},n.prototype.emitStartTracking=function(t){for(var n=function(n){n.onStartTracking&&i.we.schedule((function(){return n.onStartTracking(t)}))},i=this,r=0,e=this.listeners;r<e.length;r++){n(e[r])}},n.prototype.emitArtificialPageViewEnd=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];if(i.onArtificialPageViewEnd)try{i.onArtificialPageViewEnd()}catch(t){Wt.error(t)}}},n.prototype.emitBeforeArtificialPageView=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onBeforeArtificialPageView&&i.onBeforeArtificialPageView()}},n.prototype.emitAfterArtificialPageView=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onAfterArtificialPageView&&i.onAfterArtificialPageView()}},n.prototype.emitBeforeSessionRenewal=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onBeforeSessionRenewal&&i.onBeforeSessionRenewal()}},n.prototype.emitAfterSessionRenewal=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onAfterSessionRenewal&&i.onAfterSessionRenewal()}},n.prototype.emitOptout=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onOptout&&i.onOptout()}},n.prototype.emitConsentGranted=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onConsentGranted&&i.onConsentGranted()}},n.prototype.emitConsentWithdrawn=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onConsentWithdrawn&&i.onConsentWithdrawn()}},n.prototype.emitRecordingStateChange=function(t,n){for(var i=0,r=this.listeners;i<r.length;i++){var e=r[i];e.onRecordingStateChange&&e.onRecordingStateChange(t,n)}},n.prototype.emitInitialDomStart=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onInitialDomStart&&i.onInitialDomStart()}},n.prototype.emitInitialDomDone=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onInitialDomDone&&r.onInitialDomDone(t)}},n.prototype.emitRecordingStatusChange=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onRecordingStatusChange&&i.onRecordingStatusChange()}},n.prototype.emitBeforeVisitorRenewal=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onBeforeVisitorRenewal&&i.onBeforeVisitorRenewal()}},n.prototype.emitAfterVisitorRenewal=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onAfterVisitorRenewal&&i.onAfterVisitorRenewal()}},F([Cn("emitStartTracking")],n.prototype,"emitStartTracking",null),n}(Yo),Xo="_cs_c";!function(t){t[t.NOT_REQUIRED=0]="NOT_REQUIRED",t[t.NOT_EXPRESSED=1]="NOT_EXPRESSED",t[t.GRANTED=2]="GRANTED",t[t.WITHDRAWN=3]="WITHDRAWN"}(qo||(qo={}));var Ko,$o=function(){function t(t,n,i){this.L=t,this.Qv=n,this.zl=i}return t.prototype.get=function(){var t;return null===(t=this.L.cookielessTrackingEnabled?this.zl.getItem(Xo):this.Qv.get(Xo))?t:Number(t)},t.prototype.set=function(t){this.L.cookielessTrackingEnabled?this.zl.setItem(Xo,csString(t)):this.Qv.set(Xo,csString(t),$)},t.prototype.remove=function(){this.L.cookielessTrackingEnabled?this.zl.removeItem(Xo):this.Qv.delete(Xo)},t.prototype.handleSubdomainChange=function(){this.L.cookielessTrackingEnabled||(this.L.allowSubdomains?this.Qv.delete(Xo,nn.CURRENT_DOMAIN):this.Qv.delete(Xo,this.Qv.getRootDomain()))},t}(),Qo=["trackConsentGranted"],Zo=["trackConsentWithdrawn"],tu=function(){function t(t,n){this.Go=t,this._u=n}return t.prototype.init=function(){this._u.handleSubdomainChange(),this._u.setInitialConsent(),this.mv()},t.prototype.mv=function(){var t=this;this.Go.register(Qo,(function(){t._u.grantConsent()})),this.Go.register(Zo,(function(){t._u.withdrawConsent()}))},t.prototype.onOptout=function(){this._u.removeConsent()},t.prototype.onBeforeVisitorRenewal=function(){this._u.removeConsent()},t.prototype.onAfterVisitorRenewal=function(){this._u.setInitialConsent()},t}(),nu=function(){function t(t,n,i){this.L=t,this.Gv=n,this.Hn=i}return t.prototype.setInitialConsent=function(){var t=this.Gv.get();(null===t||this.hasConsentRequiredChanged(t))&&this.Bl()},t.prototype.hasConsentRequiredChanged=function(t){var n=this.L.consentRequired;return n&&t===qo.NOT_REQUIRED||!n&&t!==qo.NOT_REQUIRED},t.prototype.handleSubdomainChange=function(){this.Gv.handleSubdomainChange()},t.prototype.Bl=function(){var t=this.L.consentRequired?qo.NOT_EXPRESSED:qo.NOT_REQUIRED;this.Gv.set(t)},t.prototype.grantConsent=function(){this.L.consentRequired&&(this.Gv.set(qo.GRANTED),this.Hn.emitConsentGranted())},t.prototype.withdrawConsent=function(){this.L.consentRequired&&(this.Gv.set(qo.WITHDRAWN),this.Hn.emitConsentWithdrawn())},t.prototype.removeConsent=function(){this.Gv.remove()},t.prototype.isAllowedByConsent=function(){return!this.L.consentRequired||this.Gv.get()===qo.GRANTED},t.prototype.getRequestParameters=function(){return{uc:"".concat(this.Gv.get())}},t}(),iu=function(){function t(t,n,i,r,e,s,o){this.Hn=t,this.Go=n,this.Ov=i,this.kv=r,this.Cv=e,this.Fl=s,this.Iv=o}return t.prototype.start=function(){this.Hn.addListener(this.Fl),this.Hn.addListener(this.Iv),this.Hn.addListener(this.Ov),this.Iv.init(),this.kv.init(),this.Cv.init(),this.Cv.isActive()||this.Go.start()},t}(),ru="_cs_ex",eu=2592e6,su=/^[0-9]+$/,ou=function(){function t(t,n,i){this.L=t,this.Qv=n,this.Zv=i}return t.prototype.onCookieToSet=function(t){this.ol=t},t.prototype.onCookieToRemove=function(t){this.ul=t},t.prototype.get=function(){return this.L.cookielessTrackingEnabled?Number(this.Zv.getItem(ru)):Number(this.Qv.get(ru))},t.prototype.set=function(t){var n;this.L.cookielessTrackingEnabled?this.Zv.setItem(ru,t):(this.Qv.set(ru,t,eu),null===(n=this.ol)||void 0===n||n.call(this,ru,t,eu))},t.prototype.remove=function(){var t;this.L.cookielessTrackingEnabled?this.Zv.removeItem(ru):(this.Qv.delete(ru),null===(t=this.ul)||void 0===t||t.call(this,ru))},t.isValidExclusionString=function(t){return su.test(t)},t}(),uu=function(){function t(t,n){this.Br=t,this.Gv=n}return t.prototype.exclude=function(t){this.Gv.set(csString(t.lastTrackingDraw))},t.prototype.removeExclusion=function(){this.Gv.remove()},t.prototype.isExcluded=function(){return this.Vl()||this.Gl()},t.prototype.Vl=function(){return 0!==this.getAppliedTrackingDraw()},t.prototype.getAppliedTrackingDraw=function(){return this.Gv.get()},t.prototype.Gl=function(){return csString.prototype.indexOf.call(this.Br.href,ru)>0},t}(),hu=function(){function t(t){this._u=t}return t.prototype.onOptout=function(){this._u.removeExclusion()},t}();!function(t){t.SessionReplay="SR",t.None=""}(Ko||(Ko={}));var cu=function(){function t(t){this.K=t,this.Jl=new RegExp("".concat(".^"))}return t.prototype.setExcludeUrlForSessionReplay=function(t){this.Jl=new RegExp(t)},t.prototype.Yl=function(){return this.Jl.test(this.K.getAnonymizedUrl())?Ko.SessionReplay:Ko.None},t.prototype.isUrlExcludedForSessionReplay=function(){return this.Yl()===Ko.SessionReplay},t.prototype.getRequestParameters=function(){return{ex:this.Yl()}},t}(),au=["excludeURLforReplay"],fu=function(){function t(t,n){this._u=t,this.Go=n}return t.prototype.init=function(){var t=this;this.Go.register(au,(function(n){Et(n)&&t._u.setExcludeUrlForSessionReplay(n)}))},t}(),vu="_cs_inc",lu=function(){function t(t,n){this.Br=t,this.Qv=n}return t.prototype.isForceIncluded=function(){return this.Wl()||this.Xl()},t.prototype.isForceLegacyReplayRecorded=function(){return this.Kl(Hn.REPLAY_RECORDING_ENABLED)||this.$l(Hn.REPLAY_RECORDING_ENABLED)},t.prototype.isForceMalkaReplayRecorded=function(){return this.Kl(zn.GLOBAL_SAMPLING)},t.prototype.Wl=function(){return null!==this.Qv.get(vu)},t.prototype.Kl=function(t){return this.Qv.get(vu)===t},t.prototype.Xl=function(){return csString.prototype.indexOf.call(this.Br.href,vu)>0},t.prototype.$l=function(t){return csString.prototype.indexOf.call(this.Br.href,"".concat(vu,"=").concat(t))>0},t}(),du="_cs_optout",wu=function(){function t(t,n,i){this.L=t,this.Qv=n,this.zl=i}return t.prototype.get=function(){return this.L.cookielessTrackingEnabled?this.zl.getItem(du):this.Qv.get(du)},t.prototype.set=function(t){this.L.cookielessTrackingEnabled?this.zl.setItem(du,t):this.Qv.set(du,t,$)},t}(),pu=function(){function t(t,n,i){this.Hn=t,this.Br=n,this.Gv=i}return t.prototype.init=function(){!this.isActive()&&this.Ql()&&this.activate()},t.prototype.isActive=function(){return"1"===this.Gv.get()},t.prototype.activate=function(){this.Hn.emitOptout(),this.Gv.set("1")},t.prototype.Ql=function(){return csString.prototype.indexOf.call(this.Br.href,du)>0},t}(),yu=["optout"],mu=function(){function t(t,n){this.Go=t,this.Cv=n}return t.prototype.init=function(){var t=this;this.Go.register(yu,(function(){t.Cv.activate()}))},t}(),gu=function(){function t(t,n){this.Go=t,this.bu=n}return t.prototype.init=function(){this.bu.addListener(this.Go)},t.prototype.onOptout=function(){this.Go.stop()},t.prototype.onBeforeSessionRenewal=function(){this.Go.stop()},t}();var Su;!function(t){t.UXA="_uxa",t.WVT="cs_wvt"}(Su||(Su={}));var Eu=function(t){function n(n){var i=t.call(this)||this;return i.Zl=n,i.td={},i}return z(n,t),n.prototype.register=function(t,n,i){for(var r=0,e=t;r<e.length;r++){var s=e[r];this.td[s]={callback:n,configuration:i},this.td}},n.prototype.onStart=function(){this.nd(),this.rd()},n.prototype.onStop=function(){for(var t=0,n=this.Zl;t<n.length;t++){var i=n[t];window[i]=[]}},n.prototype.onIframeCommands=function(t){for(var n=0,i=t.commands;n<i.length;n++){var r=i[n];this.sd(r.name,r.params,t.iframePath)}},n.prototype.sd=function(t,n,i){var r=this;Wt.tryToExecute("Commands.apply.from.iframe: ".concat(i),(function(){var i;if(r.td[t])return(i=r.td[t]).callback.apply(i,n)}))()},n.prototype.nd=function(){for(var t=this,n=0,i=this.Zl;n<i.length;n++){var r=i[n];window[r].forEach((function(n){var i=n[0],r=n.slice(1);return t.od(i,r,!1)}))}},n.prototype.rd=function(){for(var t=this,n=0,i=this.Zl;n<i.length;n++){var r=i[n];window[r]={push:function(n){var i=n[0],r=n.slice(1);return t.od(i,r,!0)}}}},n.prototype.od=function(t,n,i){var r,e;if(this.td[t]){if((null===(e=this.td[t].configuration)||void 0===e?void 0:e.disableApplyPending)&&!i)return void Wt.warn("Command ".concat(t," is disabled when pushed before tag starts"));try{return(r=this.td[t]).callback.apply(r,n)}catch(i){Wt.error("Command ".concat(t," failed - params: ").concat(csJSON.stringify(n)),i)}}},n}(Xn),Au=function(){function t(t,n,i){this.L=t,this.G=n,this.J=i}return t.prototype.getRequestParameters=function(){var t=B(B({},wt()),this.L.getRequestParameters()),n=this.J.getSession();n&&(t.pn="".concat(n.pageNumber));var i=this.G.getVisitor();return i&&(t.sn="".concat(i.visitsCount),t.uu="".concat(i.id)),t},t}(),bu=function(){function t(t,n){this.Go=t,this.k=n}return t.prototype.init=function(){var t=this;this.Go.register(["debugEvents"],(function(n){"boolean"==typeof n&&t.k.updateDynamicFields("emitDebugEvents",n)}))},t}();function Ru(t,n,i){if(!bt(n)&&!bt(i))return t.href;var r=bt(n)?function(t){return X(t,"/")?t:"/".concat(t)}(n):t.pathname,e=bt(i)?function(t){return X(t,"?")||""===t?t:"?".concat(t)}(i):t.search;return"".concat(t.protocol,"//").concat(t.host).concat(r).concat(e)}var Nu,Tu=function(){function t(t,n){this.Br=t,this.Ec=n}return t.prototype.overridePath=function(t){bt(t)&&Et(t)&&(this.ud=""===t?void 0:t)},t.prototype.overrideQuery=function(t){bt(t)&&Et(t)&&(this.ad=t)},t.prototype.computeOverriddenUrl=function(t){return this.vd(t)?this.getAnonymizedUrl():t},t.prototype.vd=function(t){var n=this.ld(this.Br.href);return this.ld(t)===n},t.prototype.ld=function(t){return K(t,"/")?csString.prototype.slice.call(t,0,-1):t},t.prototype.getAnonymizedUrl=function(){var t=Ru(this.Br,this.ud,this.ad);return this.Ec.anonymizeUrl(t,[])},t.prototype.getUrlProtocol=function(){return this.Br.protocol},t.prototype.getRequestParameters=function(){return{url:this.getAnonymizedUrl()}},t}(),Ou=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return z(n,t),n.prototype.emitPageEvent=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onPageEvent&&r.onPageEvent(t)}},n.prototype.emitEventTriggerRecording=function(t,n){for(var i=0,r=this.listeners;i<r.length;i++){var e=r[i];e.onEventTriggerRecording&&e.onEventTriggerRecording(t,n)}},n.prototype.emitCustomJavaScriptErrorEvent=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onCustomJavaScriptErrorEvent&&r.onCustomJavaScriptErrorEvent(t)}},n.prototype.emitCustomErrorEvent=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onCustomErrorEvent&&r.onCustomErrorEvent(t)}},n.prototype.emitUserIdentifierEvent=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onUserIdentifierEvent&&r.onUserIdentifierEvent(t)}},n}(Yo),ku="|iframe|",Cu=function(t){function n(n,i,r,e){var s=t.call(this)||this;return s.dd=n,s.wd=i,s.pd=r,s.yd=e,s}return z(n,t),n.prototype.emitIframeEvent=function(t,n,i){if(this.md(n)&&null===t)Wt.error("iframeEventEmitter received event ".concat(n," with null iframe, content:").concat(csJSON.stringify(i)));else switch(n){case Bt.ChildLogMessage:this.gd(i);break;case Bt.AnalysisEvent:var r=this.dd.transformEvent(t,i);this.Sd(r);break;case Bt.RecordingEvent:var e=i,s=this.yd.transformEvents(t,e);if(0===s.events.length)return;s.containsUserEvent?this.Ed(s.events):this.Ad(s.events);break;case Bt.JavascriptError:this.bd(i);break;case Bt.ApiError:this.Rd(i);break;case Bt.DetailedApiError:this.Nd(i);break;case Bt.EmerchandisingMessage:var o=this.pd.transformEvent(t,i);this.Td(o);break;case Bt.Commands:var u=this.wd.transformEvent(t,i);this.Od(u);break;case Bt.IntegrationCallback:this.kd(i);break;case Bt.TrackingContextRequestMessage:this.Cd(i);break;default:Wt.error("Parent received unknown data type from iframe : ".concat(csJSON.stringify(i)))}},n.prototype.md=function(t){var n=[Bt.AnalysisEvent,Bt.RecordingEvent,Bt.EmerchandisingMessage,Bt.Commands];return-1!==csArray.prototype.indexOf.call(n,t)},n.prototype.gd=function(t){var n=t.message,i=t.errorCode;switch(t.level){case tt.debug:Wt.debug(n,i);break;case tt.warn:Wt.warn(n,i);break;case tt.error:Wt.error(n,i);break;case tt.critical:Wt.critical(n,i)}},n.prototype.Sd=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeAnalysisEvent&&r.onIframeAnalysisEvent(t)}},n.prototype.Ed=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeRecordingUserEvent&&r.onIframeRecordingUserEvent(t)}},n.prototype.Ad=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeRecordingBrowserEvent&&r.onIframeRecordingBrowserEvent(t)}},n.prototype.bd=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeJavascriptError&&r.onIframeJavascriptError(t)}},n.prototype.Rd=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeApiError&&r.onIframeApiError(t)}},n.prototype.Nd=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeDetailedApiError&&r.onIframeDetailedApiError(t)}},n.prototype.Td=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeEmerchandisingMessage&&r.onIframeEmerchandisingMessage(t)}},n.prototype.Od=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeCommands&&r.onIframeCommands(t)}},n.prototype.kd=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeIntegrationCallback&&r.onIframeIntegrationCallback(t)}},n.prototype.Cd=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onTrackingContextRequestCallback&&r.onTrackingContextRequestCallback(t)}},n}(Yo);!function(t){t.COMPRESSION_DISABLED="compressionDisabled"}(Nu||(Nu={}));var Iu=function(){function t(){}return t.init=function(t){var n;void 0===t&&(t=document.cookie);var i=null===(n=/_cs_debug=((\w|\.|\:|=)+)/g.exec(t))||void 0===n?void 0:n[1];if(this.Id=new Map,i)for(var r=csString.prototype.split.call(i,"."),e=0;e<r.length;e++){var s=csString.prototype.split.call(r[e],"="),o=s[0],u=s[1];this.Id.set(o,u||"true")}},t.getBoolean=function(t){var n=this.getString(t);return null!=n&&"false"!==n&&0!==parseInt(n)},t.getString=function(t){var n;return null===(n=this.Id)||void 0===n?void 0:n.get(t)},t.isCompressionEnabled=function(){return!this.getBoolean(Nu.COMPRESSION_DISABLED)},t.Log=function(n){return function(i,r,e){var s,o=r.toString(),u="".concat(null===(s=i.constructor)||void 0===s?void 0:s.name,".").concat(o),h=e.value;(function(t,n){var i;if(null==t)return!1;return t===n||!!(null===(i=csString.prototype.match.call(t,new RegExp("(^|,)("+n+")(,|$)")))||void 0===i?void 0:i.length)})(t.getString("debugLog"),n)&&(e.value=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return console.log.apply(console,J([u],t,!1)),h.bind(this).apply(void 0,t)})}},t}();function _u(){function t(t){for(var n=t.length;--n>=0;)t[n]=0}var n=256,i=286,r=30,e=15,s=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),o=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),u=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),h=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),c=new Array(576);t(c);var a=new Array(60);t(a);var f=new Array(512);t(f);var v=new Array(256);t(v);var l=new Array(29);t(l);var d,w,p,y=new Array(r);function m(t,n,i,r,e){this.static_tree=t,this.extra_bits=n,this.extra_base=i,this.elems=r,this.max_length=e,this.has_stree=t&&t.length}function g(t,n){this.dyn_tree=t,this.max_code=0,this.stat_desc=n}t(y);var S=function(t){return t<256?f[t]:f[256+(t>>>7)]},E=function(t,n){t.pending_buf[t.pending++]=255&n,t.pending_buf[t.pending++]=n>>>8&255},A=function(t,n,i){t.bi_valid>16-i?(t.bi_buf|=n<<t.bi_valid&65535,E(t,t.bi_buf),t.bi_buf=n>>16-t.bi_valid,t.bi_valid+=i-16):(t.bi_buf|=n<<t.bi_valid&65535,t.bi_valid+=i)},b=function(t,n,i){A(t,i[2*n],i[2*n+1])},R=function(t,n){var i=0;do{i|=1&t,t>>>=1,i<<=1}while(--n>0);return i>>>1},N=function(t,n,i){var r,s,o=new Array(16),u=0;for(r=1;r<=e;r++)o[r]=u=u+i[r-1]<<1;for(s=0;s<=n;s++){var h=t[2*s+1];0!==h&&(t[2*s]=R(o[h]++,h))}},T=function(t){var n;for(n=0;n<i;n++)t.dyn_ltree[2*n]=0;for(n=0;n<r;n++)t.dyn_dtree[2*n]=0;for(n=0;n<19;n++)t.bl_tree[2*n]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0},O=function(t){t.bi_valid>8?E(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},k=function(t,n,i,r){var e=2*n,s=2*i;return t[e]<t[s]||t[e]===t[s]&&r[n]<=r[i]},C=function(t,n,i){for(var r=t.heap[i],e=i<<1;e<=t.heap_len&&(e<t.heap_len&&k(n,t.heap[e+1],t.heap[e],t.depth)&&e++,!k(n,r,t.heap[e],t.depth));)t.heap[i]=t.heap[e],i=e,e<<=1;t.heap[i]=r},I=function(t,i,r){var e,u,h,c,a=0;if(0!==t.last_lit)do{e=t.pending_buf[t.d_buf+2*a]<<8|t.pending_buf[t.d_buf+2*a+1],u=t.pending_buf[t.l_buf+a],a++,0===e?b(t,u,i):(h=v[u],b(t,h+n+1,i),0!==(c=s[h])&&(u-=l[h],A(t,u,c)),e--,h=S(e),b(t,h,r),0!==(c=o[h])&&(e-=y[h],A(t,e,c)))}while(a<t.last_lit);b(t,256,i)},_=function(t,n){var i,r,s,o=n.dyn_tree,u=n.stat_desc.static_tree,h=n.stat_desc.has_stree,c=n.stat_desc.elems,a=-1;for(t.heap_len=0,t.heap_max=573,i=0;i<c;i++)0!==o[2*i]?(t.heap[++t.heap_len]=a=i,t.depth[i]=0):o[2*i+1]=0;for(;t.heap_len<2;)o[2*(s=t.heap[++t.heap_len]=a<2?++a:0)]=1,t.depth[s]=0,t.opt_len--,h&&(t.static_len-=u[2*s+1]);for(n.max_code=a,i=t.heap_len>>1;i>=1;i--)C(t,o,i);s=c;do{i=t.heap[1],t.heap[1]=t.heap[t.heap_len--],C(t,o,1),r=t.heap[1],t.heap[--t.heap_max]=i,t.heap[--t.heap_max]=r,o[2*s]=o[2*i]+o[2*r],t.depth[s]=(t.depth[i]>=t.depth[r]?t.depth[i]:t.depth[r])+1,o[2*i+1]=o[2*r+1]=s,t.heap[1]=s++,C(t,o,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,n){var i,r,s,o,u,h,c=n.dyn_tree,a=n.max_code,f=n.stat_desc.static_tree,v=n.stat_desc.has_stree,l=n.stat_desc.extra_bits,d=n.stat_desc.extra_base,w=n.stat_desc.max_length,p=0;for(o=0;o<=e;o++)t.bl_count[o]=0;for(c[2*t.heap[t.heap_max]+1]=0,i=t.heap_max+1;i<573;i++)(o=c[2*c[2*(r=t.heap[i])+1]+1]+1)>w&&(o=w,p++),c[2*r+1]=o,r>a||(t.bl_count[o]++,u=0,r>=d&&(u=l[r-d]),h=c[2*r],t.opt_len+=h*(o+u),v&&(t.static_len+=h*(f[2*r+1]+u)));if(0!==p){do{for(o=w-1;0===t.bl_count[o];)o--;t.bl_count[o]--,t.bl_count[o+1]+=2,t.bl_count[w]--,p-=2}while(p>0);for(o=w;0!==o;o--)for(r=t.bl_count[o];0!==r;)(s=t.heap[--i])>a||(c[2*s+1]!==o&&(t.opt_len+=(o-c[2*s+1])*c[2*s],c[2*s+1]=o),r--)}}(t,n),N(o,a,t.bl_count)},x=function(t,n,i){var r,e,s=-1,o=n[1],u=0,h=7,c=4;for(0===o&&(h=138,c=3),n[2*(i+1)+1]=65535,r=0;r<=i;r++)e=o,o=n[2*(r+1)+1],++u<h&&e===o||(u<c?t.bl_tree[2*e]+=u:0!==e?(e!==s&&t.bl_tree[2*e]++,t.bl_tree[32]++):u<=10?t.bl_tree[34]++:t.bl_tree[36]++,u=0,s=e,0===o?(h=138,c=3):e===o?(h=6,c=3):(h=7,c=4))},L=function(t,n,i){var r,e,s=-1,o=n[1],u=0,h=7,c=4;for(0===o&&(h=138,c=3),r=0;r<=i;r++)if(e=o,o=n[2*(r+1)+1],!(++u<h&&e===o)){if(u<c)do{b(t,e,t.bl_tree)}while(0!=--u);else 0!==e?(e!==s&&(b(t,e,t.bl_tree),u--),b(t,16,t.bl_tree),A(t,u-3,2)):u<=10?(b(t,17,t.bl_tree),A(t,u-3,3)):(b(t,18,t.bl_tree),A(t,u-11,7));u=0,s=e,0===o?(h=138,c=3):e===o?(h=6,c=3):(h=7,c=4)}},P=!1,M=function(t,n,i,r){A(t,0+(r?1:0),3),function(t,n,i,r){O(t),r&&(E(t,i),E(t,~i)),t.pending_buf.set(t.window.subarray(n,n+i),t.pending),t.pending+=i}(t,n,i,!0)},D=function(t){P||(!function(){var t,n,h,g,S,E=new Array(16);for(h=0,g=0;g<28;g++)for(l[g]=h,t=0;t<1<<s[g];t++)v[h++]=g;for(v[h-1]=g,S=0,g=0;g<16;g++)for(y[g]=S,t=0;t<1<<o[g];t++)f[S++]=g;for(S>>=7;g<r;g++)for(y[g]=S<<7,t=0;t<1<<o[g]-7;t++)f[256+S++]=g;for(n=0;n<=e;n++)E[n]=0;for(t=0;t<=143;)c[2*t+1]=8,t++,E[8]++;for(;t<=255;)c[2*t+1]=9,t++,E[9]++;for(;t<=279;)c[2*t+1]=7,t++,E[7]++;for(;t<=287;)c[2*t+1]=8,t++,E[8]++;for(N(c,287,E),t=0;t<r;t++)a[2*t+1]=5,a[2*t]=R(t,5);d=new m(c,s,257,i,e),w=new m(a,o,0,r,e),p=new m(new Array(0),u,0,19,7)}(),P=!0),t.l_desc=new g(t.dyn_ltree,d),t.d_desc=new g(t.dyn_dtree,w),t.bl_desc=new g(t.bl_tree,p),t.bi_buf=0,t.bi_valid=0,T(t)},U=function(t,i,r,e){var s,o,u=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=function(t){var i,r=4093624447;for(i=0;i<=31;i++,r>>>=1)if(1&r&&0!==t.dyn_ltree[2*i])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(i=32;i<n;i++)if(0!==t.dyn_ltree[2*i])return 1;return 0}(t)),_(t,t.l_desc),_(t,t.d_desc),u=function(t){var n;for(x(t,t.dyn_ltree,t.l_desc.max_code),x(t,t.dyn_dtree,t.d_desc.max_code),_(t,t.bl_desc),n=18;n>=3&&0===t.bl_tree[2*h[n]+1];n--);return t.opt_len+=3*(n+1)+5+5+4,n}(t),s=t.opt_len+3+7>>>3,(o=t.static_len+3+7>>>3)<=s&&(s=o)):s=o=r+5,r+4<=s&&-1!==i?M(t,i,r,e):4===t.strategy||o===s?(A(t,2+(e?1:0),3),I(t,c,a)):(A(t,4+(e?1:0),3),function(t,n,i,r){var e;for(A(t,n-257,5),A(t,i-1,5),A(t,r-4,4),e=0;e<r;e++)A(t,t.bl_tree[2*h[e]+1],3);L(t,t.dyn_ltree,n-1),L(t,t.dyn_dtree,i-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,u+1),I(t,t.dyn_ltree,t.dyn_dtree)),T(t),e&&O(t)},j=function(t,i,r){return t.pending_buf[t.d_buf+2*t.last_lit]=i>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&i,t.pending_buf[t.l_buf+t.last_lit]=255&r,t.last_lit++,0===i?t.dyn_ltree[2*r]++:(t.matches++,i--,t.dyn_ltree[2*(v[r]+n+1)]++,t.dyn_dtree[2*S(i)]++),t.last_lit===t.lit_bufsize-1},q=function(t){A(t,2,3),b(t,256,c),function(t){16===t.bi_valid?(E(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)},H={_tr_init:D,_tr_stored_block:M,_tr_flush_block:U,_tr_tally:j,_tr_align:q},z=function(t,n,i,r){for(var e=65535&t|0,s=t>>>16&65535|0,o=0;0!==i;){i-=o=i>2e3?2e3:i;do{s=s+(e=e+n[r++]|0)|0}while(--o);e%=65521,s%=65521}return e|s<<16|0},B=new Uint32Array(function(){for(var t,n=[],i=0;i<256;i++){t=i;for(var r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;n[i]=t}return n}()),F=function(t,n,i,r){var e=B,s=r+i;t^=-1;for(var o=r;o<s;o++)t=t>>>8^e[255&(t^n[o])];return-1^t},V={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},G=0,J=2,Y=3,W=4,X=0,K=1,$=-1,Q=0,Z=8,tt=H._tr_init,nt=H._tr_stored_block,it=H._tr_flush_block,rt=H._tr_tally,et=H._tr_align,st=G,ot=1,ut=Y,ht=W,ct=5,at=X,ft=K,vt=-2,lt=-3,dt=-5,wt=$,pt=1,yt=2,mt=3,gt=4,St=Q,Et=2,At=Z,bt=258,Rt=262,Nt=103,Tt=113,Ot=666,kt=function(t,n){return t.msg=V[n],n},Ct=function(t){return(t<<1)-(t>4?9:0)},It=function(t){for(var n=t.length;--n>=0;)t[n]=0},_t=function(t,n,i){return(n<<t.hash_shift^i)&t.hash_mask},xt=function(t){var n=t.state,i=n.pending;i>t.avail_out&&(i=t.avail_out),0!==i&&(t.output.set(n.pending_buf.subarray(n.pending_out,n.pending_out+i),t.next_out),t.next_out+=i,n.pending_out+=i,t.total_out+=i,t.avail_out-=i,n.pending-=i,0===n.pending&&(n.pending_out=0))},Lt=function(t,n){it(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,n),t.block_start=t.strstart,xt(t.strm)},Pt=function(t,n){t.pending_buf[t.pending++]=n},Mt=function(t,n){t.pending_buf[t.pending++]=n>>>8&255,t.pending_buf[t.pending++]=255&n},Dt=function(t,n){var i,r,e=t.max_chain_length,s=t.strstart,o=t.prev_length,u=t.nice_match,h=t.strstart>t.w_size-Rt?t.strstart-(t.w_size-Rt):0,c=t.window,a=t.w_mask,f=t.prev,v=t.strstart+bt,l=c[s+o-1],d=c[s+o];t.prev_length>=t.good_match&&(e>>=2),u>t.lookahead&&(u=t.lookahead);do{if(c[(i=n)+o]===d&&c[i+o-1]===l&&c[i]===c[s]&&c[++i]===c[s+1]){s+=2,i++;do{}while(c[++s]===c[++i]&&c[++s]===c[++i]&&c[++s]===c[++i]&&c[++s]===c[++i]&&c[++s]===c[++i]&&c[++s]===c[++i]&&c[++s]===c[++i]&&c[++s]===c[++i]&&s<v);if(r=bt-(v-s),s=v-bt,r>o){if(t.match_start=n,o=r,r>=u)break;l=c[s+o-1],d=c[s+o]}}}while((n=f[n&a])>h&&0!=--e);return o<=t.lookahead?o:t.lookahead},Ut=function(t){var n,i,r,e,s,o,u,h,c,a,f=t.w_size;do{if(e=t.window_size-t.lookahead-t.strstart,t.strstart>=f+(f-Rt)){t.window.set(t.window.subarray(f,f+f),0),t.match_start-=f,t.strstart-=f,t.block_start-=f,n=i=t.hash_size;do{r=t.head[--n],t.head[n]=r>=f?r-f:0}while(--i);n=i=f;do{r=t.prev[--n],t.prev[n]=r>=f?r-f:0}while(--i);e+=f}if(0===t.strm.avail_in)break;if(o=t.strm,u=t.window,h=t.strstart+t.lookahead,c=e,a=void 0,(a=o.avail_in)>c&&(a=c),i=0===a?0:(o.avail_in-=a,u.set(o.input.subarray(o.next_in,o.next_in+a),h),1===o.state.wrap?o.adler=z(o.adler,u,a,h):2===o.state.wrap&&(o.adler=F(o.adler,u,a,h)),o.next_in+=a,o.total_in+=a,a),t.lookahead+=i,t.lookahead+t.insert>=3)for(s=t.strstart-t.insert,t.ins_h=t.window[s],t.ins_h=_t(t,t.ins_h,t.window[s+1]);t.insert&&(t.ins_h=_t(t,t.ins_h,t.window[s+3-1]),t.prev[s&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=s,s++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<Rt&&0!==t.strm.avail_in)},jt=function(t,n){for(var i,r;;){if(t.lookahead<Rt){if(Ut(t),t.lookahead<Rt&&n===st)return 1;if(0===t.lookahead)break}if(i=0,t.lookahead>=3&&(t.ins_h=_t(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==i&&t.strstart-i<=t.w_size-Rt&&(t.match_length=Dt(t,i)),t.match_length>=3)if(r=rt(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=_t(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=_t(t,t.ins_h,t.window[t.strstart+1]);else r=rt(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(r&&(Lt(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,n===ht?(Lt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Lt(t,!1),0===t.strm.avail_out)?1:2},qt=function(t,n){for(var i,r,e;;){if(t.lookahead<Rt){if(Ut(t),t.lookahead<Rt&&n===st)return 1;if(0===t.lookahead)break}if(i=0,t.lookahead>=3&&(t.ins_h=_t(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==i&&t.prev_length<t.max_lazy_match&&t.strstart-i<=t.w_size-Rt&&(t.match_length=Dt(t,i),t.match_length<=5&&(t.strategy===pt||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){e=t.strstart+t.lookahead-3,r=rt(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=e&&(t.ins_h=_t(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,r&&(Lt(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((r=rt(t,0,t.window[t.strstart-1]))&&Lt(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(r=rt(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,n===ht?(Lt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Lt(t,!1),0===t.strm.avail_out)?1:2};function Ht(t,n,i,r,e){this.good_length=t,this.max_lazy=n,this.nice_length=i,this.max_chain=r,this.func=e}var zt=[new Ht(0,0,0,0,(function(t,n){var i=65535;for(i>t.pending_buf_size-5&&(i=t.pending_buf_size-5);;){if(t.lookahead<=1){if(Ut(t),0===t.lookahead&&n===st)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var r=t.block_start+i;if((0===t.strstart||t.strstart>=r)&&(t.lookahead=t.strstart-r,t.strstart=r,Lt(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-Rt&&(Lt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,n===ht?(Lt(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(Lt(t,!1),t.strm.avail_out),1)})),new Ht(4,4,8,4,jt),new Ht(4,5,16,8,jt),new Ht(4,6,32,32,jt),new Ht(4,4,16,16,qt),new Ht(8,16,32,32,qt),new Ht(8,16,128,128,qt),new Ht(8,32,128,256,qt),new Ht(32,128,258,1024,qt),new Ht(32,258,258,4096,qt)];function Bt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=At,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),It(this.dyn_ltree),It(this.dyn_dtree),It(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),It(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),It(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var Ft=function(t){if(!t||!t.state)return kt(t,vt);t.total_in=t.total_out=0,t.data_type=Et;var n=t.state;return n.pending=0,n.pending_out=0,n.wrap<0&&(n.wrap=-n.wrap),n.status=n.wrap?42:Tt,t.adler=2===n.wrap?0:1,n.last_flush=st,tt(n),at},Vt=function(t){var n=Ft(t);return n===at&&function(t){t.window_size=2*t.w_size,It(t.head),t.max_lazy_match=zt[t.level].max_lazy,t.good_match=zt[t.level].good_length,t.nice_match=zt[t.level].nice_length,t.max_chain_length=zt[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0}(t.state),n},Gt=function(t,n,i,r,e,s){if(!t)return vt;var o=1;if(n===wt&&(n=6),r<0?(o=0,r=-r):r>15&&(o=2,r-=16),e<1||e>9||i!==At||r<8||r>15||n<0||n>9||s<0||s>gt)return kt(t,vt);8===r&&(r=9);var u=new Bt;return t.state=u,u.strm=t,u.wrap=o,u.gzhead=null,u.w_bits=r,u.w_size=1<<u.w_bits,u.w_mask=u.w_size-1,u.hash_bits=e+7,u.hash_size=1<<u.hash_bits,u.hash_mask=u.hash_size-1,u.hash_shift=~~((u.hash_bits+3-1)/3),u.window=new Uint8Array(2*u.w_size),u.head=new Uint16Array(u.hash_size),u.prev=new Uint16Array(u.w_size),u.lit_bufsize=1<<e+6,u.pending_buf_size=4*u.lit_bufsize,u.pending_buf=new Uint8Array(u.pending_buf_size),u.d_buf=1*u.lit_bufsize,u.l_buf=3*u.lit_bufsize,u.level=n,u.strategy=s,u.method=i,Vt(t)},Jt=function(t,n){var i,r;if(!t||!t.state||n>ct||n<0)return t?kt(t,vt):vt;var e=t.state;if(!t.output||!t.input&&0!==t.avail_in||e.status===Ot&&n!==ht)return kt(t,0===t.avail_out?dt:vt);e.strm=t;var s=e.last_flush;if(e.last_flush=n,42===e.status)if(2===e.wrap)t.adler=0,Pt(e,31),Pt(e,139),Pt(e,8),e.gzhead?(Pt(e,(e.gzhead.text?1:0)+(e.gzhead.hcrc?2:0)+(e.gzhead.extra?4:0)+(e.gzhead.name?8:0)+(e.gzhead.comment?16:0)),Pt(e,255&e.gzhead.time),Pt(e,e.gzhead.time>>8&255),Pt(e,e.gzhead.time>>16&255),Pt(e,e.gzhead.time>>24&255),Pt(e,9===e.level?2:e.strategy>=yt||e.level<2?4:0),Pt(e,255&e.gzhead.os),e.gzhead.extra&&e.gzhead.extra.length&&(Pt(e,255&e.gzhead.extra.length),Pt(e,e.gzhead.extra.length>>8&255)),e.gzhead.hcrc&&(t.adler=F(t.adler,e.pending_buf,e.pending,0)),e.gzindex=0,e.status=69):(Pt(e,0),Pt(e,0),Pt(e,0),Pt(e,0),Pt(e,0),Pt(e,9===e.level?2:e.strategy>=yt||e.level<2?4:0),Pt(e,3),e.status=Tt);else{var o=At+(e.w_bits-8<<4)<<8;o|=(e.strategy>=yt||e.level<2?0:e.level<6?1:6===e.level?2:3)<<6,0!==e.strstart&&(o|=32),o+=31-o%31,e.status=Tt,Mt(e,o),0!==e.strstart&&(Mt(e,t.adler>>>16),Mt(e,65535&t.adler)),t.adler=1}if(69===e.status)if(e.gzhead.extra){for(i=e.pending;e.gzindex<(65535&e.gzhead.extra.length)&&(e.pending!==e.pending_buf_size||(e.gzhead.hcrc&&e.pending>i&&(t.adler=F(t.adler,e.pending_buf,e.pending-i,i)),xt(t),i=e.pending,e.pending!==e.pending_buf_size));)Pt(e,255&e.gzhead.extra[e.gzindex]),e.gzindex++;e.gzhead.hcrc&&e.pending>i&&(t.adler=F(t.adler,e.pending_buf,e.pending-i,i)),e.gzindex===e.gzhead.extra.length&&(e.gzindex=0,e.status=73)}else e.status=73;if(73===e.status)if(e.gzhead.name){i=e.pending;do{if(e.pending===e.pending_buf_size&&(e.gzhead.hcrc&&e.pending>i&&(t.adler=F(t.adler,e.pending_buf,e.pending-i,i)),xt(t),i=e.pending,e.pending===e.pending_buf_size)){r=1;break}r=e.gzindex<e.gzhead.name.length?255&e.gzhead.name.charCodeAt(e.gzindex++):0,Pt(e,r)}while(0!==r);e.gzhead.hcrc&&e.pending>i&&(t.adler=F(t.adler,e.pending_buf,e.pending-i,i)),0===r&&(e.gzindex=0,e.status=91)}else e.status=91;if(91===e.status)if(e.gzhead.comment){i=e.pending;do{if(e.pending===e.pending_buf_size&&(e.gzhead.hcrc&&e.pending>i&&(t.adler=F(t.adler,e.pending_buf,e.pending-i,i)),xt(t),i=e.pending,e.pending===e.pending_buf_size)){r=1;break}r=e.gzindex<e.gzhead.comment.length?255&e.gzhead.comment.charCodeAt(e.gzindex++):0,Pt(e,r)}while(0!==r);e.gzhead.hcrc&&e.pending>i&&(t.adler=F(t.adler,e.pending_buf,e.pending-i,i)),0===r&&(e.status=Nt)}else e.status=Nt;if(e.status===Nt&&(e.gzhead.hcrc?(e.pending+2>e.pending_buf_size&&xt(t),e.pending+2<=e.pending_buf_size&&(Pt(e,255&t.adler),Pt(e,t.adler>>8&255),t.adler=0,e.status=Tt)):e.status=Tt),0!==e.pending){if(xt(t),0===t.avail_out)return e.last_flush=-1,at}else if(0===t.avail_in&&Ct(n)<=Ct(s)&&n!==ht)return kt(t,dt);if(e.status===Ot&&0!==t.avail_in)return kt(t,dt);if(0!==t.avail_in||0!==e.lookahead||n!==st&&e.status!==Ot){var u=e.strategy===yt?function(t,n){for(var i;;){if(0===t.lookahead&&(Ut(t),0===t.lookahead)){if(n===st)return 1;break}if(t.match_length=0,i=rt(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,i&&(Lt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,n===ht?(Lt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Lt(t,!1),0===t.strm.avail_out)?1:2}(e,n):e.strategy===mt?function(t,n){for(var i,r,e,s,o=t.window;;){if(t.lookahead<=bt){if(Ut(t),t.lookahead<=bt&&n===st)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(r=o[e=t.strstart-1])===o[++e]&&r===o[++e]&&r===o[++e]){s=t.strstart+bt;do{}while(r===o[++e]&&r===o[++e]&&r===o[++e]&&r===o[++e]&&r===o[++e]&&r===o[++e]&&r===o[++e]&&r===o[++e]&&e<s);t.match_length=bt-(s-e),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(i=rt(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(i=rt(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),i&&(Lt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,n===ht?(Lt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Lt(t,!1),0===t.strm.avail_out)?1:2}(e,n):zt[e.level].func(e,n);if(3!==u&&4!==u||(e.status=Ot),1===u||3===u)return 0===t.avail_out&&(e.last_flush=-1),at;if(2===u&&(n===ot?et(e):n!==ct&&(nt(e,0,0,!1),n===ut&&(It(e.head),0===e.lookahead&&(e.strstart=0,e.block_start=0,e.insert=0))),xt(t),0===t.avail_out))return e.last_flush=-1,at}return n!==ht?at:e.wrap<=0?ft:(2===e.wrap?(Pt(e,255&t.adler),Pt(e,t.adler>>8&255),Pt(e,t.adler>>16&255),Pt(e,t.adler>>24&255),Pt(e,255&t.total_in),Pt(e,t.total_in>>8&255),Pt(e,t.total_in>>16&255),Pt(e,t.total_in>>24&255)):(Mt(e,t.adler>>>16),Mt(e,65535&t.adler)),xt(t),e.wrap>0&&(e.wrap=-e.wrap),0!==e.pending?at:ft)},Yt=function(t,n){var i=n.length;if(!t||!t.state)return vt;var r=t.state,e=r.wrap;if(2===e||1===e&&42!==r.status||r.lookahead)return vt;if(1===e&&(t.adler=z(t.adler,n,i,0)),r.wrap=0,i>=r.w_size){0===e&&(It(r.head),r.strstart=0,r.block_start=0,r.insert=0);var s=new Uint8Array(r.w_size);s.set(n.subarray(i-r.w_size,i),0),n=s,i=r.w_size}var o=t.avail_in,u=t.next_in,h=t.input;for(t.avail_in=i,t.next_in=0,t.input=n,Ut(r);r.lookahead>=3;){var c=r.strstart,a=r.lookahead-2;do{r.ins_h=_t(r,r.ins_h,r.window[c+3-1]),r.prev[c&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=c,c++}while(--a);r.strstart=c,r.lookahead=2,Ut(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,t.next_in=u,t.input=h,t.avail_in=o,r.wrap=e,at},Wt={deflateInit:function(t,n){return Gt(t,n,At,15,8,St)},deflateInit2:Gt,deflateReset:Vt,deflateResetKeep:Ft,deflateSetHeader:function(t,n){return t&&t.state?2!==t.state.wrap?vt:(t.state.gzhead=n,at):vt},deflate:Jt,deflateEnd:function(t){if(!t||!t.state)return vt;var n=t.state.status;return 42!==n&&69!==n&&73!==n&&91!==n&&n!==Nt&&n!==Tt&&n!==Ot?kt(t,vt):(t.state=null,n===Tt?kt(t,lt):at)},deflateSetDictionary:Yt,deflateInfo:"pako deflate (from Nodeca project)"},Xt=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},Kt={assign:function(t){for(var n=Array.prototype.slice.call(arguments,1);n.length;){var i=n.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(var r in i)Xt(i,r)&&(t[r]=i[r])}}return t},flattenChunks:function(t){for(var n=0,i=0,r=t.length;i<r;i++)n+=t[i].length;var e=new Uint8Array(n),s=(i=0,0);for(r=t.length;i<r;i++){var o=t[i];e.set(o,s),s+=o.length}return e}},$t=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){$t=!1}for(var Qt=new Uint8Array(256),Zt=0;Zt<256;Zt++)Qt[Zt]=Zt>=252?6:Zt>=248?5:Zt>=240?4:Zt>=224?3:Zt>=192?2:1;Qt[254]=Qt[254]=1;var tn=function(t,n){if(void 0===n&&(n=t.length),n<65534&&t.subarray&&$t)return String.fromCharCode.apply(null,t.length===n?t:t.subarray(0,n));for(var i="",r=0;r<n;r++)i+=String.fromCharCode(t[r]);return i},nn={string2buf:function(t){if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(t);var n,i,r,e,s,o=t.length,u=0;for(e=0;e<o;e++)55296==(64512&(i=t.charCodeAt(e)))&&e+1<o&&56320==(64512&(r=t.charCodeAt(e+1)))&&(i=65536+(i-55296<<10)+(r-56320),e++),u+=i<128?1:i<2048?2:i<65536?3:4;for(n=new Uint8Array(u),s=0,e=0;s<u;e++)55296==(64512&(i=t.charCodeAt(e)))&&e+1<o&&56320==(64512&(r=t.charCodeAt(e+1)))&&(i=65536+(i-55296<<10)+(r-56320),e++),i<128?n[s++]=i:i<2048?(n[s++]=192|i>>>6,n[s++]=128|63&i):i<65536?(n[s++]=224|i>>>12,n[s++]=128|i>>>6&63,n[s++]=128|63&i):(n[s++]=240|i>>>18,n[s++]=128|i>>>12&63,n[s++]=128|i>>>6&63,n[s++]=128|63&i);return n},buf2string:function(t,n){var i,r,e=n||t.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(t.subarray(0,n));var s=new Array(2*e);for(r=0,i=0;i<e;){var o=t[i++];if(o<128)s[r++]=o;else{var u=Qt[o];if(u>4)s[r++]=65533,i+=u-1;else{for(o&=2===u?31:3===u?15:7;u>1&&i<e;)o=o<<6|63&t[i++],u--;u>1?s[r++]=65533:o<65536?s[r++]=o:(o-=65536,s[r++]=55296|o>>10&1023,s[r++]=56320|1023&o)}}}return tn(s,r)},utf8border:function(t,n){(n=n||t.length)>t.length&&(n=t.length);for(var i=n-1;i>=0&&128==(192&t[i]);)i--;return i<0||0===i?n:i+Qt[t[i]]>n?i:n}};var rn=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},en=Object.prototype.toString,sn=G,on=J,un=Y,hn=W,cn=X,an=K,fn=$,vn=Q,ln=Z;function dn(t){this.options=Kt.assign({level:fn,method:ln,chunkSize:16384,windowBits:15,memLevel:8,strategy:vn},t||{});var n=this.options;n.raw&&n.windowBits>0?n.windowBits=-n.windowBits:n.gzip&&n.windowBits>0&&n.windowBits<16&&(n.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new rn,this.strm.avail_out=0;var i=Wt.deflateInit2(this.strm,n.level,n.method,n.windowBits,n.memLevel,n.strategy);if(i!==cn)throw new Error(V[i]);if(n.header&&Wt.deflateSetHeader(this.strm,n.header),n.dictionary){var r=void 0;if(r="string"==typeof n.dictionary?nn.string2buf(n.dictionary):"[object ArrayBuffer]"===en.call(n.dictionary)?new Uint8Array(n.dictionary):n.dictionary,(i=Wt.deflateSetDictionary(this.strm,r))!==cn)throw new Error(V[i]);this._dict_set=!0}}function wn(t,n){return(n=n||{}).gzip=!0,function(t,n){var i=new dn(n=n||{});if(i.push(t,!0),i.err)throw i.msg||V[i.err];return i.result}(t,n)}return dn.prototype.push=function(t,n){var i,r,e=this.strm,s=this.options.chunkSize;if(this.ended)return!1;for(r=n===~~n?n:!0===n?hn:sn,"string"==typeof t?e.input=nn.string2buf(t):"[object ArrayBuffer]"===en.call(t)?e.input=new Uint8Array(t):e.input=t,e.next_in=0,e.avail_in=e.input.length;;)if(0===e.avail_out&&(e.output=new Uint8Array(s),e.next_out=0,e.avail_out=s),(r===on||r===un)&&e.avail_out<=6)this.onData(e.output.subarray(0,e.next_out)),e.avail_out=0;else{if((i=Wt.deflate(e,r))===an)return e.next_out>0&&this.onData(e.output.subarray(0,e.next_out)),i=Wt.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===cn;if(0!==e.avail_out){if(r>0&&e.next_out>0)this.onData(e.output.subarray(0,e.next_out)),e.avail_out=0;else if(0===e.avail_in)break}else this.onData(e.output)}return!0},dn.prototype.onData=function(t){this.chunks.push(t)},dn.prototype.onEnd=function(t){t===cn&&(this.result=Kt.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},function(t,n,i){var r=wn(t);return r="base64"===n?btoa(tn(r)):r.buffer,i&&i(r),r}}Iu.init();var xu=function(t){function n(n){var i=t.call(this,n)||this;return i.algorithm=on.GZIP,i._d=_u(),i.xd=function(t,n,r){r(i._d(t,n))},i.compress=Lu(),"undefined"!=typeof CompressionStream&&Pn||(i.compress=i.xd,i.getCompressorSourceCode=function(){return _u.toString()}),i}return z(n,t),n.prototype.compressSync=function(t,n){return this._d(t,n)},n.prototype.getCompressorSourceCode=function(){return Lu.toString()},n}(ln);function Lu(){return function(t,n,i){var r=new Response(t).body.pipeThrough(new CompressionStream("gzip")),e=new Response(r).arrayBuffer();"base64"!==n?e.then((function(t){return i(t)})):e.then((function(t){return n=t,new Promise((function(t){var i=new FileReader;i.onload=function(n){return t(n.target.result.split(",")[1])},i.readAsDataURL(new Blob([n]))}));var n})).then((function(t){return i(t)}))}}var Pu,Mu,Du=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.algorithm=on.UNCOMPRESSED,n}return z(n,t),n.prototype.compress=function(t,n,i){i(this.compressSync(t,n))},n.prototype.compressSync=function(t,n){return t},n.prototype.getCompressorSourceCode=function(){return function(){return function(t,n,i){return i(t)}}.toString()},n}(ln),Uu=function(){function t(){}return t.create=function(t){return this.instance?this.instance:Iu.isCompressionEnabled()?this.instance=new xu(t):new Du(t)},t}(),ju=function(){function t(){}return t.prototype.setItem=function(t,n){window.sessionStorage.setItem(t,n)},t.prototype.getItem=function(t){return window.sessionStorage.getItem(t)},t.prototype.removeItem=function(t){window.sessionStorage.removeItem(t)},t}(),qu=function(){function t(){}return t.prototype.setItem=function(t,n){window.localStorage.setItem(t,n)},t.prototype.getItem=function(t){return window.localStorage.getItem(t)},t.prototype.removeItem=function(t){window.localStorage.removeItem(t)},t}(),Hu="_cs_cvars",zu=function(){function t(t,n,i){this.L=t,this.Qv=n,this.Zv=i}return t.prototype.onCookieToSet=function(t){this.ol=t},t.prototype.onCookieToRemove=function(t){this.ul=t},t.prototype.get=function(){return this.L.cookielessTrackingEnabled?this.Zv.getItem(Hu):this.Qv.get(Hu)},t.prototype.set=function(t){var n;this.L.cookielessTrackingEnabled?this.Zv.setItem(Hu,t):(this.Qv.set(Hu,t),null===(n=this.ol)||void 0===n||n.call(this,Hu,t))},t.prototype.remove=function(){var t;this.L.cookielessTrackingEnabled?this.Zv.removeItem(Hu):(this.Qv.delete(Hu),null===(t=this.ul)||void 0===t||t.call(this,Hu))},t.isValidCustomVarString=function(t){return"string"==typeof t},t}(),Bu=["visit",2],Fu=["page",3],Vu=["nextPageOnly",4],Gu=function(){function t(t,n){this.P=t,this.Gv=n,this.Ld={},this.Pd={}}return t.prototype.set=function(t,n,i,r){var e,s;if(t>0&&Rt(n)&&Rt(i)&&!Nt(n)&&!Nt(i)){var o=this.P.anonymizeEmail(csString(n)),u=this.P.anonymizeEmail(csString(i));if(e=[o.slice(0,512),u.slice(0,255)],s=""!==i,!bt(r)||csArray.prototype.indexOf.call(Bu,r)>=0){var h=this.getCustomVariablesSession();s?h[t]=e:delete h[t],this.setCustomVariableSession(h)}(!bt(r)||csArray.prototype.indexOf.call(Fu,r)>=0)&&(s?this.Ld[t]=e:delete this.Ld[t]),bt(r)&&csArray.prototype.indexOf.call(Vu,r)>=0&&(s?this.Pd[t]=e:delete this.Pd[t])}},t.prototype.getCustomVariablesSession=function(){var t=this.Gv.get();if(!t)return{};var n=window.csJSON.parse(t);return null!==n&&At(n)?n:{}},t.prototype.setCustomVariableSession=function(t){this.Gv.set(window.csJSON.stringify(t))},t.prototype.removeCustomVariablesSession=function(){this.Gv.remove()},t.prototype.removeCustomVariablesPage=function(){this.Ld={}},t.prototype.getRequestParameters=function(){var t=this.getCustomVariablesSession();for(var n in this.Pd)this.Pd.hasOwnProperty(n)&&(this.Ld[n]=this.Pd[n]);for(var n in this.Ld)this.Ld.hasOwnProperty(n)&&(t[n]=this.Ld[n]);if(window.csJSON.stringify(t).length<=2)return{};var i={cvars:this.Md(t)};return this.Ld&&window.csJSON.stringify(this.Ld).length>2&&(i.cvarp=this.Md(this.Ld)),i},t.prototype.deleteNextPageOnlyCustomVariables=function(){if(Object.keys(this.Pd).length>0)for(var t in this.Pd)this.Pd[t]===this.Ld[t]&&(delete this.Ld[t],delete this.Pd[t])},t.prototype.Md=function(t){for(var n in t)if(t.hasOwnProperty(n)){var i=parseInt(n,10),r=t[n],e=r[0],s=r[1];u=1,h=20,(!(St(o=i)&&o>=u&&o<=h)||e.length>512||s.length>255)&&delete t[n]}var o,u,h,c=function(t){var n;for(n in t)return!1;return!0}(t)?[]:t;return window.csJSON.stringify(c)},t}(),Ju=["setCustomVariable"],Yu=function(){function t(t,n){this.Go=t,this.Qt=n}return t.prototype.init=function(){var t=this;this.Go.register(Ju,(function(n,i,r,e){t.Qt.set(n,i,r,e)}))},t.prototype.onAfterArtificialPageView=function(){this.Qt.deleteNextPageOnlyCustomVariables()},t.prototype.onAfterNaturalPageView=function(){this.Qt.deleteNextPageOnlyCustomVariables()},t.prototype.onOptout=function(){this.Qt.removeCustomVariablesSession()},t.prototype.onBeforeVisitorRenewal=function(){this.Qt.removeCustomVariablesSession(),this.Qt.removeCustomVariablesPage()},t}(),Wu="_cs_id",Xu=/^(([a-z0-9\-])+(\.[0-9]+){6})(\.(None|Lax|X)\.(0|1))?$/,Ku=function(){function t(t,n,i){this.L=t,this.Qv=n,this.Zv=i}return t.prototype.onCookieToSet=function(t){this.ol=t},t.prototype.onCookieToRemove=function(t){this.ul=t},t.prototype.get=function(){var n;return(n=this.L.cookielessTrackingEnabled?this.Zv.getItem(Wu):this.Qv.get(Wu))?t.fromString(n):null},t.prototype.set=function(n){var i,r=t.toString(n);if(this.L.cookielessTrackingEnabled)this.Zv.setItem(Wu,r);else{var e=new csDate(n.expires);this.Qv.set(Wu,r,e),null===(i=this.ol)||void 0===i||i.call(this,Wu,r,e)}},t.prototype.remove=function(){var t;this.L.cookielessTrackingEnabled?this.Zv.removeItem(Wu):(this.Qv.delete(Wu),null===(t=this.ul)||void 0===t||t.call(this,Wu))},t.prototype.handleSubdomainChange=function(){if(!this.L.cookielessTrackingEnabled){var t=this.get();t&&(this.L.allowSubdomains?this.Qv.delete(Wu,nn.CURRENT_DOMAIN):this.Qv.delete(Wu,this.Qv.getRootDomain()),this.set(t))}},t.fromString=function(t){var n=csString.prototype.split.call(t,"."),i=n[0],r=n[1],e=n[2],s=n[3],o=n[4],u=n[5],h=n[6];return{id:i,creationTimestamp:Number(r),visitsCount:Number(e),hitTimestamp:Number(s),lastVisitTimestamp:Number(o),appliedTrackingDraw:Number(u),expires:Number(h)}},t.toString=function(t){return csArray.prototype.join.call([t.id,t.creationTimestamp,t.visitsCount,t.hitTimestamp,t.lastVisitTimestamp,t.appliedTrackingDraw,t.expires],".")},t.isValidVisitorString=function(t){return Xu.test(t)},t}(),$u=function(){function t(t){this.P=t}return t.prototype.getUrlMaskingPattern=function(n){for(var i=[],r=0,e=csString.prototype.split.call(n,"/");r<e.length;r++){var s=e[r];X(s,t.Dd)?csArray.prototype.push.call(i,{key:s,value:"CS_ANONYMIZED_".concat(csString.prototype.toUpperCase.call(csString.prototype.slice.call(s,1)))}):csArray.prototype.push.call(i,{key:s,value:null})}return i},t.prototype.anonymizeUrl=function(t,n){var i=this.P.anonymizeEmail(t);return i=this.P.anonymizeJwt(i),n.length>0?this.Ud(i,n):i},t.prototype.removeQueryString=function(t){var n=this.jd(t),i=n.path;return""!==n.queryString?"".concat(i,"?"):i},t.prototype.jd=function(t){var n=csString.prototype.indexOf.call(t,"?"),i="",r="";return-1!==n?(i=csString.prototype.slice.call(t,0,n),r=csString.prototype.slice.call(t,n,t.length)):i=t,{path:i,queryString:r}},t.prototype.Ud=function(t,n){for(var i=this.jd(t),r=i.path,e=i.queryString,s=csString.prototype.split.call(r,"/"),o=0,u=n;o<u.length;o++){var h=u[o],c=this.qd(s,h);if(null!==c)return"".concat(c).concat(e)}return t},t.prototype.qd=function(n,i){if(n.length<i.length)return null;for(var r="",e=0;e<n.length;e+=1)if(e>=i.length)r+="".concat(n[e],"/");else if(X(i[e].key,t.Dd))r+="".concat(i[e].value,"/");else{if(n[e]!==i[e].key)return null;r+="".concat(n[e],"/")}return csString.prototype.slice.call(r,0,-1)},t.Dd=":",t}(),Qu=function(){function t(t,n){this.Fu=t,this.L=n}return t.prototype.getEventTargetPath=function(t){var n=_n(t);return this.Fu.getElementPath(n,B({dynamicIdRegex:this.L.dynamicIdRegex},this.L.pathComputationRules))},t.prototype.getEventTargetPathAndTargetLink=function(t){var n=_n(t),i=this.Fu.getElementPathAndFirstAnchorParent(n,B({dynamicIdRegex:this.L.dynamicIdRegex},this.L.pathComputationRules)),r=i.path,e=i.firstAnchorParent;return{path:r,targetLink:this.Hd(e)?e.href:""}},t.prototype.hasValidEventTarget=function(t){var n=_n(t);return this.Fu.isValidElement(n)},t.prototype.getElementPath=function(t){return this.Fu.getElementPath(t,B({dynamicIdRegex:this.L.dynamicIdRegex},this.L.pathComputationRules))},t.prototype.Hd=function(t){var n;return null!==t&&t.hasAttribute("href")&&!X(null!==(n=t.getAttribute("href"))&&void 0!==n?n:"","#")},t}(),Zu=function(){function t(t){this.Bh=t}return t.prototype.transformEvent=function(t,n){var i=this.zd(t,n),r=this.Bh.getElementPath(t);return this.Bd(r,i)},t.prototype.zd=function(t,n){if(function(t){return void 0!==t.x&&void 0!==t.y}(n)){var i=t.getBoundingClientRect();n.x=Math.round(i.left+n.x+$n.windowOffsetX()),n.y=Math.round(i.top+n.y+$n.windowOffsetY())}return n},t.prototype.Bd=function(t,n){return Zr(n)&&(n.tgt="".concat(t).concat(ku).concat(n.tgt)),function(t){return void 0!==t.tgtHM}(n)&&(n.tgtHM="".concat(t).concat(ku).concat(n.tgtHM)),function(t){return void 0!==t.tgtLk}(n)&&(n.tgtLk="".concat(t).concat(ku).concat(n.tgtLk)),n},t}(),th=function(){function t(t){this.Bh=t}return t.prototype.transformEvent=function(t,n){var i=this.Bh.getElementPath(t);return{iframePath:n.iframePath?"".concat(i).concat(ku).concat(n.iframePath):i,commands:n.commands}},t}(),nh=function(){function t(t){this.Bh=t}return t.prototype.transformEvent=function(t,n){if(0===n.products.length)return n;var i=this.Bh.getElementPath(t),r=csArray.prototype.map.call(n.products,(function(t){return B(B({},t),{targetPath:"".concat(i).concat(ku).concat(t.targetPath)})}));return B(B({},n),{products:r})},t}(),ih=function(){function t(t){this.nn=t,this.Fd={clientX:2,clientY:3},this.Vd={clientX:1,clientY:2},this.Gd=[an.POINTER_DOWN,an.POINTER_MOVE,an.POINTER_UP],this.Jd=[an.TOUCH_START,an.TOUCH_MOVE,an.TOUCH_END]}return t.prototype.transformEvents=function(t,n){var i=this;if(!Qn.isConnected(t))return n.events=csArray.prototype.filter.call(n.events,(function(t){return t.type!==an.VISIBILITY_CHANGE})),0===n.events.length||(Wt.warn("IframeRecordingEventsTransformer received event ".concat(Bt.RecordingEvent,"\n        from disconnected iframe, content:").concat(csJSON.stringify(n.events))),n.events=[]),n;var r=this.nn.getId(t);if(void 0===r)return Wt.error("IframeRecordingEventsTransformer received event ".concat(Bt.RecordingEvent,"\n        from unidentified iframe, content:").concat(csJSON.stringify(n.events))),n.events=[],n;var e=null;csArray.prototype.some.call(n.events,(function(t){return i.Yd(t)||i.Wd(t)}))&&(e=t.getBoundingClientRect());for(var s=0,o=n.events;s<o.length;s++){var u=o[s];this.Yd(u)?this.Xd(e,u):this.Wd(u)&&this.Kd(e,u),u.context=u.context&&u.context.length>0?"".concat(r,"/").concat(u.context):"".concat(r)}return n},t.prototype.Kd=function(t,n){this.$d(this.Vd,t,n)},t.prototype.Xd=function(t,n){this.$d(this.Fd,t,n)},t.prototype.$d=function(t,n,i){i.args&&(i.args[t.clientX]=Math.round(n.left+i.args[t.clientX]),i.args[t.clientY]=Math.round(n.top+i.args[t.clientY]))},t.prototype.Yd=function(t){return-1!==csArray.prototype.indexOf.call(this.Gd,t.type)},t.prototype.Wd=function(t){return-1!==csArray.prototype.indexOf.call(this.Jd,t.type)},t}(),rh=function(){function t(t){this.Qd=t}return t.prototype.start=function(){var t=this;this.Qd.onEvent((function(n){return t.Bi(n)})),this.Qd.start()},t.prototype.stop=function(){this.Qd.stop()},t.prototype.Bi=function(t){var n="Content Security Policy error. Violated directive: ".concat(t.violatedDirective," - Source file: ").concat(t.sourceFile);Wt.warn(n)},t}(),eh=function(){function t(){var t=this;this.ea={boundElement:document,type:"securitypolicyviolation",listener:function(n){return t.securityPolicyViolationListener(n)}}}return t.prototype.start=function(){yn(this.ea)},t.prototype.stop=function(){mn(this.ea)},t.prototype.onEvent=function(t){this.Wn=t},t.prototype.Zd=function(n){if(!n)return!1;var i=n.disposition;return Et(n.sourceFile)&&csArray.prototype.some.call(t.tw,(function(t){return csString.prototype.indexOf.call(n.sourceFile,t)>0}))&&"report"!==i},t.prototype.securityPolicyViolationListener=function(t){this.Zd(t)&&this.Wn({violatedDirective:t.violatedDirective,sourceFile:t.sourceFile})},t.tw=["contentsquare","cdnssl.clicktale.net","localhost","website.com/build/e2e"],F([tn("Event handler type: securitypolicyviolation")],t.prototype,"securityPolicyViolationListener",null),t}(),sh=function(){function t(){}return t.prototype.init=function(){this.nw=new rh(new eh),this.nw.start()},t.prototype.onOptout=function(){this.nw.stop()},t}(),oh=function(){function t(t,n,i,r){this.L=t,this.$=n,this.M=i,this.we=r}return t.prototype.init=function(){var t,n,i,r,e,s,o,u,h,c,a,f,v,l,d,w,p,y,m,g,S,E,A,b,R,N,T,O,k,C,I,_,x=this;this.we.schedule((function(){t=new Wo(x.we),n=new vt,i=new $u(n),e=new Tu(window.location,i),(r=new nn(x.L,e,x.$)).init()})),this.we.schedule((function(){if(s=new ju,o=new qu,y=new lu(window.location,r),(new sh).init(),m=Uu.create(Wt.warn),p=new wn(m),x.L.useMalkaPipeline){var n=p.create("".concat(x.L.getQuotaServiceUri(),"/quota"),!0);(c=new Fo(x.L,n,t,y,e)).init()}else c=new Bo(x.L,y,e)})),this.we.schedule((function(){u=new Ho(x.L,r,s),h=new Vo(u,c)})),this.we.schedule((function(){a=new Ku(x.L,r,s),f=new Po(x.L,a,h,t),x.M.setContext(f,h),c.setVisitorService(f)})),this.we.schedule((function(){v=new Jo(f,h),l=new ou(x.L,r,s),d=new uu(window.location,l),w=new hu(d),g=new Go(x.L,f,d);var t=new Sr;I=new Qu(D,x.L),N=new Zu(I),T=new th(I),O=new nh(I),k=new ih(t),C=new Cu(N,T,O,k),R=new Eu([Su.UXA]),S=new gu(R,C),E=new cu(e),A=new fu(E,R);var i=new zu(x.L,r,s);_=new Gu(n,i),b=new Yu(R,_);new pn(f,h,d,_,x.L)})),this.we.schedule((function(){new xo(x.L,f,d,g,v,undefined,undefined,y).compute((function(s){x.we.schedule((function(){S.init();var u=new Ou,c=new $o(x.L,r,o),a=new nu(x.L,c,t),v=new tu(R,a),l=new wu(x.L,r,o),d=new pu(t,window.location,l),y=new mu(R,d),g=new bu(R,x.L),N=new Au(x.L,f,h);s?(t.emitInitTracking(),new _o(N,m,f,h,t,R,S,x.L,y,d,v,a,n,I,i,e,g,u,C,_,b,E,A,x.we,p).start()):new iu(t,R,S,y,d,w,v).start()}))}))}))},t}();!function(t){var n,i="{domain}/tag/bridge.html?v={version}#{token}",r={loadBundle:function(t){var u=t.source,h=t.data;if(s(h)){var f=function(){var n,i,r,s=e("{domain}/tag/tag.bundle.js?v={version}",h);n=s,i=function(){return u.postMessage("csBundleLoaded",t.origin)},(r=document.createElement("script")).type="text/javascript",r.async=!0,r.src=n,r.onload=i,r.charset="utf-8",document.head.appendChild(r)};n=h.token,a(r.loadBundle),o(t.origin)?f():function(t,n){var r=e(i,t),s=function(t){var n=document.createElement("iframe");return n.src=t,n.id="content-square-bridge",n.setAttribute("style","display: none !important; visibility: hidden !important;"),n}(r),o=function(t){t.source===s.contentWindow&&"TOKEN_VALID"===t.data&&(a(o),s.remove(),n())};c(o),document.head.appendChild(s)}(h,f)}}};function e(t,n){return csString.prototype.replace.call(csString.prototype.replace.call(csString.prototype.replace.call(t,"{version}",n.version),"{token}",n.token),"{domain}",n.domain)}function s(t){return t&&"csBundleInjection"===t.type&&o(t.domain)&&h(t.version)&&u(t.token)}function o(t){return/^https?:\/\/[a-zA-Z0-9\.\-]+\.(content-square\.fr|contentsquare\.com)$/.test(t)}function u(t){return/^[a-zA-Z0-9]+$/.test(t)}function h(t){return/^[a-zA-Z0-9\.]+$/.test(t)}function c(t){window.addEventListener("message",t,!1)}function a(t){window.removeEventListener("message",t,!1)}t.getToken=function(){return n},t.isAuthorizedIncomingMessage=s,t.isAuthorizedDomain=o,t.isAuthorizedToken=u,t.isAuthorizedTagVersion=h,t.isActivable=function(){var t=window.opener||window.parent;return window!==t&&window.addEventListener},t.waitForBundleInjection=function(){c(r.loadBundle)},t.listen=c,t.removeListener=a}(Pu||(Pu={})),function(t){var n,i=window.opener||window.parent,r=[/^https:\/\/app\.contentsquare\.com$/,/^https:\/\/dev-app\.contentsquare\.com$/,/^https:\/\/staging-app\.contentsquare\.com$/,/^https:\/\/.*\.test\.contentsquare\.com$/],e={ping:function(t){"ping"===t.data&&s(t.origin)&&(n=t.origin,h(e.ping),u(e.insertMessageScript),o("".concat("utils.js","?cb=").concat((new csDate).getTime())))},insertMessageScript:c((function(t){var n=t.data;"string"==typeof n&&"ping"!==n&&(h(e.insertMessageScript),o(n))}))};function s(t){return csArray.prototype.some.call(r,(function(n){return n.test(t)}))}function o(t,i){var r=document.createElement("script");r.type="text/javascript",r.async=!0;var e=csString.prototype.replace.call(n,/^https?:/,"");r.src="".concat(e,"/").concat("tag","/").concat(t),r.onload=i,r.charset="utf-8",document.getElementsByTagName("head")[0].appendChild(r)}function u(t){window.addEventListener("message",t,!1)}function h(t){window.removeEventListener("message",t,!1)}function c(t){return function(i){i.origin===n&&t(i)}}t.getToken=function(){return Pu.getToken()},t.isActivable=function(){return window!==i&&window.addEventListener},t.isAuthorizedDomain=s,t.waitForConnection=function(){u(e.ping),Pu.waitForBundleInjection()},t.listen=u,t.removeListener=h,t.secureListener=c,t.post=function(t){n&&i.postMessage(t,n)}}(Mu||(Mu={}));var uh,hh=window.CSFrameCommunication||Mu,ch=function(){function t(t,n,i){void 0===n&&(n=30),void 0===i&&(i=0);var r=this;this.iw=t,this.rw=n,this.ew=i,this.ow=[],this.W=!1,this.uw=0,this.hw=function(){for(r.uw=0;r.ow.length;){if(r.uw>=r.rw)return void setTimeout(r.hw,r.ew);var t=pt(),n=csArray.prototype.shift.call(r.ow);if(!n)break;r.runTask(n);var i=pt()-t;r.uw+=i}r.W=!1}}return t.prototype.schedule=function(t,n){void 0===n&&(n=!1),this.iw&&!n?(csArray.prototype.push.call(this.ow,t),this.cw()):t()},t.prototype.cw=function(){var t=this;this.W||(this.W=!0,setTimeout((function(){t.hw()})))},t.prototype.runTask=function(t){t()},t.prototype.runPendingTasks=function(){var t=this;csArray.prototype.forEach.call(this.ow,(function(n){t.runTask(n)})),this.ow=[]},t.prototype.clearQueue=function(){this.ow=[]},t.prototype.isEmpty=function(){return 0===this.ow.length},F([tn("TaskScheduler"),Cn("runTask")],t.prototype,"runTask",null),F([Cn("runPendingTasks")],t.prototype,"runPendingTasks",null),t}(),ah=function(){function t(t,n,i){this.L=t,this.ft=n,this.M=i}return t.prototype.start=function(){var t,n,i,r,e;if(!window.UXAnalytics){var s=new ch(!!(null===(t=this.L.taskSchedulerOptions)||void 0===t?void 0:t.enabled),null===(n=this.L.taskSchedulerOptions)||void 0===n?void 0:n.maxProcessingTime,null===(i=this.L.taskSchedulerOptions)||void 0===i?void 0:i.waitDuration),o=new en(this.ft,this.L);o.init();var u=new un(this.L,o);if(this.ft.isTopWindowTracker()&&u.canTrack()){if((null===(r=window.CSProtectnativeFunctionsLogs)||void 0===r?void 0:r.Warning)&&Wt.warn("protectNativeFunctions failed: ".concat(window.CSProtectnativeFunctionsLogs.Warning)),null===(e=window.CSProtectnativeFunctionsLogs)||void 0===e?void 0:e.Critical)return void Wt.error("protectNativeFunctions failed: ".concat(window.CSProtectnativeFunctionsLogs.Critical));new oh(this.L,o,this.M,s).init()}else{}window.UXAnalytics={},!window.CSFrameCommunication&&hh.isActivable()&&(window.CSFrameCommunication=hh,hh.waitForConnection())}},F([Cn("main.start"),tn("main.start")],t.prototype,"start",null),t}();!function(t){t.isCSJavascriptBridgeDefined=function(){return"object"==typeof window.CSJavascriptBridge&&"function"==typeof window.CSJavascriptBridge.optIn&&"function"==typeof window.CSJavascriptBridge.optOut&&"function"==typeof window.CSJavascriptBridge.sendEvent&&"function"==typeof window.CSJavascriptBridge.sendDynamicVar&&"function"==typeof window.CSJavascriptBridge.sendTransaction},t.sendAnalysisEvent=function(t){window.CSJavascriptBridge.sendEvent(csJSON.stringify(t))},t.sendSREvent=function(t){if(window.CSJavascriptBridge.sendSREvent)for(var n=0,i=t.events;n<i.length;n++){var r=i[n];window.CSJavascriptBridge.sendSREvent(csJSON.stringify(r))}},t.sendLog=function(t){window.CSJavascriptBridge&&window.CSJavascriptBridge.sendLog&&window.CSJavascriptBridge.sendLog(csJSON.stringify(t))},t.sendOptIn=function(){window.CSJavascriptBridge.optIn()},t.sendOptOut=function(){window.CSJavascriptBridge.optOut()},t.sendDynamicVariable=function(t,n){window.CSJavascriptBridge.sendDynamicVar(t,n)},t.sendTransaction=function(t,n,i,r){window.CSJavascriptBridge.sendTransaction(t,n,i,r)},t.sendAssets=function(t,n){if(window.CSJavascriptBridge.sendAssets){var i=csJSON.stringify(t);window.CSJavascriptBridge.sendAssets(i,n)}else window.CSJavascriptBridge.sendSRAssets&&window.CSJavascriptBridge.sendSRAssets(csArray.prototype.map.call(t,(function(t){return t.assetId})))}}(uh||(uh={}));var fh,vh,lh=function(){function t(){}return t.prototype.send=function(t,n,i){void 0===i&&(i=tt.warn);var r={message:t,errorCode:n,level:i};uh.sendLog(r)},t}();try{var dh=new rt(window.CS_CONF);window._uxa=window._uxa||[],dh.processOptionOverrides(window._uxa);var wh=new et(window,dh);wh.init();var ph=new Jt;if(Xt=Wt,Wt.computeIsActive(dh.validationRate),wh.isTopWindowTracker()){var yh=new xt(dh,ph);Wt.setStrategy(yh)}else if(wh.isInIframeContext()){var mh=new Gt(dh);Wt.setStrategy(mh)}else if(wh.isInWebViewContext()){var gh=new lh;Wt.setStrategy(gh)}void 0===fh&&(fh=50),void 0===vh&&(vh=.1),Tn=Wt.isPerfLoggingActive()&&function(){var t;if(!(null===(t=window.performance)||void 0===t?void 0:t.mark))return!1;var n="isPerformanceMeasureSupported",i="".concat(n,"_a");return performance.mark(i),void 0!==performance.measure(n,i)}(),Tn&&(Rn=fh,Nn=vh),new ah(dh,wh,ph).start()}catch(ci){}}();